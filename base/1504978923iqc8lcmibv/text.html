<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'DejaVu Sans'; font-size:11pt; font-weight:400; font-style:normal;">
<pre style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Courier New'; font-style:italic; color:#808080;"># количество аргументов сигнала произволно<br /># но должно совпадать с количеством учитывающемся в качестве аргументов<br /># выполняемой функции</span></pre>
<pre style="-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New'; font-weight:600; color:#000080; background-color:#ffffff;"><br /></pre>
<pre style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Courier New'; font-weight:600; color:#000080;">from </span><span style=" font-family:'Courier New'; color:#000000;">PyQt4 </span><span style=" font-family:'Courier New'; font-weight:600; color:#000080;">import </span><span style=" font-family:'Courier New'; color:#000000;">QtGui, QtCore<br /></span><span style=" font-family:'Courier New'; font-weight:600; color:#000080;">import </span><span style=" font-family:'Courier New'; color:#000000;">sys<br /><br /><br /></span><span style=" font-family:'Courier New'; font-weight:600; color:#000080;">class </span><span style=" font-family:'Courier New'; color:#000000;">MyThread(QtCore.QThread):<br />    </span><span style=" font-family:'Courier New'; font-weight:600; color:#000080;">def </span><span style=" font-family:'Courier New'; color:#b200b2;">__init__</span><span style=" font-family:'Courier New'; color:#000000;">(</span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#000000;">, parent=</span><span style=" font-family:'Courier New'; font-weight:600; color:#000080;">None</span><span style=" font-family:'Courier New'; color:#000000;">):<br />        QtCore.QThread.</span><span style=" font-family:'Courier New'; color:#b200b2;">__init__</span><span style=" font-family:'Courier New'; color:#000000;">(</span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#000000;">, parent)<br />        </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#000000;">.running = </span><span style=" font-family:'Courier New'; font-weight:600; color:#000080;">False<br />        </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#000000;">.count = </span><span style=" font-family:'Courier New'; color:#0000ff;">0<br /><br />    </span><span style=" font-family:'Courier New'; font-weight:600; color:#000080;">def </span><span style=" font-family:'Courier New'; color:#000000;">run(</span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#000000;">):<br />        </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#000000;">.running = </span><span style=" font-family:'Courier New'; font-weight:600; color:#000080;">True<br />        while </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#000000;">.running:<br />            </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#000000;">.count += </span><span style=" font-family:'Courier New'; color:#0000ff;">1<br />            </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#000000;">.ss = </span><span style=" font-family:'Courier New'; font-weight:600; color:#008080;">'money'<br />            </span><span style=" font-family:'Courier New'; color:#000000;">l = [</span><span style=" font-family:'Courier New'; color:#000080;">str</span><span style=" font-family:'Courier New'; color:#000000;">(</span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#000000;">.count), </span><span style=" font-family:'Courier New'; color:#000080;">str</span><span style=" font-family:'Courier New'; color:#000000;">(</span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#000000;">.ss)]<br />            </span><span style=" font-family:'Courier New'; font-style:italic; color:#808080;"># количество аргументов сигнала произволно<br />            # но должно совпадать с количеством учитывающемся в качестве аргументов<br />            # выполняемой функции<br />            #self.emit(QtCore.SIGNAL(&quot;mysignal&quot;), str(self.count), str(self.ss))<br />            </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#000000;">.emit(QtCore.SIGNAL(</span><span style=" font-family:'Courier New'; font-weight:600; color:#008080;">&quot;mysignal&quot;</span><span style=" font-family:'Courier New'; color:#000000;">), *l)<br />            </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#000000;">.sleep(</span><span style=" font-family:'Courier New'; color:#0000ff;">1</span><span style=" font-family:'Courier New'; color:#000000;">)<br /><br /><br /></span><span style=" font-family:'Courier New'; font-weight:600; color:#000080;">class </span><span style=" font-family:'Courier New'; color:#000000;">MyWindow(QtGui.QWidget):<br />    </span><span style=" font-family:'Courier New'; font-weight:600; color:#000080;">def </span><span style=" font-family:'Courier New'; color:#b200b2;">__init__</span><span style=" font-family:'Courier New'; color:#000000;">(</span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#000000;">, parent=</span><span style=" font-family:'Courier New'; font-weight:600; color:#000080;">None</span><span style=" font-family:'Courier New'; color:#000000;">):<br />        QtGui.QWidget.</span><span style=" font-family:'Courier New'; color:#b200b2;">__init__</span><span style=" font-family:'Courier New'; color:#000000;">(</span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#000000;">, parent)<br />        </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#000000;">.label = QtGui.QLabel(</span><span style=" font-family:'Courier New'; font-weight:600; color:#008080;">&quot;Press button for execute thread&quot;</span><span style=" font-family:'Courier New'; color:#000000;">)<br />        </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#000000;">.label.setAlignment(QtCore.Qt.AlignCenter)<br />        </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#000000;">.btnStart = QtGui.QPushButton(</span><span style=" font-family:'Courier New'; font-weight:600; color:#008080;">&quot;Start thread&quot;</span><span style=" font-family:'Courier New'; color:#000000;">)<br />        </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#000000;">.btnStop = QtGui.QPushButton(</span><span style=" font-family:'Courier New'; font-weight:600; color:#008080;">&quot;Stop thread&quot;</span><span style=" font-family:'Courier New'; color:#000000;">)<br />        </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#000000;">.vbox = QtGui.QVBoxLayout()<br />        </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#000000;">.vbox.addWidget(</span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#000000;">.label)<br />        </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#000000;">.vbox.addWidget(</span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#000000;">.btnStart)<br />        </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#000000;">.vbox.addWidget(</span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#000000;">.btnStop)<br />        </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#000000;">.setLayout(</span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#000000;">.vbox)<br /><br />        </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#000000;">.mythread = MyThread()<br />        </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#000000;">.connect(</span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#000000;">.btnStart, QtCore.SIGNAL(</span><span style=" font-family:'Courier New'; font-weight:600; color:#008080;">&quot;clicked()&quot;</span><span style=" font-family:'Courier New'; color:#000000;">), </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#000000;">.on_start)<br />        </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#000000;">.connect(</span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#000000;">.btnStop, QtCore.SIGNAL(</span><span style=" font-family:'Courier New'; font-weight:600; color:#008080;">&quot;clicked()&quot;</span><span style=" font-family:'Courier New'; color:#000000;">), </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#000000;">.on_stop)<br />        </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#000000;">.connect(</span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#000000;">.mythread, QtCore.SIGNAL(</span><span style=" font-family:'Courier New'; font-weight:600; color:#008080;">&quot;mysignal&quot;</span><span style=" font-family:'Courier New'; color:#000000;">), </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#000000;">.on_change, QtCore.Qt.QueuedConnection)<br /><br />    </span><span style=" font-family:'Courier New'; font-weight:600; color:#000080;">def </span><span style=" font-family:'Courier New'; color:#000000;">on_start(</span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#000000;">):<br />        </span><span style=" font-family:'Courier New'; font-weight:600; color:#000080;">if not </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#000000;">.mythread.isRunning():<br />            </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#000000;">.mythread.start()<br /><br />    </span><span style=" font-family:'Courier New'; font-weight:600; color:#000080;">def </span><span style=" font-family:'Courier New'; color:#000000;">on_stop(</span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#000000;">):<br />        </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#000000;">.mythread.running = </span><span style=" font-family:'Courier New'; font-weight:600; color:#000080;">False<br /><br />    def </span><span style=" font-family:'Courier New'; color:#000000;">on_change(</span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#000000;">, s, ss):<br />        </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#000000;">.label.setText(s)<br />        </span><span style=" font-family:'Courier New'; color:#000080;">print</span><span style=" font-family:'Courier New'; color:#000000;">(ss)<br />        </span><span style=" font-family:'Courier New'; font-style:italic; color:#808080;">#print(ss)<br /><br /><br /></span><span style=" font-family:'Courier New'; font-weight:600; color:#000080;">if </span><span style=" font-family:'Courier New'; color:#000000;">__name__ == </span><span style=" font-family:'Courier New'; font-weight:600; color:#008080;">'__main__'</span><span style=" font-family:'Courier New'; color:#000000;">:<br />    app = QtGui.QApplication(sys.argv)<br />    window = MyWindow()<br />    window.setWindowTitle(</span><span style=" font-family:'Courier New'; font-weight:600; color:#008080;">&quot;Using class QThread&quot;</span><span style=" font-family:'Courier New'; color:#000000;">)<br />    window.resize(</span><span style=" font-family:'Courier New'; color:#0000ff;">300</span><span style=" font-family:'Courier New'; color:#000000;">, </span><span style=" font-family:'Courier New'; color:#0000ff;">100</span><span style=" font-family:'Courier New'; color:#000000;">)<br />    window.show()<br />    sys.exit(app.exec_())<br /></span></pre></body></html>