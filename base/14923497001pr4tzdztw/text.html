<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'DejaVu Sans'; font-size:11pt; font-weight:400; font-style:normal;">
<pre style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#2b2b2b;"><span style=" font-family:'Courier New'; font-weight:600; color:#cc7832;">from </span><span style=" font-family:'Courier New'; color:#a9b7c6;">PyQt5.QtGui </span><span style=" font-family:'Courier New'; font-weight:600; color:#cc7832;">import </span><span style=" font-family:'Courier New'; color:#a9b7c6;">QIcon<br /></span><span style=" font-family:'Courier New'; font-weight:600; color:#cc7832;">from </span><span style=" font-family:'Courier New'; color:#a9b7c6;">PyQt5.QtWidgets </span><span style=" font-family:'Courier New'; font-weight:600; color:#cc7832;">import </span><span style=" font-family:'Courier New'; color:#a9b7c6;">(QAction</span><span style=" font-family:'Courier New'; color:#cc7832;">, </span><span style=" font-family:'Courier New'; color:#a9b7c6;">QApplication</span><span style=" font-family:'Courier New'; color:#cc7832;">, </span><span style=" font-family:'Courier New'; color:#a9b7c6;">QCheckBox</span><span style=" font-family:'Courier New'; color:#cc7832;">, </span><span style=" font-family:'Courier New'; color:#a9b7c6;">QComboBox</span><span style=" font-family:'Courier New'; color:#cc7832;">,<br />        </span><span style=" font-family:'Courier New'; color:#a9b7c6;">QDialog</span><span style=" font-family:'Courier New'; color:#cc7832;">, </span><span style=" font-family:'Courier New'; color:#a9b7c6;">QGridLayout</span><span style=" font-family:'Courier New'; color:#cc7832;">, </span><span style=" font-family:'Courier New'; color:#a9b7c6;">QGroupBox</span><span style=" font-family:'Courier New'; color:#cc7832;">, </span><span style=" font-family:'Courier New'; color:#a9b7c6;">QHBoxLayout</span><span style=" font-family:'Courier New'; color:#cc7832;">, </span><span style=" font-family:'Courier New'; color:#a9b7c6;">QLabel</span><span style=" font-family:'Courier New'; color:#cc7832;">, </span><span style=" font-family:'Courier New'; color:#a9b7c6;">QLineEdit</span><span style=" font-family:'Courier New'; color:#cc7832;">,<br />        </span><span style=" font-family:'Courier New'; color:#a9b7c6;">QMessageBox</span><span style=" font-family:'Courier New'; color:#cc7832;">, </span><span style=" font-family:'Courier New'; color:#a9b7c6;">QMenu</span><span style=" font-family:'Courier New'; color:#cc7832;">, </span><span style=" font-family:'Courier New'; color:#a9b7c6;">QPushButton</span><span style=" font-family:'Courier New'; color:#cc7832;">, </span><span style=" font-family:'Courier New'; color:#a9b7c6;">QSpinBox</span><span style=" font-family:'Courier New'; color:#cc7832;">, </span><span style=" font-family:'Courier New'; color:#a9b7c6;">QStyle</span><span style=" font-family:'Courier New'; color:#cc7832;">, </span><span style=" font-family:'Courier New'; color:#a9b7c6;">QSystemTrayIcon</span><span style=" font-family:'Courier New'; color:#cc7832;">,<br />        </span><span style=" font-family:'Courier New'; color:#a9b7c6;">QTextEdit</span><span style=" font-family:'Courier New'; color:#cc7832;">, </span><span style=" font-family:'Courier New'; color:#a9b7c6;">QVBoxLayout)<br /><br /></span><span style=" font-family:'Courier New'; font-weight:600; color:#cc7832;">import </span><span style=" font-family:'Courier New'; color:#a9b7c6;">systray_rc<br /><br /><br /></span><span style=" font-family:'Courier New'; font-weight:600; color:#cc7832;">class </span><span style=" font-family:'Courier New'; font-weight:600; color:#a9b7c6;">Window</span><span style=" font-family:'Courier New'; color:#a9b7c6;">(QDialog):<br />    </span><span style=" font-family:'Courier New'; font-weight:600; color:#cc7832;">def </span><span style=" font-family:'Courier New'; color:#b200b2;">__init__</span><span style=" font-family:'Courier New'; color:#a9b7c6;">(</span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">):<br />        </span><span style=" font-family:'Courier New'; color:#8888c6;">super</span><span style=" font-family:'Courier New'; color:#a9b7c6;">(Window</span><span style=" font-family:'Courier New'; color:#cc7832;">, </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">).</span><span style=" font-family:'Courier New'; color:#b200b2;">__init__</span><span style=" font-family:'Courier New'; color:#a9b7c6;">()<br /><br />        </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.createIconGroupBox()<br />        </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.createMessageGroupBox()<br /><br />        </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.iconLabel.setMinimumWidth(</span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.durationLabel.sizeHint().width())<br /><br />        </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.createActions()<br />        </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.createTrayIcon()<br /><br />        </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.showMessageButton.clicked.connect(</span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.showMessage)<br />        </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.showIconCheckBox.toggled.connect(</span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.trayIcon.setVisible)<br />        </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.iconComboBox.currentIndexChanged.connect(</span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.setIcon)<br />        </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.trayIcon.messageClicked.connect(</span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.messageClicked)<br />        </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.trayIcon.activated.connect(</span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.iconActivated)<br /><br />        mainLayout = QVBoxLayout()<br />        mainLayout.addWidget(</span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.iconGroupBox)<br />        mainLayout.addWidget(</span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.messageGroupBox)<br />        </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.setLayout(mainLayout)<br /><br />        </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.iconComboBox.setCurrentIndex(</span><span style=" font-family:'Courier New'; color:#6897bb;">1</span><span style=" font-family:'Courier New'; color:#a9b7c6;">)<br />        </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.trayIcon.show()<br /><br />        </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.setWindowTitle(</span><span style=" font-family:'Courier New'; color:#008080;">&quot;Systray&quot;</span><span style=" font-family:'Courier New'; color:#a9b7c6;">)<br />        </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.resize(</span><span style=" font-family:'Courier New'; color:#6897bb;">400</span><span style=" font-family:'Courier New'; color:#cc7832;">, </span><span style=" font-family:'Courier New'; color:#6897bb;">300</span><span style=" font-family:'Courier New'; color:#a9b7c6;">)<br /><br />    </span><span style=" font-family:'Courier New'; font-weight:600; color:#cc7832;">def </span><span style=" font-family:'Courier New'; font-weight:600; color:#a9b7c6;">setVisible</span><span style=" font-family:'Courier New'; color:#a9b7c6;">(</span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#cc7832;">, </span><span style=" font-family:'Courier New'; color:#a9b7c6;">visible):<br />        </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.minimizeAction.setEnabled(visible)<br />        </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.maximizeAction.setEnabled(</span><span style=" font-family:'Courier New'; font-weight:600; color:#cc7832;">not </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.isMaximized())<br />        </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.restoreAction.setEnabled(</span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.isMaximized() </span><span style=" font-family:'Courier New'; font-weight:600; color:#cc7832;">or not </span><span style=" font-family:'Courier New'; color:#a9b7c6;">visible)<br />        </span><span style=" font-family:'Courier New'; color:#8888c6;">super</span><span style=" font-family:'Courier New'; color:#a9b7c6;">(Window</span><span style=" font-family:'Courier New'; color:#cc7832;">, </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">).setVisible(visible)<br /><br />    </span><span style=" font-family:'Courier New'; font-weight:600; color:#cc7832;">def </span><span style=" font-family:'Courier New'; font-weight:600; color:#a9b7c6;">closeEvent</span><span style=" font-family:'Courier New'; color:#a9b7c6;">(</span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#cc7832;">, </span><span style=" font-family:'Courier New'; color:#a9b7c6;">event):<br />        </span><span style=" font-family:'Courier New'; font-weight:600; color:#cc7832;">if </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.trayIcon.isVisible():<br />            QMessageBox.information(</span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#cc7832;">, </span><span style=" font-family:'Courier New'; color:#008080;">&quot;Systray&quot;</span><span style=" font-family:'Courier New'; color:#cc7832;">,<br />                    </span><span style=" font-family:'Courier New'; color:#008080;">&quot;The program will keep running in the system tray. To &quot;<br />                    &quot;terminate the program, choose &lt;b&gt;Quit&lt;/b&gt; in the &quot;<br />                    &quot;context menu of the system tray entry.&quot;</span><span style=" font-family:'Courier New'; color:#a9b7c6;">)<br />            </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.hide()<br />            event.ignore()<br /><br />    </span><span style=" font-family:'Courier New'; font-weight:600; color:#cc7832;">def </span><span style=" font-family:'Courier New'; font-weight:600; color:#a9b7c6;">setIcon</span><span style=" font-family:'Courier New'; color:#a9b7c6;">(</span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#cc7832;">, </span><span style=" font-family:'Courier New'; color:#a9b7c6;">index):<br />        icon = </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.iconComboBox.itemIcon(index)<br />        </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.trayIcon.setIcon(icon)<br />        </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.setWindowIcon(icon)<br /><br />        </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.trayIcon.setToolTip(</span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.iconComboBox.itemText(index))<br /><br />    </span><span style=" font-family:'Courier New'; font-weight:600; color:#cc7832;">def </span><span style=" font-family:'Courier New'; font-weight:600; color:#a9b7c6;">iconActivated</span><span style=" font-family:'Courier New'; color:#a9b7c6;">(</span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#cc7832;">, </span><span style=" font-family:'Courier New'; color:#a9b7c6;">reason):<br />        </span><span style=" font-family:'Courier New'; font-weight:600; color:#cc7832;">if </span><span style=" font-family:'Courier New'; color:#a9b7c6;">reason </span><span style=" font-family:'Courier New'; font-weight:600; color:#cc7832;">in </span><span style=" font-family:'Courier New'; color:#a9b7c6;">(QSystemTrayIcon.Trigger</span><span style=" font-family:'Courier New'; color:#cc7832;">, </span><span style=" font-family:'Courier New'; color:#a9b7c6;">QSystemTrayIcon.DoubleClick):<br />            </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.iconComboBox.setCurrentIndex(<br />                    (</span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.iconComboBox.currentIndex() + </span><span style=" font-family:'Courier New'; color:#6897bb;">1</span><span style=" font-family:'Courier New'; color:#a9b7c6;">)<br />                    % </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.iconComboBox.count())<br />        </span><span style=" font-family:'Courier New'; font-weight:600; color:#cc7832;">elif </span><span style=" font-family:'Courier New'; color:#a9b7c6;">reason == QSystemTrayIcon.MiddleClick:<br />            </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.showMessage()<br /><br />    </span><span style=" font-family:'Courier New'; font-weight:600; color:#cc7832;">def </span><span style=" font-family:'Courier New'; font-weight:600; color:#a9b7c6;">showMessage</span><span style=" font-family:'Courier New'; color:#a9b7c6;">(</span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">):<br />        icon = QSystemTrayIcon.MessageIcon(<br />                </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.typeComboBox.itemData(</span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.typeComboBox.currentIndex()))<br />        </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.trayIcon.showMessage(</span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.titleEdit.text()</span><span style=" font-family:'Courier New'; color:#cc7832;">,<br />                </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.bodyEdit.toPlainText()</span><span style=" font-family:'Courier New'; color:#cc7832;">, </span><span style=" font-family:'Courier New'; color:#a9b7c6;">icon</span><span style=" font-family:'Courier New'; color:#cc7832;">,<br />                </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.durationSpinBox.value() * </span><span style=" font-family:'Courier New'; color:#6897bb;">1000</span><span style=" font-family:'Courier New'; color:#a9b7c6;">)<br /><br />    </span><span style=" font-family:'Courier New'; font-weight:600; color:#cc7832;">def </span><span style=" font-family:'Courier New'; font-weight:600; color:#a9b7c6;">messageClicked</span><span style=" font-family:'Courier New'; color:#a9b7c6;">(</span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">):<br />        QMessageBox.information(</span><span style=" font-family:'Courier New'; font-weight:600; color:#cc7832;">None</span><span style=" font-family:'Courier New'; color:#cc7832;">, </span><span style=" font-family:'Courier New'; color:#008080;">&quot;Systray&quot;</span><span style=" font-family:'Courier New'; color:#cc7832;">,<br />                </span><span style=" font-family:'Courier New'; color:#008080;">&quot;Sorry, I already gave what help I could.</span><span style=" font-family:'Courier New'; color:#cc7832;">\n</span><span style=" font-family:'Courier New'; color:#008080;">Maybe you should &quot;<br />                &quot;try asking a human?&quot;</span><span style=" font-family:'Courier New'; color:#a9b7c6;">)<br /><br />    </span><span style=" font-family:'Courier New'; font-weight:600; color:#cc7832;">def </span><span style=" font-family:'Courier New'; font-weight:600; color:#a9b7c6;">createIconGroupBox</span><span style=" font-family:'Courier New'; color:#a9b7c6;">(</span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">):<br />        </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.iconGroupBox = QGroupBox(</span><span style=" font-family:'Courier New'; color:#008080;">&quot;Tray Icon&quot;</span><span style=" font-family:'Courier New'; color:#a9b7c6;">)<br /><br />        </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.iconLabel = QLabel(</span><span style=" font-family:'Courier New'; color:#008080;">&quot;Icon:&quot;</span><span style=" font-family:'Courier New'; color:#a9b7c6;">)<br /><br />        </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.iconComboBox = QComboBox()<br />        </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.iconComboBox.addItem(QIcon(</span><span style=" font-family:'Courier New'; color:#008080;">':/images/bad.png'</span><span style=" font-family:'Courier New'; color:#a9b7c6;">)</span><span style=" font-family:'Courier New'; color:#cc7832;">, </span><span style=" font-family:'Courier New'; color:#008080;">&quot;Bad&quot;</span><span style=" font-family:'Courier New'; color:#a9b7c6;">)<br />        </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.iconComboBox.addItem(QIcon(</span><span style=" font-family:'Courier New'; color:#008080;">':/images/heart.png'</span><span style=" font-family:'Courier New'; color:#a9b7c6;">)</span><span style=" font-family:'Courier New'; color:#cc7832;">, </span><span style=" font-family:'Courier New'; color:#008080;">&quot;Heart&quot;</span><span style=" font-family:'Courier New'; color:#a9b7c6;">)<br />        </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.iconComboBox.addItem(QIcon(</span><span style=" font-family:'Courier New'; color:#008080;">':/images/trash.png'</span><span style=" font-family:'Courier New'; color:#a9b7c6;">)</span><span style=" font-family:'Courier New'; color:#cc7832;">, </span><span style=" font-family:'Courier New'; color:#008080;">&quot;Trash&quot;</span><span style=" font-family:'Courier New'; color:#a9b7c6;">)<br /><br />        </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.showIconCheckBox = QCheckBox(</span><span style=" font-family:'Courier New'; color:#008080;">&quot;Show icon&quot;</span><span style=" font-family:'Courier New'; color:#a9b7c6;">)<br />        </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.showIconCheckBox.setChecked(</span><span style=" font-family:'Courier New'; font-weight:600; color:#cc7832;">True</span><span style=" font-family:'Courier New'; color:#a9b7c6;">)<br /><br />        iconLayout = QHBoxLayout()<br />        iconLayout.addWidget(</span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.iconLabel)<br />        iconLayout.addWidget(</span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.iconComboBox)<br />        iconLayout.addStretch()<br />        iconLayout.addWidget(</span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.showIconCheckBox)<br />        </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.iconGroupBox.setLayout(iconLayout)<br /><br />    </span><span style=" font-family:'Courier New'; font-weight:600; color:#cc7832;">def </span><span style=" font-family:'Courier New'; font-weight:600; color:#a9b7c6;">createMessageGroupBox</span><span style=" font-family:'Courier New'; color:#a9b7c6;">(</span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">):<br />        </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.messageGroupBox = QGroupBox(</span><span style=" font-family:'Courier New'; color:#008080;">&quot;Balloon Message&quot;</span><span style=" font-family:'Courier New'; color:#a9b7c6;">)<br /><br />        typeLabel = QLabel(</span><span style=" font-family:'Courier New'; color:#008080;">&quot;Type:&quot;</span><span style=" font-family:'Courier New'; color:#a9b7c6;">)<br /><br />        </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.typeComboBox = QComboBox()<br />        </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.typeComboBox.addItem(</span><span style=" font-family:'Courier New'; color:#008080;">&quot;None&quot;</span><span style=" font-family:'Courier New'; color:#cc7832;">, </span><span style=" font-family:'Courier New'; color:#a9b7c6;">QSystemTrayIcon.NoIcon)<br />        </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.typeComboBox.addItem(</span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.style().standardIcon(<br />                QStyle.SP_MessageBoxInformation)</span><span style=" font-family:'Courier New'; color:#cc7832;">, </span><span style=" font-family:'Courier New'; color:#008080;">&quot;Information&quot;</span><span style=" font-family:'Courier New'; color:#cc7832;">,<br />                </span><span style=" font-family:'Courier New'; color:#a9b7c6;">QSystemTrayIcon.Information)<br />        </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.typeComboBox.addItem(</span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.style().standardIcon(<br />                QStyle.SP_MessageBoxWarning)</span><span style=" font-family:'Courier New'; color:#cc7832;">, </span><span style=" font-family:'Courier New'; color:#008080;">&quot;Warning&quot;</span><span style=" font-family:'Courier New'; color:#cc7832;">,<br />                </span><span style=" font-family:'Courier New'; color:#a9b7c6;">QSystemTrayIcon.Warning)<br />        </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.typeComboBox.addItem(</span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.style().standardIcon(<br />                QStyle.SP_MessageBoxCritical)</span><span style=" font-family:'Courier New'; color:#cc7832;">, </span><span style=" font-family:'Courier New'; color:#008080;">&quot;Critical&quot;</span><span style=" font-family:'Courier New'; color:#cc7832;">,<br />                </span><span style=" font-family:'Courier New'; color:#a9b7c6;">QSystemTrayIcon.Critical)<br />        </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.typeComboBox.setCurrentIndex(</span><span style=" font-family:'Courier New'; color:#6897bb;">1</span><span style=" font-family:'Courier New'; color:#a9b7c6;">)<br /><br />        </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.durationLabel = QLabel(</span><span style=" font-family:'Courier New'; color:#008080;">&quot;Duration:&quot;</span><span style=" font-family:'Courier New'; color:#a9b7c6;">)<br /><br />        </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.durationSpinBox = QSpinBox()<br />        </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.durationSpinBox.setRange(</span><span style=" font-family:'Courier New'; color:#6897bb;">5</span><span style=" font-family:'Courier New'; color:#cc7832;">, </span><span style=" font-family:'Courier New'; color:#6897bb;">60</span><span style=" font-family:'Courier New'; color:#a9b7c6;">)<br />        </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.durationSpinBox.setSuffix(</span><span style=" font-family:'Courier New'; color:#008080;">&quot; s&quot;</span><span style=" font-family:'Courier New'; color:#a9b7c6;">)<br />        </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.durationSpinBox.setValue(</span><span style=" font-family:'Courier New'; color:#6897bb;">15</span><span style=" font-family:'Courier New'; color:#a9b7c6;">)<br /><br />        durationWarningLabel = QLabel(</span><span style=" font-family:'Courier New'; color:#008080;">&quot;(some systems might ignore this hint)&quot;</span><span style=" font-family:'Courier New'; color:#a9b7c6;">)<br />        durationWarningLabel.setIndent(</span><span style=" font-family:'Courier New'; color:#6897bb;">10</span><span style=" font-family:'Courier New'; color:#a9b7c6;">)<br /><br />        titleLabel = QLabel(</span><span style=" font-family:'Courier New'; color:#008080;">&quot;Title:&quot;</span><span style=" font-family:'Courier New'; color:#a9b7c6;">)<br /><br />        </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.titleEdit = QLineEdit(</span><span style=" font-family:'Courier New'; color:#008080;">&quot;Cannot connect to network&quot;</span><span style=" font-family:'Courier New'; color:#a9b7c6;">)<br /><br />        bodyLabel = QLabel(</span><span style=" font-family:'Courier New'; color:#008080;">&quot;Body:&quot;</span><span style=" font-family:'Courier New'; color:#a9b7c6;">)<br /><br />        </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.bodyEdit = QTextEdit()<br />        </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.bodyEdit.setPlainText(</span><span style=" font-family:'Courier New'; color:#008080;">&quot;Don't believe me. Honestly, I don't have &quot;<br />                &quot;a clue.</span><span style=" font-family:'Courier New'; color:#cc7832;">\n</span><span style=" font-family:'Courier New'; color:#008080;">Click this balloon for details.&quot;</span><span style=" font-family:'Courier New'; color:#a9b7c6;">)<br /><br />        </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.showMessageButton = QPushButton(</span><span style=" font-family:'Courier New'; color:#008080;">&quot;Show Message&quot;</span><span style=" font-family:'Courier New'; color:#a9b7c6;">)<br />        </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.showMessageButton.setDefault(</span><span style=" font-family:'Courier New'; font-weight:600; color:#cc7832;">True</span><span style=" font-family:'Courier New'; color:#a9b7c6;">)<br /><br />        messageLayout = QGridLayout()<br />        messageLayout.addWidget(typeLabel</span><span style=" font-family:'Courier New'; color:#cc7832;">, </span><span style=" font-family:'Courier New'; color:#6897bb;">0</span><span style=" font-family:'Courier New'; color:#cc7832;">, </span><span style=" font-family:'Courier New'; color:#6897bb;">0</span><span style=" font-family:'Courier New'; color:#a9b7c6;">)<br />        messageLayout.addWidget(</span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.typeComboBox</span><span style=" font-family:'Courier New'; color:#cc7832;">, </span><span style=" font-family:'Courier New'; color:#6897bb;">0</span><span style=" font-family:'Courier New'; color:#cc7832;">, </span><span style=" font-family:'Courier New'; color:#6897bb;">1</span><span style=" font-family:'Courier New'; color:#cc7832;">, </span><span style=" font-family:'Courier New'; color:#6897bb;">1</span><span style=" font-family:'Courier New'; color:#cc7832;">, </span><span style=" font-family:'Courier New'; color:#6897bb;">2</span><span style=" font-family:'Courier New'; color:#a9b7c6;">)<br />        messageLayout.addWidget(</span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.durationLabel</span><span style=" font-family:'Courier New'; color:#cc7832;">, </span><span style=" font-family:'Courier New'; color:#6897bb;">1</span><span style=" font-family:'Courier New'; color:#cc7832;">, </span><span style=" font-family:'Courier New'; color:#6897bb;">0</span><span style=" font-family:'Courier New'; color:#a9b7c6;">)<br />        messageLayout.addWidget(</span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.durationSpinBox</span><span style=" font-family:'Courier New'; color:#cc7832;">, </span><span style=" font-family:'Courier New'; color:#6897bb;">1</span><span style=" font-family:'Courier New'; color:#cc7832;">, </span><span style=" font-family:'Courier New'; color:#6897bb;">1</span><span style=" font-family:'Courier New'; color:#a9b7c6;">)<br />        messageLayout.addWidget(durationWarningLabel</span><span style=" font-family:'Courier New'; color:#cc7832;">, </span><span style=" font-family:'Courier New'; color:#6897bb;">1</span><span style=" font-family:'Courier New'; color:#cc7832;">, </span><span style=" font-family:'Courier New'; color:#6897bb;">2</span><span style=" font-family:'Courier New'; color:#cc7832;">, </span><span style=" font-family:'Courier New'; color:#6897bb;">1</span><span style=" font-family:'Courier New'; color:#cc7832;">, </span><span style=" font-family:'Courier New'; color:#6897bb;">3</span><span style=" font-family:'Courier New'; color:#a9b7c6;">)<br />        messageLayout.addWidget(titleLabel</span><span style=" font-family:'Courier New'; color:#cc7832;">, </span><span style=" font-family:'Courier New'; color:#6897bb;">2</span><span style=" font-family:'Courier New'; color:#cc7832;">, </span><span style=" font-family:'Courier New'; color:#6897bb;">0</span><span style=" font-family:'Courier New'; color:#a9b7c6;">)<br />        messageLayout.addWidget(</span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.titleEdit</span><span style=" font-family:'Courier New'; color:#cc7832;">, </span><span style=" font-family:'Courier New'; color:#6897bb;">2</span><span style=" font-family:'Courier New'; color:#cc7832;">, </span><span style=" font-family:'Courier New'; color:#6897bb;">1</span><span style=" font-family:'Courier New'; color:#cc7832;">, </span><span style=" font-family:'Courier New'; color:#6897bb;">1</span><span style=" font-family:'Courier New'; color:#cc7832;">, </span><span style=" font-family:'Courier New'; color:#6897bb;">4</span><span style=" font-family:'Courier New'; color:#a9b7c6;">)<br />        messageLayout.addWidget(bodyLabel</span><span style=" font-family:'Courier New'; color:#cc7832;">, </span><span style=" font-family:'Courier New'; color:#6897bb;">3</span><span style=" font-family:'Courier New'; color:#cc7832;">, </span><span style=" font-family:'Courier New'; color:#6897bb;">0</span><span style=" font-family:'Courier New'; color:#a9b7c6;">)<br />        messageLayout.addWidget(</span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.bodyEdit</span><span style=" font-family:'Courier New'; color:#cc7832;">, </span><span style=" font-family:'Courier New'; color:#6897bb;">3</span><span style=" font-family:'Courier New'; color:#cc7832;">, </span><span style=" font-family:'Courier New'; color:#6897bb;">1</span><span style=" font-family:'Courier New'; color:#cc7832;">, </span><span style=" font-family:'Courier New'; color:#6897bb;">2</span><span style=" font-family:'Courier New'; color:#cc7832;">, </span><span style=" font-family:'Courier New'; color:#6897bb;">4</span><span style=" font-family:'Courier New'; color:#a9b7c6;">)<br />        messageLayout.addWidget(</span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.showMessageButton</span><span style=" font-family:'Courier New'; color:#cc7832;">, </span><span style=" font-family:'Courier New'; color:#6897bb;">5</span><span style=" font-family:'Courier New'; color:#cc7832;">, </span><span style=" font-family:'Courier New'; color:#6897bb;">4</span><span style=" font-family:'Courier New'; color:#a9b7c6;">)<br />        messageLayout.setColumnStretch(</span><span style=" font-family:'Courier New'; color:#6897bb;">3</span><span style=" font-family:'Courier New'; color:#cc7832;">, </span><span style=" font-family:'Courier New'; color:#6897bb;">1</span><span style=" font-family:'Courier New'; color:#a9b7c6;">)<br />        messageLayout.setRowStretch(</span><span style=" font-family:'Courier New'; color:#6897bb;">4</span><span style=" font-family:'Courier New'; color:#cc7832;">, </span><span style=" font-family:'Courier New'; color:#6897bb;">1</span><span style=" font-family:'Courier New'; color:#a9b7c6;">)<br />        </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.messageGroupBox.setLayout(messageLayout)<br /><br />    </span><span style=" font-family:'Courier New'; font-weight:600; color:#cc7832;">def </span><span style=" font-family:'Courier New'; font-weight:600; color:#a9b7c6;">createActions</span><span style=" font-family:'Courier New'; color:#a9b7c6;">(</span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">):<br />        </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.minimizeAction = QAction(</span><span style=" font-family:'Courier New'; color:#008080;">&quot;Mi&amp;nimize&quot;</span><span style=" font-family:'Courier New'; color:#cc7832;">, </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#cc7832;">, </span><span style=" font-family:'Courier New'; color:#aa4926;">triggered</span><span style=" font-family:'Courier New'; color:#a9b7c6;">=</span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.hide)<br />        </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.maximizeAction = QAction(</span><span style=" font-family:'Courier New'; color:#008080;">&quot;Ma&amp;ximize&quot;</span><span style=" font-family:'Courier New'; color:#cc7832;">, </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#cc7832;">,<br />                </span><span style=" font-family:'Courier New'; color:#aa4926;">triggered</span><span style=" font-family:'Courier New'; color:#a9b7c6;">=</span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.showMaximized)<br />        </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.restoreAction = QAction(</span><span style=" font-family:'Courier New'; color:#008080;">&quot;&amp;Restore&quot;</span><span style=" font-family:'Courier New'; color:#cc7832;">, </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#cc7832;">,<br />                </span><span style=" font-family:'Courier New'; color:#aa4926;">triggered</span><span style=" font-family:'Courier New'; color:#a9b7c6;">=</span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.showNormal)<br />        </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.quitAction = QAction(</span><span style=" font-family:'Courier New'; color:#008080;">&quot;&amp;Quit&quot;</span><span style=" font-family:'Courier New'; color:#cc7832;">, </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#cc7832;">,<br />                </span><span style=" font-family:'Courier New'; color:#aa4926;">triggered</span><span style=" font-family:'Courier New'; color:#a9b7c6;">=QApplication.instance().quit)<br /><br />    </span><span style=" font-family:'Courier New'; font-weight:600; color:#cc7832;">def </span><span style=" font-family:'Courier New'; font-weight:600; color:#a9b7c6;">createTrayIcon</span><span style=" font-family:'Courier New'; color:#a9b7c6;">(</span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">):<br />         </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.trayIconMenu = QMenu(</span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">)<br />         </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.trayIconMenu.addAction(</span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.minimizeAction)<br />         </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.trayIconMenu.addAction(</span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.maximizeAction)<br />         </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.trayIconMenu.addAction(</span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.restoreAction)<br />         </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.trayIconMenu.addSeparator()<br />         </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.trayIconMenu.addAction(</span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.quitAction)<br /><br />         </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.trayIcon = QSystemTrayIcon(</span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">)<br />         </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.trayIcon.setContextMenu(</span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.trayIconMenu)<br /><br /><br /></span><span style=" font-family:'Courier New'; font-weight:600; color:#cc7832;">if </span><span style=" font-family:'Courier New'; color:#a9b7c6;">__name__ == </span><span style=" font-family:'Courier New'; color:#008080;">'__main__'</span><span style=" font-family:'Courier New'; color:#a9b7c6;">:<br /><br />    </span><span style=" font-family:'Courier New'; font-weight:600; color:#cc7832;">import </span><span style=" font-family:'Courier New'; color:#a9b7c6;">sys<br /><br />    app = QApplication(sys.argv)<br /><br />    </span><span style=" font-family:'Courier New'; font-weight:600; color:#cc7832;">if not </span><span style=" font-family:'Courier New'; color:#a9b7c6;">QSystemTrayIcon.isSystemTrayAvailable():                     </span><span style=" font-family:'Courier New'; color:#808080;"># наличие системного трея<br />        </span><span style=" font-family:'Courier New'; color:#a9b7c6;">QMessageBox.critical(</span><span style=" font-family:'Courier New'; font-weight:600; color:#cc7832;">None</span><span style=" font-family:'Courier New'; color:#cc7832;">, </span><span style=" font-family:'Courier New'; color:#008080;">&quot;Systray&quot;</span><span style=" font-family:'Courier New'; color:#cc7832;">,<br />                </span><span style=" font-family:'Courier New'; color:#008080;">&quot;I couldn't detect any system tray on this system.&quot;</span><span style=" font-family:'Courier New'; color:#a9b7c6;">)<br />        sys.exit(</span><span style=" font-family:'Courier New'; color:#6897bb;">1</span><span style=" font-family:'Courier New'; color:#a9b7c6;">)<br /><br />    QApplication.setQuitOnLastWindowClosed(</span><span style=" font-family:'Courier New'; font-weight:600; color:#cc7832;">False</span><span style=" font-family:'Courier New'; color:#a9b7c6;">)<br /><br />    window = Window()<br />    window.show()<br />    sys.exit(app.exec_())<br /></span></pre></body></html>