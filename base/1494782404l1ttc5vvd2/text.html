<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'DejaVu Sans'; font-size:11pt; font-weight:400; font-style:normal;">
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Arial'; font-size:12px; color:#000066;">Экземпляр Oracle состоит из процессов и разделяемой памяти, необходимой для доступа к информации в БД. Если копнуть чуть глубже, то экземпляр составляют пользовательские процессы, фоновые процессы Oracle и разделяемая область памяти, которую используют все эти процессы.<br /><br />Что же представляет собой разделяемая память (shared memory)? Oracle использует разделяемую память в разных целях: как кэширование данных и индексов, так и хранение программного кода. Разделяемая память делится на несколько частей (или структур памяти). Основными структурами памяти Oracle являются Системная Глобальная Область (System Global Area или SGA) и Программная Глобальная Область (Program Global Area или PGA). Рассмотрим SGA и PGA более подробно.</span></p>
<p style=" margin-top:5px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#e0e0e0;"><span style=" font-family:'Arial'; font-size:large; font-weight:600; color:#660000;">Системная Глобальная Область (SGA)</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Arial'; font-size:12px; color:#000066;">SGA - это область разделяемой памяти, которую Oracle использует для хранения данных и управляющей информации одного конкретного экземпляра Oracle. SGA размещается в памяти при запуске экземпляра Oracle и освобождает память при останове. Каждый запущенный экземпляр Oracle имеет свою собственную SGA. Информация в SGA состоит из следующих компонентов (каждый из которых создается в памяти при запуске экземпляра):</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Arial'; font-size:12px; color:#000066;">- </span><span style=" font-family:'Arial'; font-size:12px; font-weight:600; color:#000066;">кэш буферов БД</span><span style=" font-family:'Arial'; font-size:12px; color:#000066;"> - здесь хранятся последние открытые блоки данных. Эти блоки могут содержать данные, которые изменились, но еще не были записаны на диск (грязные блоки); данные, которые не изменялись либо были записаны на диск после изменения (чистые блоки). Так как кэш буферов БД хранит блоки данных на основе алгоритма последних используемых блоков, то наиболее активно используемые блоки постоянно остаются в памяти (тем самым, снижая дисковый ввод/вывод и увеличивая производительность системы).</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Arial'; font-size:12px; color:#000066;">- </span><span style=" font-family:'Arial'; font-size:12px; font-weight:600; color:#000066;">буфер журнала изменений</span><span style=" font-family:'Arial'; font-size:12px; color:#000066;"> - хранит данные об изменениях БД. Буфер журнала изменений записывается в файл журнала изменений настолько быстро и эффективно, насколько это возможно. Помните, что журнал изменений используется для восстановления экземпляра СУБД Oracle в случае<br />сбоя системы.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Arial'; font-size:12px; color:#000066;">- </span><span style=" font-family:'Arial'; font-size:12px; font-weight:600; color:#000066;">разделяемый пул (shared pool) </span><span style=" font-family:'Arial'; font-size:12px; color:#000066;">- Это область SGA, в которой хранятся такие структуры разделяемой памяти, как разделяемые SQL-области в библиотечном кэше и внутренняя информация словаря данных. Разделяемый пул важен, потому что недостаточный объем памяти, выделенный для него, может привести к деградации производительности всей системы. Разделяемый пул состоит из библиотечного кэша и кэша словаря данных.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Arial'; font-size:12px; font-weight:600; color:#000066;">Библиотечный кэш</span><span style=" font-family:'Arial'; font-size:12px; color:#000066;"> используется для хранения разделяемых SQL. Здесь для каждого уникального SQL-выражения строиться дерево разбора строк и план исполнения, которые кэшируются (т.е. сохраняются в библиотечном кэше). Если несколько приложений отправляют одинаковые SQL-выражения, то для ускорения работы используется разделяемая SQL-область (так как используются уже разобранные строки и готовый план исполнения, то происходит экономия времени).</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Arial'; font-size:12px; font-weight:600; color:#000066;">Кэш словаря данных</span><span style=" font-family:'Arial'; font-size:12px; color:#000066;"> содержит набор таблиц и представлений, используемых в качестве ссылок к БД Oracle. Здесь храниться информация о логической и физической структуре БД. Словарь данных содержит следующую информацию:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Arial'; font-size:12px; color:#000066;">- </span><span style=" font-family:'Arial'; font-size:12px; font-weight:600; color:#000066;">пользовательская информация</span><span style=" font-family:'Arial'; font-size:12px; color:#000066;"> (например, пользовательские привилегии) - ограничения целостности, определенные для таблиц БД - имена и типы данных всех столбцов таблиц БД.<br /><br />- </span><span style=" font-family:'Arial'; font-size:12px; font-weight:600; color:#000066;">информация об объеме памяти</span><span style=" font-family:'Arial'; font-size:12px; color:#000066;">, определенном и используемом объектами схемы данных.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Arial'; font-size:12px; color:#000066;">Oracle часто обращается к словарю данных при разборе SQL-выражений. Эти обращения составляют сущность работы Oracle. Узкие места в словаре данных влияют работу всех пользователей системы Oracle. Поэтому Вы всегда должны быть уверены, что объем памяти, определенный для словаря данных, достаточно велик для кэширования данных. Если кэш словаря данных мал, то Вы заметите значительное снижение производительности. Когда под кэш словаря данных Вы определите достаточный объем памяти, существенных проблем с производительностью<br />быть не должно.</span></p>
<p style=" margin-top:5px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#e0e0e0;"><span style=" font-family:'Arial'; font-size:large; font-weight:600; color:#660000;">Программная Глобальная Область (PGA)</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Arial'; font-size:12px; color:#000066;">Программная Глобальная Область - это такая область памяти, в которой хранятся данные и управляющая информация о серверных процессах Oracle. Размер и содержание PGA определяется опциями, которые Вы указываете при инсталляции Oracle. Эта область состоит из следующих компонентов:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Arial'; font-size:12px; color:#000066;">- </span><span style=" font-family:'Arial'; font-size:12px; font-weight:600; color:#000066;">пространство стека</span><span style=" font-family:'Arial'; font-size:12px; color:#000066;"> - это память, хранящая переменные сеансов, массивы сеансов и т.д.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Arial'; font-size:12px; color:#000066;">- </span><span style=" font-family:'Arial'; font-size:12px; font-weight:600; color:#000066;">информация сеанса</span><span style=" font-family:'Arial'; font-size:12px; color:#000066;"> - если Oracle работает не в мультинитевом режиме, то информация сеанса хранится в PGA. В противном случае, информация сеанса хранится в SGA.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Arial'; font-size:12px; color:#000066;">- </span><span style=" font-family:'Arial'; font-size:12px; font-weight:600; color:#000066;">приватная SQL-область</span><span style=" font-family:'Arial'; font-size:12px; color:#000066;"> - это часть PGA, где хранятся связанные переменные и буферы реального времени.</span></p>
<p style=" margin-top:16px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Arial'; font-size:x-large; font-weight:600; color:#000099;">Процессы</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Arial'; font-size:12px; font-weight:600; color:#000066;">Процесс (или нить)</span><span style=" font-family:'Arial'; font-size:12px; color:#000066;"> - это механизм выполнения программного кода, который может выполняться незаметно для пользователя. Кроме того, несколько процессов могут работать одновременно. В разных операционных системах и на разных платформах они могут называться по-разному (процессы, нити, демоны и т.д.), но, в сущности, одинаковы. СУРБД Oracle работает с двумя видами<br />процессов: пользовательские процессы и процессы Oracle (также известные как фоновые или теневые). В некоторых операционных системах (таких как Windows NT) процессы действительно являются нитями, но, чтобы не путаться в понятиях, будем называть их просто &quot;процессами&quot;.</span></p>
<p style=" margin-top:5px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#e0e0e0;"><span style=" font-family:'Arial'; font-size:large; font-weight:600; color:#660000;">Пользовательские процессы</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Arial'; font-size:12px; font-weight:600; color:#000066;">Пользовательские (клиентские) процессы</span><span style=" font-family:'Arial'; font-size:12px; color:#000066;"> - это пользовательские соединения с СУРБД. Пользовательский процесс управляет вводом и взаимодействует с серверными процессами Oracle через программный интерфейс Oracle. Пользовательский процесс используется также для выдачи информации пользователю, и, при необходимости, представляет ее в более удобной форме.</span></p>
<p style=" margin-top:5px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#e0e0e0;"><span style=" font-family:'Arial'; font-size:large; font-weight:600; color:#660000;">Процессы Oracle</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Arial'; font-size:12px; font-weight:600; color:#000066;">Процессы Oracle</span><span style=" font-family:'Arial'; font-size:12px; color:#000066;"> выполняют функции для пользовательских процессов. Могут быть разбиты на две группы: серверные процессы (выполняющие функции для активных процессов) и фоновые процессы (выполняют функции СУРБД в целом).</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Arial'; font-size:12px; color:#000066;">Серверные процессы (теневые) взаимодействуют между процессами пользовательскими и Oracle, исполняя пользовательские запросы. Например, если пользовательский процесс запрашивает часть данных, которых еще нет в SGA, то теневой процесс несет ответственность за чтение блоков данных из БД в SGA.<br /><br />Между пользовательским и теневым процессом возникает связь один-к-одному (конфигурация выделенного сервера), хотя один теневой процесс может одновременно взаимодействовать с несколькими пользовательскими (конфигурация мультинитевого сервера), экономя системные ресурсы.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Arial'; font-size:12px; color:#000066;">Фоновые процессы используются для выполнения разнообразных задач СУРБД Oracle. Эти задачи варьируются от взаимодействия с экземпляром Oracle до записи грязных блоков на диск. Далее представлены девять фоновых процессов Oracle:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Arial'; font-size:12px; color:#000066;">- </span><span style=" font-family:'Arial'; font-size:12px; font-weight:600; color:#000066;">DBWR (DataBase WRiter)</span><span style=" font-family:'Arial'; font-size:12px; color:#000066;"> - ответственен за запись грязных блоков из блоковых буферов БД на диск. Когда транзакция изменяет информацию в блоке данных, этот блок данных не обязан быть немедленно записан на диск. Следовательно, DBWR может записывать данные на диск способом более эффективным, чем запись всех изменений по отдельности. DBWR обычно записывает данные тогда, когда необходимо освободить часть буферов для новой порции данных. Записываются также те данные, которые были недавно использованы. Для систем с асинхронным вводом/выводом достаточно одного процесса DBWR. Для остальных систем можно значительно увеличить производительность, создав несколько процессов DBWR.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Arial'; font-size:12px; color:#000066;">- </span><span style=" font-family:'Arial'; font-size:12px; font-weight:600; color:#000066;">LGWR (LoG WRiter)</span><span style=" font-family:'Arial'; font-size:12px; color:#000066;"> - записывает данные из журнального буфера в журнал изменений.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Arial'; font-size:12px; color:#000066;">- </span><span style=" font-family:'Arial'; font-size:12px; font-weight:600; color:#000066;">CKPT (ChecK PoinT)</span><span style=" font-family:'Arial'; font-size:12px; color:#000066;"> - дает сигнал процессам DBWR о необходимости выполнения контрольной точки и обновления всех файлов данных и управляющих файлов. Контрольная точка - это событие, когда все измененные буферы БД записываются на диск. CKPT - это не обязательный процесс. Если процесс CKPT не запущен, то его работу принимает на себя LGWR.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Arial'; font-size:12px; color:#000066;">- </span><span style=" font-family:'Arial'; font-size:12px; font-weight:600; color:#000066;">PMON (Process MONitor)</span><span style=" font-family:'Arial'; font-size:12px; color:#000066;"> - используется для поддержания остальных процессов и перезапуска преждевременно погибших :) Также PMON очищает неиспользуемые области буферов и освобождает те ресурсы, которые могут быть еще заняты. Ответственен за перезапуск всех зависших процессов<br />и диспетчеров.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Arial'; font-size:12px; color:#000066;">- </span><span style=" font-family:'Arial'; font-size:12px; font-weight:600; color:#000066;">SMON (System MONitor)</span><span style=" font-family:'Arial'; font-size:12px; color:#000066;"> - выполняет восстановление экземпляра при его запуске. Это включает очистку временных сегментов и восстановление незаконченных транзакций. А также дефрагментирует БД.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Arial'; font-size:12px; color:#000066;">- </span><span style=" font-family:'Arial'; font-size:12px; font-weight:600; color:#000066;">RECO (RECOvery)</span><span style=" font-family:'Arial'; font-size:12px; color:#000066;"> - очищает незаконченные транзакции в распределенной БД. Выполняет фиксацию или откат спорных транзакций.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Arial'; font-size:12px; color:#000066;">- </span><span style=" font-family:'Arial'; font-size:12px; font-weight:600; color:#000066;">ARCH (ARCHiver)</span><span style=" font-family:'Arial'; font-size:12px; color:#000066;"> - копирует файлы журнала изменений при их заполнении. ARCH активен только в том случае, если СУРБД работает в режиме ARCHIVELOG. Если система не работает в этом режиме, то возможны ситуации, в которых не удастся восстановить систему после сбоя. В некоторых<br />случаях все же можно работать и в режиме NOARCHIVELOG.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Arial'; font-size:12px; color:#000066;">- </span><span style=" font-family:'Arial'; font-size:12px; font-weight:600; color:#000066;">LCKn (Parallel Server LoCK)</span><span style=" font-family:'Arial'; font-size:12px; color:#000066;"> - до десяти процессов (где n - от 0 до 9) могут использоваться при работе сервера в параллельном режиме. Выполняют функции межэкземплярной блокировки.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Arial'; font-size:12px; color:#000066;">- </span><span style=" font-family:'Arial'; font-size:12px; font-weight:600; color:#000066;">Dnnn (Dispatcher)</span><span style=" font-family:'Arial'; font-size:12px; color:#000066;"> - при работе сервера в мультинитевом режиме, существует хотя бы один диспетчерский процесс, ответственный за каждый протокол взаимосвязи. Диспетчерские процессы организуют взаимодействие между пользовательскими и разделяемыми серверными процессами.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Arial'; font-size:12px; color:#000066;">На этом четвертый выпуск закончен. До новых встреч!</span></p></body></html>