<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'DejaVu Sans'; font-size:11pt; font-weight:400; font-style:normal;">
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'MS Shell Dlg 2'; font-size:8.25pt;"><br /></p>
<p style=" margin-top:0px; margin-bottom:13px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Exo 2,sans-serif'; font-size:8.25pt; font-weight:696; color:#222222; background-color:#ffffff;">Вступление</span></p>
<p style=" margin-top:0px; margin-bottom:30px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Open Sans,Helvetica,sans-serif'; font-size:8.25pt; color:#444444; background-color:#ffffff;">Rsync расшифровывается как «remote sync» (удаленная синхронизация) и является инструментом удаленной синхронизации локального и удаленного файлов. Он использует алгоритм, который минимизирует объем копируемых данных при помощи перемещения только тех частей файлов, которые были изменены.</span></p>
<p style=" margin-top:0px; margin-bottom:30px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Open Sans,Helvetica,sans-serif'; font-size:8.25pt; color:#444444; background-color:#ffffff;">Данное руководство описывает основное использование этой мощной утилиты. В примерах был использован сервер Ubuntu 12.04, но можно использовать любой современный дистрибутив Linux.</span></p>
<p style=" margin-top:0px; margin-bottom:13px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Exo 2,sans-serif'; font-size:8.25pt; font-weight:696; color:#222222; background-color:#ffffff;">Что такое Rsync?</span></p>
<p style=" margin-top:0px; margin-bottom:30px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Open Sans,Helvetica,sans-serif'; font-size:8.25pt; color:#444444; background-color:#ffffff;">Rsync является очень гибким инструментом синхронизации, рассчитанным на работу в сетевой среде. Сетевой протокол, разработанный для использования данного инструмента, также называется Rsync.</span></p>
<p style=" margin-top:0px; margin-bottom:30px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Open Sans,Helvetica,sans-serif'; font-size:8.25pt; color:#444444; background-color:#ffffff;">Данное руководство в основном ссылается на rsync как на утилиту, а не на протокол.</span></p>
<p style=" margin-top:0px; margin-bottom:30px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Open Sans,Helvetica,sans-serif'; font-size:8.25pt; color:#444444; background-color:#ffffff;">Благодаря вездесущности данной утилиты на Linux и Unix-подобных системах и ее популярности как инструмента для сценариев системы, она включена в большинство дистрибутивов Linux по умолчанию.</span></p>
<p style=" margin-top:0px; margin-bottom:13px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Exo 2,sans-serif'; font-size:8.25pt; font-weight:696; color:#222222; background-color:#ffffff;">Основной синтаксис</span></p>
<p style=" margin-top:0px; margin-bottom:30px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Open Sans,Helvetica,sans-serif'; font-size:8.25pt; color:#444444; background-color:#ffffff;">Основной синтаксис Rsync очень прост, его функционирование похоже на SSH, SCP и СР.</span></p>
<p style=" margin-top:0px; margin-bottom:30px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Open Sans,Helvetica,sans-serif'; font-size:8.25pt; color:#444444; background-color:#ffffff;">Чтобы создать два пробных каталога и несколько пробных файлов, используйте следующую команду:</span></p>
<p style=" margin-top:0px; margin-bottom:30px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Courier New,monospace'; font-size:8.25pt; color:#444444; background-color:rgba(144,144,144,0.07451);">cd ~<br />mkdir dir1<br />mkdir dir2<br />touch dir1/file{1..100}</span></p>
<p style=" margin-top:0px; margin-bottom:30px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Open Sans,Helvetica,sans-serif'; font-size:8.25pt; color:#444444; background-color:#ffffff;">Это создаст на сервере каталог под названием dir1, содержащий 100 пустых файлов.</span></p>
<p style=" margin-top:0px; margin-bottom:30px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Courier New,monospace'; font-size:8.25pt; color:#444444; background-color:rgba(144,144,144,0.07451);">ls dir1<br />file1    file18  file27  file36  file45  file54  file63  file72  file81  file90<br />file10   file19  file28  file37  file46  file55  file64  file73  file82  file91<br />file100  file2   file29  file38  file47  file56  file65  file74  file83  file92<br />file11   file20  file3   file39  file48  file57  file66  file75  file84  file93<br />file12   file21  file30  file4   file49  file58  file67  file76  file85  file94<br />file13   file22  file31  file40  file5   file59  file68  file77  file86  file95<br />file14   file23  file32  file41  file50  file6   file69  file78  file87  file96<br />file15   file24  file33  file42  file51  file60  file7   file79  file88  file97<br />file16   file25  file34  file43  file52  file61  file70  file8   file89  file98<br />file17   file26  file35  file44  file53  file62  file71  file80  file9   file99</span></p>
<p style=" margin-top:0px; margin-bottom:30px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Open Sans,Helvetica,sans-serif'; font-size:8.25pt; color:#444444; background-color:#ffffff;">Также был создан пустой каталог dir2.</span></p>
<p style=" margin-top:0px; margin-bottom:30px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Open Sans,Helvetica,sans-serif'; font-size:8.25pt; color:#444444; background-color:#ffffff;">Чтобы синхронизировать содержимое каталогов dir1 to dir2 на одной системе, введите:</span></p>
<p style=" margin-top:0px; margin-bottom:30px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Courier New,monospace'; font-size:8.25pt; color:#444444; background-color:rgba(144,144,144,0.07451);">rsync -r dir1/ dir2</span></p>
<p style=" margin-top:0px; margin-bottom:30px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Open Sans,Helvetica,sans-serif'; font-size:8.25pt; color:#444444; background-color:#ffffff;">Флаг «-r» значит «рекурсивный», что необходимо для синхронизации каталогов.</span></p>
<p style=" margin-top:0px; margin-bottom:30px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Open Sans,Helvetica,sans-serif'; font-size:8.25pt; color:#444444; background-color:#ffffff;">Вместо него можно использовать флаг «-а»:</span></p>
<p style=" margin-top:0px; margin-bottom:30px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Courier New,monospace'; font-size:8.25pt; color:#444444; background-color:rgba(144,144,144,0.07451);">rsync -a dir1/ dir2</span></p>
<p style=" margin-top:0px; margin-bottom:30px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Open Sans,Helvetica,sans-serif'; font-size:8.25pt; color:#444444; background-color:#ffffff;">«-a» является комбинированным флагом.</span></p>
<p style=" margin-top:0px; margin-bottom:30px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Open Sans,Helvetica,sans-serif'; font-size:8.25pt; color:#444444; background-color:#ffffff;">Он означает «архив» и синхронизирует рекурсивно, сохраняя символьные ссылки, специальные файлы и файлы устройств, время изменения, группу, владельца и разрешения.</span></p>
<p style=" margin-top:0px; margin-bottom:30px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Open Sans,Helvetica,sans-serif'; font-size:8.25pt; color:#444444; background-color:#ffffff;">Он удобнее и потому используется чаще, чем «-r».</span></p>
<p style=" margin-top:0px; margin-bottom:13px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Exo 2,sans-serif'; font-size:8.25pt; font-weight:696; color:#222222; background-color:#ffffff;">Важное примечание</span></p>
<p style=" margin-top:0px; margin-bottom:30px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Open Sans,Helvetica,sans-serif'; font-size:8.25pt; color:#444444; background-color:#ffffff;">В конце первого аргумента вышеприведенных команд используется  конечная косая, или слеш (/):</span></p>
<p style=" margin-top:0px; margin-bottom:30px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Courier New,monospace'; font-size:8.25pt; color:#444444; background-color:rgba(144,144,144,0.07451);">rsync -a dir1/ dir2</span></p>
<p style=" margin-top:0px; margin-bottom:30px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Open Sans,Helvetica,sans-serif'; font-size:8.25pt; color:#444444; background-color:#ffffff;">Слеш необходим для обозначения «содержимого dir1».</span></p>
<p style=" margin-top:0px; margin-bottom:30px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Open Sans,Helvetica,sans-serif'; font-size:8.25pt; color:#444444; background-color:#ffffff;">Альтернативный вариант без использования конечной косой, поместит dir1, включая каталог, в dir2. Это создало бы иерархию, которая выглядит так:</span></p>
<p style=" margin-top:0px; margin-bottom:30px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Open Sans,Helvetica,sans-serif'; font-size:8.25pt; color:#444444; background-color:#ffffff;">~/dir2/dir1/[files]</span></p>
<p style=" margin-top:0px; margin-bottom:30px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Open Sans,Helvetica,sans-serif'; font-size:8.25pt; color:#444444; background-color:#ffffff;">Всегда проверяйте аргументы дважды перед выполнением команды Rsync.</span></p>
<p style=" margin-top:0px; margin-bottom:30px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Open Sans,Helvetica,sans-serif'; font-size:8.25pt; color:#444444; background-color:#ffffff;">Rsync позволяет это сделать при помощи команд -n или —dry-run. Флаг -v (что значит «подробно») также необходим для получения адекватного результата:</span></p>
<p style=" margin-top:0px; margin-bottom:30px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Courier New,monospace'; font-size:8.25pt; color:#444444; background-color:rgba(144,144,144,0.07451);">rsync -anv dir1/ dir2<br />sending incremental file list<br />./<br />file1<br />file10<br />file100<br />file11<br />file12<br />file13<br />file14<br />file15<br />file16<br />file17<br />file18<br />. . .</span></p>
<p style=" margin-top:0px; margin-bottom:30px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Open Sans,Helvetica,sans-serif'; font-size:8.25pt; color:#444444; background-color:#ffffff;">Сравните данный результат с результатом, выведенным при снятии слеша:</span></p>
<p style=" margin-top:0px; margin-bottom:30px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Courier New,monospace'; font-size:8.25pt; color:#444444; background-color:rgba(144,144,144,0.07451);">rsync -anv dir1 dir2<br />sending incremental file list<br />dir1/<br />dir1/file1<br />dir1/file10<br />dir1/file100<br />dir1/file11<br />dir1/file12<br />dir1/file13<br />dir1/file14<br />dir1/file15<br />dir1/file16<br />dir1/file17<br />dir1/file18<br />. . .</span></p>
<p style=" margin-top:0px; margin-bottom:30px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Open Sans,Helvetica,sans-serif'; font-size:8.25pt; color:#444444; background-color:#ffffff;">Здесь можно увидеть, что сам каталог был перенесен.</span></p>
<p style=" margin-top:0px; margin-bottom:13px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Exo 2,sans-serif'; font-size:8.25pt; font-weight:696; color:#222222; background-color:#ffffff;">Использование Rsync для синхронизации с удаленной системой</span></p>
<p style=" margin-top:0px; margin-bottom:30px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Open Sans,Helvetica,sans-serif'; font-size:8.25pt; color:#444444; background-color:#ffffff;">Синхронизация с удаленной системой проста, если есть SSH-доступ к удаленному компьютеру и на обеих системах установлена Rsync. Если вам нужно настроить ключи SSH, нажмите здесь.</span></p>
<p style=" margin-top:0px; margin-bottom:30px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Open Sans,Helvetica,sans-serif'; font-size:8.25pt; color:#444444; background-color:#ffffff;">Установив и проверив доступ SSH между двумя машинами, можно синхронизировать папку dir1 с удаленным компьютером при помощи следующего синтаксиса (обратите внимание, что в данном случае нужно передать непосредственно саму папку, поэтому косую черту следует опустить):</span></p>
<p style=" margin-top:0px; margin-bottom:30px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Courier New,monospace'; font-size:8.25pt; color:#444444; background-color:rgba(144,144,144,0.07451);">rsync -a ~/dir1 username@remote_host:destination_directory</span></p>
<p style=" margin-top:0px; margin-bottom:30px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Open Sans,Helvetica,sans-serif'; font-size:8.25pt; color:#444444; background-color:#ffffff;">Данная процедура называется «push», так как она «толкает» каталог из локальной системы на удаленную.</span></p>
<p style=" margin-top:0px; margin-bottom:30px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Open Sans,Helvetica,sans-serif'; font-size:8.25pt; color:#444444; background-color:#ffffff;">Противоположная ей операция зовется «извлечением» («pull»). Она используется для синхронизации удаленного каталога с локальной системой. Если бы dir1 находился не на локальной, а на удаленной системе, синтаксис выглядел бы так:</span></p>
<p style=" margin-top:0px; margin-bottom:30px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Open Sans,Helvetica,sans-serif'; font-size:8.25pt; color:#444444; background-color:#ffffff;">rsync -a username@remote_host:/home/username/dir1 place_to_sync_on_local_machine</span></p>
<p style=" margin-top:0px; margin-bottom:30px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Open Sans,Helvetica,sans-serif'; font-size:8.25pt; color:#444444; background-color:#ffffff;">Как в «ср» и подобных инструментах, первый аргумент всегда указывает на  источник, а второй – на назначение.</span></p>
<p style=" margin-top:0px; margin-bottom:13px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Exo 2,sans-serif'; font-size:8.25pt; font-weight:696; color:#222222; background-color:#ffffff;">Полезные опции Rsync</span></p>
<p style=" margin-top:0px; margin-bottom:30px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Open Sans,Helvetica,sans-serif'; font-size:8.25pt; color:#444444; background-color:#ffffff;">Rsync предоставляет множество команд для изменения стандартного поведения утилиты. Некоторые из наиболее необходимых флагов уже рассматривались.</span></p>
<p style=" margin-top:0px; margin-bottom:30px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Open Sans,Helvetica,sans-serif'; font-size:8.25pt; color:#444444; background-color:#ffffff;">При передаче еще не сжатых файлов, таких как текстовые файлы, можно уменьшить сетевой трафик, сжимая файлы при помощи  параметра -z:</span></p>
<p style=" margin-top:0px; margin-bottom:30px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Courier New,monospace'; font-size:8.25pt; color:#444444; background-color:rgba(144,144,144,0.07451);">rsync -az source destination</span></p>
<p style=" margin-top:0px; margin-bottom:30px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Open Sans,Helvetica,sans-serif'; font-size:8.25pt; color:#444444; background-color:#ffffff;">Флаг «-P» также очень полезен. Он совмещает флаги «—progress» и «—partial». Первый выводит индикатор выполнения передачи, а второй позволяет возобновить прерванную передачу:</span></p>
<p style=" margin-top:0px; margin-bottom:30px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Courier New,monospace'; font-size:8.25pt; color:#444444; background-color:rgba(144,144,144,0.07451);">rsync -azP source destination<br />sending incremental file list<br />./<br />file1<br />0 100%    0.00kB/s    0:00:00 (xfer#1, to-check=99/101)<br />file10<br />0 100%    0.00kB/s    0:00:00 (xfer#2, to-check=98/101)<br />file100<br />0 100%    0.00kB/s    0:00:00 (xfer#3, to-check=97/101)<br />file11<br />0 100%    0.00kB/s    0:00:00 (xfer#4, to-check=96/101)<br />. . .</span></p>
<p style=" margin-top:0px; margin-bottom:30px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Open Sans,Helvetica,sans-serif'; font-size:8.25pt; color:#444444; background-color:#ffffff;">Если запустить команду снова, будет выведен более короткий результат, потому что никакие изменения не были внесены.</span></p>
<p style=" margin-top:0px; margin-bottom:30px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Open Sans,Helvetica,sans-serif'; font-size:8.25pt; color:#444444; background-color:#ffffff;">Это иллюстрирует способность rsync использовать время последнего изменения, чтобы определить, были ли внесены изменения в файлы.</span></p>
<p style=" margin-top:0px; margin-bottom:30px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Courier New,monospace'; font-size:8.25pt; color:#444444; background-color:rgba(144,144,144,0.07451);">rsync -azP source destination<br />sending incremental file list<br />sent 818 bytes received 12 bytes 1660.00 bytes/sec<br />total size is 0 speedup is 0.00</span></p>
<p style=" margin-top:0px; margin-bottom:30px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Open Sans,Helvetica,sans-serif'; font-size:8.25pt; color:#444444; background-color:#ffffff;">Если обновить время последнего изменения некоторых файлов, можно увидеть, что rsync повторно копирует только измененные файлы:</span></p>
<p style=" margin-top:0px; margin-bottom:30px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Courier New,monospace'; font-size:8.25pt; color:#444444; background-color:rgba(144,144,144,0.07451);">touch dir1/file{1..10}<br />rsync -azP source destination<br />sending incremental file list<br />file1<br />0 100%    0.00kB/s    0:00:00 (xfer#1, to-check=99/101)<br />file10<br />0 100%    0.00kB/s    0:00:00 (xfer#2, to-check=98/101)<br />file2<br />0 100%    0.00kB/s    0:00:00 (xfer#3, to-check=87/101)<br />file3<br />0 100%    0.00kB/s    0:00:00 (xfer#4, to-check=76/101)<br />. . .</span></p>
<p style=" margin-top:0px; margin-bottom:30px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Open Sans,Helvetica,sans-serif'; font-size:8.25pt; color:#444444; background-color:#ffffff;">По умолчанию, Rsync ничего не удаляет из каталога назначения. Следовательно, необходимо удалить файлы из каталога назначения, если они удаляются из  исходного каталога, чтобы сохранить полную синхронизацию каталогов.</span></p>
<p style=" margin-top:0px; margin-bottom:30px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Open Sans,Helvetica,sans-serif'; font-size:8.25pt; color:#444444; background-color:#ffffff;">Такое поведение можно изменить с помощью флага «—delete». Прежде чем применять данный флаг, используйте команду «—dry-run» и проведите тестирование, чтобы предотвратить потерю данных.</span></p>
<p style=" margin-top:0px; margin-bottom:30px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Courier New,monospace'; font-size:8.25pt; color:#444444; background-color:rgba(144,144,144,0.07451);">rsync -a --delete source destination</span></p>
<p style=" margin-top:0px; margin-bottom:30px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Open Sans,Helvetica,sans-serif'; font-size:8.25pt; color:#444444; background-color:#ffffff;">При необходимости исключить некоторые файлы или каталоги, расположенные в синхронизируемом каталоге, можно внести их в разделенный запятыми список при помощи команды «—exclude=»:</span></p>
<p style=" margin-top:0px; margin-bottom:30px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Courier New,monospace'; font-size:8.25pt; color:#444444; background-color:rgba(144,144,144,0.07451);">rsync -a --exclude=pattern_to_exclude source destination</span></p>
<p style=" margin-top:0px; margin-bottom:30px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Open Sans,Helvetica,sans-serif'; font-size:8.25pt; color:#444444; background-color:#ffffff;">Если шаблон исключений был определен, при помощи команды «—include=» исключение можно снять, установив другой шаблон:</span></p>
<p style=" margin-top:0px; margin-bottom:30px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Courier New,monospace'; font-size:8.25pt; color:#444444; background-color:rgba(144,144,144,0.07451);">rsync -a --exclude=pattern_to_exclude --include=pattern_to_include source destination</span></p></body></html>