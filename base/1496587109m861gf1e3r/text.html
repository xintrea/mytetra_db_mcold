<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'DejaVu Sans'; font-size:11pt; font-weight:400; font-style:normal;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Arial,sans-serif'; color:#222222; background-color:#ffffff;">Сборка пакетов имеет решающее значение для успешной реализации проекта с открытым исходным кодом. Ключевой составляющей правильной сборки является управление версиями. Так как проект имеет открытый исходный код, вы можете захотеть опубликовать пакет, чтобы реализовать все преимущества, предоставляемые сообществом разработчиков программ с открытым исходным кодом. В различных платформах или языках используются разные механизмы сборки пакетов, однако данная статья посвящена именно Python и его экосистеме сборки пакетов. В статье обсуждаются механизмы сборки пакетов, обеспечивающие основу для развития, а также приводится достаточно примеров, на основании которых можно сразу же приступать к действию.</span></p>
<p style=" margin-top:5px; margin-bottom:5px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><a name="why"></a><span style=" font-family:'HelveticaNeue-Light,Helvetica Neue Light,Helvetica Neue,Helvetica,Arial'; font-size:x-large; font-weight:600; color:#000000; background-color:#ffffff;">П</span><span style=" font-family:'HelveticaNeue-Light,Helvetica Neue Light,Helvetica Neue,Helvetica,Arial'; font-size:x-large; font-weight:600; color:#000000; background-color:#ffffff;">очему сборка пакетов так важна?</span></p>
<p style=" margin-top:5px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Arial,sans-serif'; color:#222222; background-color:#ffffff;">Помимо того, что это просто хороший тон, существуют еще три практические причины для поставки программного обеспечения в виде пакетов:</span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Arial,sans-serif'; color:#333333;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">простота использования;</li>
<li style=" font-family:'Arial,sans-serif'; color:#333333;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">стабильность (при управлении версиями);</li>
<li style=" font-family:'Arial,sans-serif'; color:#333333;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">распространение.</li></ul>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Arial,sans-serif'; color:#222222; background-color:#ffffff;">При выборе приложения простота его установки учитывается пользователями далеко не в последнюю очередь, поэтому следует максимально упростить этот процесс. Сборка пакетов позволяет сделать программное обеспечение более доступным и простым в установке. Если установка не сложная, значит, пользователям будет проще приступить к работе с вашим программным обеспечением. Повысить доступность своего пакета при его публикации в каталоге пакетов Python (Python Package Index — PyPI) можно посредством таких утилит как</span><span style=" font-family:'Arial,sans-serif'; color:#222222;"> </span><span style=" font-family:'Andale Mono,Lucida Console,Monaco,Liberation,fixed,monospace'; color:#000000;">pip</span><span style=" font-family:'Arial,sans-serif'; color:#222222;"> или </span><span style=" font-family:'Andale Mono,Lucida Console,Monaco,Liberation,fixed,monospace'; color:#000000;">easy_install</span><span style=" font-family:'Arial,sans-serif'; color:#222222;">. (См. </span><a href="https://www.ibm.com/developerworks/ru/library/os-pythonpackaging/#resources"><span style=" font-family:'Arial,sans-serif'; text-decoration: underline; color:#745285;">Ресурсы</span></a><span style=" font-family:'Arial,sans-serif'; color:#222222;"> для получения дополнительной информации по данным средствам.)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Arial,sans-serif'; color:#222222; background-color:#ffffff;">Кроме того, управление версиями пакетов позволяет пользователям «закрепить» свои проекты, использующее ваше программное обеспечение, за его определенной версией. Например, закрепление за Pinax версии 0.9a2.dev1017 будет выглядеть таким образом:</span></p>
<pre style=" margin-top:0px; margin-bottom:6px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f7f7f7;"><span style=" font-family:'Andale Mono,Lucida Console,Monaco,Liberation,fixed,monospace'; font-size:11px; color:#000000; background-color:#f7f7f7;">Pinax==0.9a2.dev1017</span></pre>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Arial,sans-serif'; color:#222222; background-color:#ffffff;">Это принудительно свяжет проект с Pinax версии 0.9a2.dev1017.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Arial,sans-serif'; color:#222222; background-color:#ffffff;">Управление версиями обеспечивает лучшую устойчивость при внесении изменений в программное обеспечение в будущем, в результате которых могут возникнуть конфликты в интерфейсах. В итоге ваши пользователи точно знают, что они получают, и им легче отслеживать различия в разных версиях. К тому же, разработчикам проектов точно известно, над чем они работают.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Arial,sans-serif'; color:#222222; background-color:#ffffff;">Наиболее популярным методом публикации пакетов на PyPI (или на вашем собственном дистрибутивном сервере) является создание дистрибутива исходного кода для его свободной загрузки. Дистрибутив исходного кода — это стандартный способ сборки кода вашего проекта в качестве распространяемого модуля. Можно также создавать бинарные дистрибутивы, но для целей открытого использования имеет смысл также распространять свой код. Создавая дистрибутивы исходного кода, вы облегчаете пользователям процесс нахождения программного обеспечения в сети Интернет с помощью автоматизированных средств, а также его загрузки и установки. Этот процесс помогает не только в разработке на локальных системах, но и в развертывании вашего программного обеспечения.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Arial,sans-serif'; color:#222222; background-color:#ffffff;">Таким образом, облегчая для пользователей процесс интегрирования и установки вашего программного обеспечения, применяя эффективное управление версиями, обеспечивающее надежные методы закрепления за версиями, и публикуя свои пакеты для их более широкого распространения, вы увеличиваете шансы на успех своего проекта и на получение более широкого признания. Более широкое распространение вашего кода может привести к увеличению числа участников, вносящих вклад в развитие кода — т. е. к достижению той цели, которую ставит перед собой каждый разработчик программ с открытым исходным кодом.</span></p>
<p style=" margin-top:10px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><a href="https://www.ibm.com/developerworks/ru/library/os-pythonpackaging/#ibm-pcon"><span style=" font-family:'Arial,sans-serif'; font-weight:600; color:#745285;">В начало</span></a></p>
<p style=" margin-top:5px; margin-bottom:5px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><a name="setup.py"></a><span style=" font-family:'HelveticaNeue-Light,Helvetica Neue Light,Helvetica Neue,Helvetica,Arial'; font-size:x-large; font-weight:600; color:#000000; background-color:#ffffff;">А</span><span style=" font-family:'HelveticaNeue-Light,Helvetica Neue Light,Helvetica Neue,Helvetica,Arial'; font-size:x-large; font-weight:600; color:#000000; background-color:#ffffff;">натомия файла setup.py</span></p>
<p style=" margin-top:5px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Arial,sans-serif'; color:#222222; background-color:#ffffff;">Одно из предназначений сценария setup.py — это исполнение сборки пакетов вашего программного обеспечения и загрузки его на дистрибутивные серверы. На различных популярных репозиториях Python вы можете найти сценарии setup.py различного содержания. В данной статье рассмотрены основные из них. См. раздел</span><span style=" font-family:'Arial,sans-serif'; color:#222222;"> </span><a href="https://www.ibm.com/developerworks/ru/library/os-pythonpackaging/#resources"><span style=" font-family:'Arial,sans-serif'; text-decoration: underline; color:#745285;">Ресурсы</span></a><span style=" font-family:'Arial,sans-serif'; color:#222222;"> для получения дополнительной информации.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Arial,sans-serif'; color:#222222; background-color:#ffffff;">Файл setup.py может использоваться для различных целей, но ниже мы приводим вариант, который позволяет выполнить следующие команды:</span></p>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f7f7f7;"><span style=" font-family:'Andale Mono,Lucida Console,Monaco,Liberation,fixed,monospace'; font-size:11px; color:#000000; background-color:#f7f7f7;">python setup.py register</span></pre>
<pre style=" margin-top:0px; margin-bottom:6px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f7f7f7;"><span style=" font-family:'Andale Mono,Lucida Console,Monaco,Liberation,fixed,monospace'; font-size:11px; color:#000000; background-color:#f7f7f7;">python setup.py sdist upload</span></pre>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Arial,sans-serif'; color:#222222; background-color:#ffffff;">Первая команда,</span><span style=" font-family:'Arial,sans-serif'; color:#222222;"> </span><span style=" font-family:'Andale Mono,Lucida Console,Monaco,Liberation,fixed,monospace'; color:#000000;">register</span><span style=" font-family:'Arial,sans-serif'; color:#222222;">, получает информацию, которую выдает функция </span><span style=" font-family:'Andale Mono,Lucida Console,Monaco,Liberation,fixed,monospace'; color:#000000;">setup()</span><span style=" font-family:'Arial,sans-serif'; color:#222222;"> сценария setup.py, и создает запись в PyPI для вашего пакета. Она ничего не загружает, вместо этого она создает метаданные о вашем проекте с тем, чтобы впоследствии вы могли выгрузить и разместить там свои версии ПО. Следующие две команды связаны: </span><span style=" font-family:'Andale Mono,Lucida Console,Monaco,Liberation,fixed,monospace'; color:#000000;">sdist upload</span><span style=" font-family:'Arial,sans-serif'; color:#222222;"> создает дистрибутив исходного кода, а затем выгружает его в PyPI. Тем не менее, существуют несколько необходимых условий, таких как настройка собственного конфигурационного файла .pypirc и собственно запись содержимого в файл setup.py.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Arial,sans-serif'; color:#222222; background-color:#ffffff;">Прежде всего, сконфигурируйте файл .pypirc. Он должен находиться в основном каталоге, который может быть разным в зависимости от используемой операционной системы. В операционных системах UNIX®, Linux® и Mac OS Xзайти в этот каталог можно, набрав</span><span style=" font-family:'Arial,sans-serif'; color:#222222;"> </span><span style=" font-family:'Andale Mono,Lucida Console,Monaco,Liberation,fixed,monospace'; color:#000000;">cd ~/</span><span style=" font-family:'Arial,sans-serif'; color:#222222;">. Содержимое файла должно включать ваши учетные данные PyPI, как показано в </span><a href="https://www.ibm.com/developerworks/ru/library/os-pythonpackaging/#list1"><span style=" font-family:'Arial,sans-serif'; text-decoration: underline; color:#745285;">листинге 1</span></a><span style=" font-family:'Arial,sans-serif'; color:#222222;">.</span></p>
<p style=" margin-top:5px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><a name="list1"></a><span style=" font-family:'Arial,sans-serif'; font-size:small; font-weight:600; color:#000000; background-color:#ffffff;">Л</span><span style=" font-family:'Arial,sans-serif'; font-size:small; font-weight:600; color:#000000; background-color:#ffffff;">истинг 1. Типовой файл .pypirc</span></p>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f7f7f7;"><span style=" font-family:'Andale Mono,Lucida Console,Monaco,Liberation,fixed,monospace'; font-size:11px; color:#000000; background-color:#f7f7f7;">[distutils]</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f7f7f7;"><span style=" font-family:'Andale Mono,Lucida Console,Monaco,Liberation,fixed,monospace'; font-size:11px; color:#000000; background-color:#f7f7f7;">index-servers =</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f7f7f7;"><span style=" font-family:'Andale Mono,Lucida Console,Monaco,Liberation,fixed,monospace'; font-size:11px; color:#000000; background-color:#f7f7f7;">    pypi</span></pre>
<pre style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Andale Mono,Lucida Console,Monaco,Liberation,fixed,monospace'; font-size:11px; color:#000000; background-color:#f7f7f7;"><br /></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f7f7f7;"><span style=" font-family:'Andale Mono,Lucida Console,Monaco,Liberation,fixed,monospace'; font-size:11px; color:#000000; background-color:#f7f7f7;">[pypi]</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f7f7f7;"><span style=" font-family:'Andale Mono,Lucida Console,Monaco,Liberation,fixed,monospace'; font-size:11px; color:#000000; background-color:#f7f7f7;">username:xxxxxxxxxxxxx</span></pre>
<pre style=" margin-top:0px; margin-bottom:6px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f7f7f7;"><span style=" font-family:'Andale Mono,Lucida Console,Monaco,Liberation,fixed,monospace'; font-size:11px; color:#000000; background-color:#f7f7f7;">password:xxxxxxxxxxxxx</span></pre>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Arial,sans-serif'; color:#222222; background-color:#ffffff;">Далее переходите в PyPI и зарегистрируйтесь для создания учетной записи (не волнуйтесь — это бесплатно). Введите такое же имя пользователя и пароль, что и в файле .pypirc каталога PyPI, и убедитесь, что файл называется именно</span><span style=" font-family:'Arial,sans-serif'; color:#222222;"> </span><span style=" font-family:'Arial,sans-serif'; font-style:italic; color:#222222;">~/.pypirc</span><span style=" font-family:'Arial,sans-serif'; color:#222222;">.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Arial,sans-serif'; color:#222222; background-color:#ffffff;">Теперь при написании своего сценария setup.py вам необходимо решить, что будет отображаться на индексной странице PyPI, и определиться с названием проекта. Начнем с копирования шаблона для setup.py, который я использую для проектов (см.</span><span style=" font-family:'Arial,sans-serif'; color:#222222;"> </span><a href="https://www.ibm.com/developerworks/ru/library/os-pythonpackaging/#list2"><span style=" font-family:'Arial,sans-serif'; text-decoration: underline; color:#745285;">листинг 2</span></a><span style=" font-family:'Arial,sans-serif'; color:#222222;">). Пропустив импортирование и функции, взгляните на нижнюю часть шаблона и подумайте, что вам нужно изменить с учетом особенностей вашего проекта. См. </span><a href="https://www.ibm.com/developerworks/ru/library/os-pythonpackaging/#resources"><span style=" font-family:'Arial,sans-serif'; text-decoration: underline; color:#745285;">Ресурсы</span></a><span style=" font-family:'Arial,sans-serif'; color:#222222;"> для получения ссылки на полный сценарий.</span></p>
<p style=" margin-top:5px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><a name="list2"></a><span style=" font-family:'Arial,sans-serif'; font-size:small; font-weight:600; color:#000000; background-color:#ffffff;">Л</span><span style=" font-family:'Arial,sans-serif'; font-size:small; font-weight:600; color:#000000; background-color:#ffffff;">истинг 2. Шаблон setup.py</span></p>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f7f7f7;"><span style=" font-family:'Andale Mono,Lucida Console,Monaco,Liberation,fixed,monospace'; font-size:11px; color:#000000; background-color:#f7f7f7;">PACKAGE = &quot;&quot;</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f7f7f7;"><span style=" font-family:'Andale Mono,Lucida Console,Monaco,Liberation,fixed,monospace'; font-size:11px; color:#000000; background-color:#f7f7f7;">NAME = &quot;&quot;</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f7f7f7;"><span style=" font-family:'Andale Mono,Lucida Console,Monaco,Liberation,fixed,monospace'; font-size:11px; color:#000000; background-color:#f7f7f7;">DESCRIPTION = &quot;&quot;</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f7f7f7;"><span style=" font-family:'Andale Mono,Lucida Console,Monaco,Liberation,fixed,monospace'; font-size:11px; color:#000000; background-color:#f7f7f7;">AUTHOR = &quot;&quot;</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f7f7f7;"><span style=" font-family:'Andale Mono,Lucida Console,Monaco,Liberation,fixed,monospace'; font-size:11px; color:#000000; background-color:#f7f7f7;">AUTHOR_EMAIL = &quot;&quot;</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f7f7f7;"><span style=" font-family:'Andale Mono,Lucida Console,Monaco,Liberation,fixed,monospace'; font-size:11px; color:#000000; background-color:#f7f7f7;">URL = &quot;&quot;</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f7f7f7;"><span style=" font-family:'Andale Mono,Lucida Console,Monaco,Liberation,fixed,monospace'; font-size:11px; color:#000000; background-color:#f7f7f7;">VERSION = __import__(PACKAGE).__version__</span></pre>
<pre style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Andale Mono,Lucida Console,Monaco,Liberation,fixed,monospace'; font-size:11px; color:#000000; background-color:#f7f7f7;"><br /></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f7f7f7;"><span style=" font-family:'Andale Mono,Lucida Console,Monaco,Liberation,fixed,monospace'; font-size:11px; color:#000000; background-color:#f7f7f7;">setup(</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f7f7f7;"><span style=" font-family:'Andale Mono,Lucida Console,Monaco,Liberation,fixed,monospace'; font-size:11px; color:#000000; background-color:#f7f7f7;">    name=NAME,</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f7f7f7;"><span style=" font-family:'Andale Mono,Lucida Console,Monaco,Liberation,fixed,monospace'; font-size:11px; color:#000000; background-color:#f7f7f7;">    version=VERSION,</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f7f7f7;"><span style=" font-family:'Andale Mono,Lucida Console,Monaco,Liberation,fixed,monospace'; font-size:11px; color:#000000; background-color:#f7f7f7;">    description=DESCRIPTION,</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f7f7f7;"><span style=" font-family:'Andale Mono,Lucida Console,Monaco,Liberation,fixed,monospace'; font-size:11px; color:#000000; background-color:#f7f7f7;">    long_description=read(&quot;README.rst&quot;),</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f7f7f7;"><span style=" font-family:'Andale Mono,Lucida Console,Monaco,Liberation,fixed,monospace'; font-size:11px; color:#000000; background-color:#f7f7f7;">    author=AUTHOR,</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f7f7f7;"><span style=" font-family:'Andale Mono,Lucida Console,Monaco,Liberation,fixed,monospace'; font-size:11px; color:#000000; background-color:#f7f7f7;">    author_email=AUTHOR_EMAIL,</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f7f7f7;"><span style=" font-family:'Andale Mono,Lucida Console,Monaco,Liberation,fixed,monospace'; font-size:11px; color:#000000; background-color:#f7f7f7;">    license=&quot;BSD&quot;,</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f7f7f7;"><span style=" font-family:'Andale Mono,Lucida Console,Monaco,Liberation,fixed,monospace'; font-size:11px; color:#000000; background-color:#f7f7f7;">    url=URL,</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f7f7f7;"><span style=" font-family:'Andale Mono,Lucida Console,Monaco,Liberation,fixed,monospace'; font-size:11px; color:#000000; background-color:#f7f7f7;">    packages=find_packages(exclude=[&quot;tests.*&quot;, &quot;tests&quot;]),</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f7f7f7;"><span style=" font-family:'Andale Mono,Lucida Console,Monaco,Liberation,fixed,monospace'; font-size:11px; color:#000000; background-color:#f7f7f7;">    package_data=find_package_data(</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f7f7f7;"><span style=" font-family:'Andale Mono,Lucida Console,Monaco,Liberation,fixed,monospace'; font-size:11px; color:#000000; background-color:#f7f7f7;">			PACKAGE,</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f7f7f7;"><span style=" font-family:'Andale Mono,Lucida Console,Monaco,Liberation,fixed,monospace'; font-size:11px; color:#000000; background-color:#f7f7f7;">			only_in_packages=False</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f7f7f7;"><span style=" font-family:'Andale Mono,Lucida Console,Monaco,Liberation,fixed,monospace'; font-size:11px; color:#000000; background-color:#f7f7f7;">	  ),</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f7f7f7;"><span style=" font-family:'Andale Mono,Lucida Console,Monaco,Liberation,fixed,monospace'; font-size:11px; color:#000000; background-color:#f7f7f7;">    classifiers=[</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f7f7f7;"><span style=" font-family:'Andale Mono,Lucida Console,Monaco,Liberation,fixed,monospace'; font-size:11px; color:#000000; background-color:#f7f7f7;">        &quot;Development Status :: 3 - Alpha&quot;,</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f7f7f7;"><span style=" font-family:'Andale Mono,Lucida Console,Monaco,Liberation,fixed,monospace'; font-size:11px; color:#000000; background-color:#f7f7f7;">        &quot;Environment :: Web Environment&quot;,</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f7f7f7;"><span style=" font-family:'Andale Mono,Lucida Console,Monaco,Liberation,fixed,monospace'; font-size:11px; color:#000000; background-color:#f7f7f7;">        &quot;Intended Audience :: Developers&quot;,</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f7f7f7;"><span style=" font-family:'Andale Mono,Lucida Console,Monaco,Liberation,fixed,monospace'; font-size:11px; color:#000000; background-color:#f7f7f7;">        &quot;License :: OSI Approved :: BSD License&quot;,</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f7f7f7;"><span style=" font-family:'Andale Mono,Lucida Console,Monaco,Liberation,fixed,monospace'; font-size:11px; color:#000000; background-color:#f7f7f7;">        &quot;Operating System :: OS Independent&quot;,</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f7f7f7;"><span style=" font-family:'Andale Mono,Lucida Console,Monaco,Liberation,fixed,monospace'; font-size:11px; color:#000000; background-color:#f7f7f7;">        &quot;Programming Language :: Python&quot;,</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f7f7f7;"><span style=" font-family:'Andale Mono,Lucida Console,Monaco,Liberation,fixed,monospace'; font-size:11px; color:#000000; background-color:#f7f7f7;">        &quot;Framework :: Django&quot;,</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f7f7f7;"><span style=" font-family:'Andale Mono,Lucida Console,Monaco,Liberation,fixed,monospace'; font-size:11px; color:#000000; background-color:#f7f7f7;">    ],</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f7f7f7;"><span style=" font-family:'Andale Mono,Lucida Console,Monaco,Liberation,fixed,monospace'; font-size:11px; color:#000000; background-color:#f7f7f7;">    zip_safe=False,</span></pre>
<pre style=" margin-top:0px; margin-bottom:6px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f7f7f7;"><span style=" font-family:'Andale Mono,Lucida Console,Monaco,Liberation,fixed,monospace'; font-size:11px; color:#000000; background-color:#f7f7f7;">)</span></pre>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Arial,sans-serif'; color:#222222; background-color:#ffffff;">Во-первых, следует помнить, что этот шаблон подразумевает наличие в вашем проекте двух различных файлов. Первый используется для длинного описания (</span><span style=" font-family:'Andale Mono,Lucida Console,Monaco,Liberation,fixed,monospace'; color:#000000;">long_description</span><span style=" font-family:'Arial,sans-serif'; color:#222222;">). Он считывает содержимое файла README.rst, находящегося в той же директории, что и setup.py, и передает это содержимое как строку в параметр </span><span style=" font-family:'Andale Mono,Lucida Console,Monaco,Liberation,fixed,monospace'; color:#000000;">long_description</span><span style=" font-family:'Arial,sans-serif'; color:#222222;">. Этот файл заполняет целевую страницу в PyPI, поэтому желательно дать в нем краткое описание проекта и привести несколько примеров его использования. Второй файл — файл пакетов </span><span style=" font-family:'Arial,sans-serif'; font-style:italic; color:#222222;">__init__.py</span><span style=" font-family:'Arial,sans-serif'; color:#222222;">. Мы не приводим здесь его развернутого описания, однако когда строка, которая определяет переменную VERSION, импортирует ваш пакет, Python требуется файл __init__.py, поэтому в данном модуле следует определить переменную с названием </span><span style=" font-family:'Andale Mono,Lucida Console,Monaco,Liberation,fixed,monospace'; color:#000000;">__version__</span><span style=" font-family:'Arial,sans-serif'; color:#222222;">. Пока достаточно записать это строкой:</span></p>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f7f7f7;"><span style=" font-family:'Andale Mono,Lucida Console,Monaco,Liberation,fixed,monospace'; font-size:11px; color:#000000; background-color:#f7f7f7;"># __init__.py</span></pre>
<pre style=" margin-top:0px; margin-bottom:6px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f7f7f7;"><span style=" font-family:'Andale Mono,Lucida Console,Monaco,Liberation,fixed,monospace'; font-size:11px; color:#000000; background-color:#f7f7f7;">__version__ = &quot;0.1&quot;</span></pre>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Arial,sans-serif'; color:#222222; background-color:#ffffff;">Теперь взглянем на остальные исходные параметры.</span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Arial,sans-serif'; color:#333333;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-style:italic;">PACKAGE</span>— это пакет Python в вашем проекте. Это папка верхнего уровня, содержащая модуль __init__.py, который должен находиться в той же директории, что и файл setup.py, например:</li>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px; line-height:1.2%; background-color:#f7f7f7;"><span style=" font-family:'Andale Mono,Lucida Console,Monaco,Liberation,fixed,monospace'; font-size:11px; color:#000000; background-color:#f7f7f7;">/-</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px; line-height:1.2%; background-color:#f7f7f7;"><span style=" font-family:'Andale Mono,Lucida Console,Monaco,Liberation,fixed,monospace'; font-size:11px; color:#000000; background-color:#f7f7f7;">  |- README.rst</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px; line-height:1.2%; background-color:#f7f7f7;"><span style=" font-family:'Andale Mono,Lucida Console,Monaco,Liberation,fixed,monospace'; font-size:11px; color:#000000; background-color:#f7f7f7;">  |- setup.py</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px; line-height:1.2%; background-color:#f7f7f7;"><span style=" font-family:'Andale Mono,Lucida Console,Monaco,Liberation,fixed,monospace'; font-size:11px; color:#000000; background-color:#f7f7f7;">  |- dogs </span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px; line-height:1.2%; background-color:#f7f7f7;"><span style=" font-family:'Andale Mono,Lucida Console,Monaco,Liberation,fixed,monospace'; font-size:11px; color:#000000; background-color:#f7f7f7;">     |- __init__.py</span></pre>
<pre style=" margin-top:0px; margin-bottom:6px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px; line-height:1.2%; background-color:#f7f7f7;"><span style=" font-family:'Andale Mono,Lucida Console,Monaco,Liberation,fixed,monospace'; font-size:11px; color:#000000; background-color:#f7f7f7;">     |- catcher.py</span></pre>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Arial,sans-serif'; color:#222222;">Итак, в данном случае вашим пакетом будет </span><span style=" font-family:'Andale Mono,Lucida Console,Monaco,Liberation,fixed,monospace'; color:#000000;">dogs</span><span style=" font-family:'Arial,sans-serif'; color:#222222;">.</span></p>
<li style=" font-family:'Arial,sans-serif'; color:#333333;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Параметр <span style=" font-style:italic;">NAME</span> обычно схож или совпадает с названием пакета PACKAGE, но вы можете задать любое имя в зависимости от ваших предпочтений. NAME — это параметр, по которому пользователи будут ссылаться на ваше программное обеспечение, имя, под которым ваше программное обеспечение будет отображаться в PyPI и, что более важно, под которым пользователи будут его устанавливать (например, <span style=" font-family:'Andale Mono,Lucida Console,Monaco,Liberation,fixed,monospace'; color:#000000;">pip install NAME</span>).</li>
<li style=" font-family:'Arial,sans-serif'; color:#333333;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-style:italic;">DESCRIPTION</span>— краткое описание вашего проекта. Одного предложения будет достаточно.</li>
<li style=" font-family:'Arial,sans-serif'; color:#333333;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-style:italic;">AUTHOR</span> и <span style=" font-style:italic;">AUTHOR_EMAIL</span>— это соответственно: ваше имя и адрес электронной почты. Эта информация не обязательна, но указать свой адрес электронной почты для пользователей, которые пожелают обратиться к вам с вопросами по проекту, это правило хорошего тона.</li>
<li style=" font-family:'Arial,sans-serif'; color:#333333;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-style:italic;">URL</span>— это URL-адрес проекта. Этот параметр может быть как Web-сайтом проекта или репозиторием Github, так и любым другим URL-адресом. Эта информация также не обязательна.</li></ul>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Arial,sans-serif'; color:#222222; background-color:#ffffff;">Возможно, вы пожелаете указать лицензионные условия и классификаторы. Более детальная информация о создании файла setup.py приведена в документации по Python. (См.</span><span style=" font-family:'Arial,sans-serif'; color:#222222;"> </span><a href="https://www.ibm.com/developerworks/ru/library/os-pythonpackaging/#resources"><span style=" font-family:'Arial,sans-serif'; text-decoration: underline; color:#745285;">Ресурсы</span></a><span style=" font-family:'Arial,sans-serif'; color:#222222;">.)</span></p>
<p style=" margin-top:10px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><a href="https://www.ibm.com/developerworks/ru/library/os-pythonpackaging/#ibm-pcon"><span style=" font-family:'Arial,sans-serif'; font-weight:600; color:#745285;">В начало</span></a></p>
<p style=" margin-top:5px; margin-bottom:5px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><a name="versioning"></a><span style=" font-family:'HelveticaNeue-Light,Helvetica Neue Light,Helvetica Neue,Helvetica,Arial'; font-size:x-large; font-weight:600; color:#000000; background-color:#ffffff;">У</span><span style=" font-family:'HelveticaNeue-Light,Helvetica Neue Light,Helvetica Neue,Helvetica,Arial'; font-size:x-large; font-weight:600; color:#000000; background-color:#ffffff;">правление версиями</span></p>
<p style=" margin-top:5px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Arial,sans-serif'; color:#222222; background-color:#ffffff;">Управление версиями само по себе является обширной темой, однако его следует упомянуть в контексте сборки пакетов, так как нельзя провести правильную сборку пакетов без надлежащего управления версиями. Управление версиями — это форма общения с вашими пользователями, также с его помощью пользователи могут создавать более стабильные и надежные приложения. При помощи управления версиями вы сообщаете своим пользователям о внесенных изменениях и указываете точные рамки, где были произведены эти изменения.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Arial,sans-serif'; color:#222222; background-color:#ffffff;">Стандарт по управлению версиями пакетов Python можно найти в PEP-386 (Предложение по развитию Python) (см.</span><span style=" font-family:'Arial,sans-serif'; color:#222222;"> </span><a href="https://www.ibm.com/developerworks/ru/library/os-pythonpackaging/#resources"><span style=" font-family:'Arial,sans-serif'; text-decoration: underline; color:#745285;">Ресурсы</span></a><span style=" font-family:'Arial,sans-serif'; color:#222222;">.) В нем прописаны правила практического характера. Даже если вы не читали, не поняли или даже не согласны с PEP, все же разумнее придерживаться установленных в нем правил, так как именно они все чаще применяются при создании разработчиками приложений Python.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Arial,sans-serif'; color:#222222; background-color:#ffffff;">Кроме того, управление версиями необходимо не только для разработки стабильных версий, загружаемых в PyPI, но также полезно для разработки версий с суффиксом</span><span style=" font-family:'Arial,sans-serif'; color:#222222;"> </span><span style=" font-family:'Arial,sans-serif'; font-style:italic; color:#222222;">devNN</span><span style=" font-family:'Arial,sans-serif'; color:#222222;">. Как правило, размещение разрабатываемых версий в PyPI не поощряется, но можно сделать их общедоступными посредством настройки собственного общедоступного (или закрытого) дистрибутивного сервера. В этом случае пользователи, которые желают воспользоваться последней версией, могут указать это в своем </span><span style=" font-family:'Andale Mono,Lucida Console,Monaco,Liberation,fixed,monospace'; color:#000000;">pip</span><span style=" font-family:'Arial,sans-serif'; color:#222222;">-файле requirements.txt. Ниже приведено несколько примеров управления версиями:</span></p>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f7f7f7;"><span style=" font-family:'Andale Mono,Lucida Console,Monaco,Liberation,fixed,monospace'; font-size:11px; color:#000000; background-color:#f7f7f7;">1.0.1        # 1.0.1 final release</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f7f7f7;"><span style=" font-family:'Andale Mono,Lucida Console,Monaco,Liberation,fixed,monospace'; font-size:11px; color:#000000; background-color:#f7f7f7;">1.0.2a       # 1.0.2 Alpha (for Alpha, after Dev releases)</span></pre>
<pre style=" margin-top:0px; margin-bottom:6px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f7f7f7;"><span style=" font-family:'Andale Mono,Lucida Console,Monaco,Liberation,fixed,monospace'; font-size:11px; color:#000000; background-color:#f7f7f7;">1.0.2a.dev5  # 1.0.2 Alpha, Dev release #5</span></pre>
<p style=" margin-top:10px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><a href="https://www.ibm.com/developerworks/ru/library/os-pythonpackaging/#ibm-pcon"><span style=" font-family:'Arial,sans-serif'; font-weight:600; color:#745285;">В начало</span></a></p>
<p style=" margin-top:5px; margin-bottom:5px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><a name="publishing"></a><span style=" font-family:'HelveticaNeue-Light,Helvetica Neue Light,Helvetica Neue,Helvetica,Arial'; font-size:x-large; font-weight:600; color:#000000; background-color:#ffffff;">П</span><span style=" font-family:'HelveticaNeue-Light,Helvetica Neue Light,Helvetica Neue,Helvetica,Arial'; font-size:x-large; font-weight:600; color:#000000; background-color:#ffffff;">убликация</span></p>
<p style=" margin-top:5px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Arial,sans-serif'; color:#222222; background-color:#ffffff;">Пользователям не удастся отыскать и установить ваше программное обеспечение, если оно не будет опубликовано. Обычно пакеты публикуются в PyPI. Настроив свой конфигурационный файл .pypirc и передав команду</span><span style=" font-family:'Arial,sans-serif'; color:#222222;"> </span><span style=" font-family:'Andale Mono,Lucida Console,Monaco,Liberation,fixed,monospace'; color:#000000;">upload</span><span style=" font-family:'Arial,sans-serif'; color:#222222;"> в setup.py, вы передадите пакет в PyPI. Как правило, эта операция производится совместно с созданием дистрибутива исходного кода:</span></p>
<pre style=" margin-top:0px; margin-bottom:6px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f7f7f7;"><span style=" font-family:'Andale Mono,Lucida Console,Monaco,Liberation,fixed,monospace'; font-size:11px; color:#000000; background-color:#f7f7f7;">python setup.py sdist upload</span></pre>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Arial,sans-serif'; color:#222222; background-color:#ffffff;">В случае использования собственного дистрибутивного сервера, добавьте раздел для авторизации в своем файле .pypirc для этого нового местоположения и укажите ссылку на него при выгрузке:</span></p>
<pre style=" margin-top:0px; margin-bottom:6px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f7f7f7;"><span style=" font-family:'Andale Mono,Lucida Console,Monaco,Liberation,fixed,monospace'; font-size:11px; color:#000000; background-color:#f7f7f7;">python setup.py sdist upload -r mydist</span></pre>
<p style=" margin-top:10px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><a href="https://www.ibm.com/developerworks/ru/library/os-pythonpackaging/#ibm-pcon"><span style=" font-family:'Arial,sans-serif'; font-weight:600; color:#745285;">В начало</span></a></p>
<p style=" margin-top:5px; margin-bottom:5px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><a name="dist_server"></a><span style=" font-family:'HelveticaNeue-Light,Helvetica Neue Light,Helvetica Neue,Helvetica,Arial'; font-size:x-large; font-weight:600; color:#000000; background-color:#ffffff;">Н</span><span style=" font-family:'HelveticaNeue-Light,Helvetica Neue Light,Helvetica Neue,Helvetica,Arial'; font-size:x-large; font-weight:600; color:#000000; background-color:#ffffff;">астройка собственного дистрибутивного сервера</span></p>
<p style=" margin-top:5px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Arial,sans-serif'; color:#222222; background-color:#ffffff;">Главной причиной использования собственного дистрибутивного сервера для проектов с открытым исходным кодом является потребность в публикации разрабатываемых версий, так как PyPI может содержать только стабильные приложения. Например, возможно вы захотите:</span></p>
<pre style=" margin-top:0px; margin-bottom:6px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f7f7f7;"><span style=" font-family:'Andale Mono,Lucida Console,Monaco,Liberation,fixed,monospace'; font-size:11px; color:#000000; background-color:#f7f7f7;">pip install MyPackage</span></pre>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Arial,sans-serif'; color:#222222; background-color:#ffffff;">... установить последнюю стабильную версию в PyPI. Но если вы позднее добавите разрабатываемые версии, то эта команда остановит выполнение и установит последнюю версию, т. е. разрабатываемую версию. Как правило, полезно всегда закреплять проекты за определенной версией, но это делают не все пользователи. Поэтому следует убедиться в том, что, если номер версии не указан, по умолчанию возвращается последняя стабильная версия.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Arial,sans-serif'; color:#222222; background-color:#ffffff;">Одним из способов убить одним выстрелом двух зайцев (предоставлять только стабильные версии для использования pip по умолчанию и обеспечить пользователям возможность устанавливать пакеты разрабатываемых версий) является создание собственного дистрибутивного сервера. Проект Pinax применяет эту технологию для всех своих разрабатываемых версий на сайте http://dist.pinaxproject.com. (См.</span><span style=" font-family:'Arial,sans-serif'; color:#222222;"> </span><a href="https://www.ibm.com/developerworks/ru/library/os-pythonpackaging/#resources"><span style=" font-family:'Arial,sans-serif'; text-decoration: underline; color:#745285;">Ресурсы</span></a><span style=" font-family:'Arial,sans-serif'; color:#222222;">.)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Arial,sans-serif'; color:#222222; background-color:#ffffff;">Дистрибутивный сервер представляет собой каталог, работающий по протоколу HTTP и предоставляющий доступ к файлам на вашем сервере. Он должен иметь следующую файловую структуру:</span></p>
<pre style=" margin-top:0px; margin-bottom:6px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f7f7f7;"><span style=" font-family:'Andale Mono,Lucida Console,Monaco,Liberation,fixed,monospace'; font-size:11px; color:#000000; background-color:#f7f7f7;">/index-name/package-name/package-name-version.tar.gz</span></pre>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Arial,sans-serif'; color:#222222; background-color:#ffffff;">В дальнейшем при желании сервер можно сделать закрытым путем конфигурирования</span><span style=" font-family:'Arial,sans-serif'; color:#222222;"> </span><span style=" font-family:'Andale Mono,Lucida Console,Monaco,Liberation,fixed,monospace'; color:#000000;">Basic-Auth</span><span style=" font-family:'Arial,sans-serif'; color:#222222;"> на своем Web-сервере. Вы также можете добавить некоторые другие средства для выгрузки дистрибутивов исходного кода. Для этого необходимо добавить код управления выгрузкой, разобрать название файла и создать пути по каталогу, которые бы соответствовали приведенной выше схеме. Такая структура принята для проектов Pinax с использованием нескольких репозиториев.</span></p>
<p style=" margin-top:10px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><a href="https://www.ibm.com/developerworks/ru/library/os-pythonpackaging/#ibm-pcon"><span style=" font-family:'Arial,sans-serif'; font-weight:600; color:#745285;">В начало</span></a></p>
<p style=" margin-top:5px; margin-bottom:5px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><a name="pip"></a><span style=" font-family:'HelveticaNeue-Light,Helvetica Neue Light,Helvetica Neue,Helvetica,Arial'; font-size:x-large; font-weight:600; color:#000000; background-color:#ffffff;">p</span><span style=" font-family:'HelveticaNeue-Light,Helvetica Neue Light,Helvetica Neue,Helvetica,Arial'; font-size:x-large; font-weight:600; color:#000000; background-color:#ffffff;">ip и virtualenv</span></p>
<p style=" margin-top:5px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Arial,sans-serif'; color:#222222; background-color:#ffffff;">Хотя данная статья посвящена в основном сборке пакетов, дабы отдать должное тем преимуществам, которые сборка пакетов и управление версиями дают вашим пользователям, этот раздел описывает использование пакетов.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Arial,sans-serif'; color:#222222; background-color:#ffffff;">Инструмент</span><span style=" font-family:'Arial,sans-serif'; color:#222222;"> </span><span style=" font-family:'Andale Mono,Lucida Console,Monaco,Liberation,fixed,monospace'; color:#000000;">pip</span><span style=" font-family:'Arial,sans-serif'; color:#222222;"> можно установить напрямую, однако я рекомендую использовать его в рамках функциональности </span><span style=" font-family:'Andale Mono,Lucida Console,Monaco,Liberation,fixed,monospace'; color:#000000;">virtualenv</span><span style=" font-family:'Arial,sans-serif'; color:#222222;">. (См.</span><a href="https://www.ibm.com/developerworks/ru/library/os-pythonpackaging/#resources"><span style=" font-family:'Arial,sans-serif'; text-decoration: underline; color:#745285;">Ресурсы</span></a><span style=" font-family:'Arial,sans-serif'; color:#222222;">.) Я также советую прибегать к </span><span style=" font-family:'Andale Mono,Lucida Console,Monaco,Liberation,fixed,monospace'; color:#000000;">virtualenv</span><span style=" font-family:'Arial,sans-serif'; color:#222222;"> во всех случаях, когда вы имеете дело с Python, так как окружение Python при этом остается незагроможденным. Подобно тому, как виртуальная машина позволяет запускать несколько операционных систем одновременно, </span><span style=" font-family:'Andale Mono,Lucida Console,Monaco,Liberation,fixed,monospace'; color:#000000;">virtualenv</span><span style=" font-family:'Arial,sans-serif'; color:#222222;"> позволяет запускать несколько окружений Python одновременно. Я ничего не устанавливаю в своей системе Python, а просто создаю новое виртуальное окружение для каждого нового проекта или утилиты, над которыми работаю.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Arial,sans-serif'; color:#222222; background-color:#ffffff;">Теперь, когда инструмент</span><span style=" font-family:'Arial,sans-serif'; color:#222222;"> </span><span style=" font-family:'Andale Mono,Lucida Console,Monaco,Liberation,fixed,monospace'; color:#000000;">virtualenv</span><span style=" font-family:'Arial,sans-serif'; color:#222222;"> установлен, можно и немного поиграть:</span></p>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f7f7f7;"><span style=" font-family:'Andale Mono,Lucida Console,Monaco,Liberation,fixed,monospace'; font-size:11px; color:#000000; background-color:#f7f7f7;">$ mkvirtualenv —no-site-packages testing</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f7f7f7;"><span style=" font-family:'Andale Mono,Lucida Console,Monaco,Liberation,fixed,monospace'; font-size:11px; color:#000000; background-color:#f7f7f7;">$ pip install Pinax</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f7f7f7;"><span style=" font-family:'Andale Mono,Lucida Console,Monaco,Liberation,fixed,monospace'; font-size:11px; color:#000000; background-color:#f7f7f7;">$ pip freeze|grep Pinax</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f7f7f7;"><span style=" font-family:'Andale Mono,Lucida Console,Monaco,Liberation,fixed,monospace'; font-size:11px; color:#000000; background-color:#f7f7f7;">$ pip uninstall Pinax</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f7f7f7;"><span style=" font-family:'Andale Mono,Lucida Console,Monaco,Liberation,fixed,monospace'; font-size:11px; color:#000000; background-color:#f7f7f7;">$ pip install —extra-index-url=http://dist.pinaxproject.com/fresh-start/ </span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f7f7f7;"><span style=" font-family:'Andale Mono,Lucida Console,Monaco,Liberation,fixed,monospace'; font-size:11px; color:#000000; background-color:#f7f7f7;">    Pinax==0.9a2.dev1017</span></pre>
<pre style=" margin-top:0px; margin-bottom:6px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f7f7f7;"><span style=" font-family:'Andale Mono,Lucida Console,Monaco,Liberation,fixed,monospace'; font-size:11px; color:#000000; background-color:#f7f7f7;">$ pip freeze|grep Pinax</span></pre>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Arial,sans-serif'; color:#222222; background-color:#ffffff;">Обратите внимание, что первая установка</span><span style=" font-family:'Arial,sans-serif'; color:#222222;"> </span><span style=" font-family:'Andale Mono,Lucida Console,Monaco,Liberation,fixed,monospace'; color:#000000;">pip</span><span style=" font-family:'Arial,sans-serif'; color:#222222;"> загружается и устанавливается с PyPI. Команда </span><span style=" font-family:'Andale Mono,Lucida Console,Monaco,Liberation,fixed,monospace'; color:#000000;">pip freeze</span><span style=" font-family:'Arial,sans-serif'; color:#222222;"> выводит все версии пакетов, установленных в текущем </span><span style=" font-family:'Andale Mono,Lucida Console,Monaco,Liberation,fixed,monospace'; color:#000000;">virtualenv</span><span style=" font-family:'Arial,sans-serif'; color:#222222;">. Команда </span><span style=" font-family:'Andale Mono,Lucida Console,Monaco,Liberation,fixed,monospace'; color:#000000;">pip uninstall</span><span style=" font-family:'Arial,sans-serif'; color:#222222;"> делает именно то, о чем говорит ее название: удаляет себя из </span><span style=" font-family:'Andale Mono,Lucida Console,Monaco,Liberation,fixed,monospace'; color:#000000;">virtualenv</span><span style=" font-family:'Arial,sans-serif'; color:#222222;">. Затем мы устанавливаем разрабатываемую версию из репозитория перезагрузки по адресу http://dist.pinaxproject.com, чтобы получить разрабатываемую версию Pinax 0.9a2.dev1017.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Arial,sans-serif'; color:#222222; background-color:#ffffff;">Переходить на Web-сайт, загружать tar-архивы и создавать коды символических ссылок (symlink) на каталог site-packages не требуется. (Раньше я так и делал, и это вызывало много проблем.) Все это ваши пользователи получают благодаря хорошей сборке пакетов, публикации и управлению версиями созданного проекта.</span></p>
<p style=" margin-top:10px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><a href="https://www.ibm.com/developerworks/ru/library/os-pythonpackaging/#ibm-pcon"><span style=" font-family:'Arial,sans-serif'; font-weight:600; color:#745285;">В начало</span></a></p>
<p style=" margin-top:5px; margin-bottom:5px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><a name="N1017C"></a><span style=" font-family:'HelveticaNeue-Light,Helvetica Neue Light,Helvetica Neue,Helvetica,Arial'; font-size:x-large; font-weight:600; color:#000000; background-color:#ffffff;">З</span><span style=" font-family:'HelveticaNeue-Light,Helvetica Neue Light,Helvetica Neue,Helvetica,Arial'; font-size:x-large; font-weight:600; color:#000000; background-color:#ffffff;">аключение</span></p>
<p style=" margin-top:5px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Arial,sans-serif'; color:#222222; background-color:#ffffff;">Подводя итог, хотелось бы подчеркнуть, что потратить немного времени на изучение сборки пакетов окажется полезным в будущем. Благодаря простоте установки и стабильности благодаря управлению версиями, больше пользователей будут использовать ваш код. Используя шаблон setup.py, предоставленный в</span><span style=" font-family:'Arial,sans-serif'; color:#222222;"> </span><a href="https://www.ibm.com/developerworks/ru/library/os-pythonpackaging/#resources"><span style=" font-family:'Arial,sans-serif'; text-decoration: underline; color:#745285;">Ресурсах</span></a><span style=" font-family:'Arial,sans-serif'; color:#222222;"> и описанный в данной статье, вы сможете быстро и легко добавить сборку пакетов в своем проекте. Обеспечение общения со своими пользователями за счет хорошо налаженного управления версиями позволит им отслеживать изменения в каждой версии. И, наконец, так как </span><span style=" font-family:'Andale Mono,Lucida Console,Monaco,Liberation,fixed,monospace'; color:#000000;">pip</span><span style=" font-family:'Arial,sans-serif'; color:#222222;"> и </span><span style=" font-family:'Andale Mono,Lucida Console,Monaco,Liberation,fixed,monospace'; color:#000000;">virtualenv</span><span style=" font-family:'Arial,sans-serif'; color:#222222;"> способствуют заимствованию кода, растет уверенность в публикуемых пакетах — будь то в PyPI или на собственных дистрибутивных серверах. Поэтому обязательно публикуйте проекты, которыми вы хотите поделиться с остальным миром.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Arial,sans-serif'; color:#222222; background-color:#ffffff;">Надеюсь, материала, изложенного в данной статье, достаточно для того, чтобы вы смогли приступить к работе. В разделе</span><span style=" font-family:'Arial,sans-serif'; color:#222222;"> </span><a href="https://www.ibm.com/developerworks/ru/library/os-pythonpackaging/#resources"><span style=" font-family:'Arial,sans-serif'; text-decoration: underline; color:#745285;">Ресурсы</span></a><span style=" font-family:'Arial,sans-serif'; color:#222222;"> приведены ссылки на документацию, которая может помочь вам глубже разобраться в упомянутых вопросах. Если у вас возникнут какие-либо вопросы, заходите на Freenode и ищите меня в таких разделах чата как #pinax и #django-social (по псевдониму &quot;paltman&quot;) или в Twitter (@paltman).</span></p></body></html>