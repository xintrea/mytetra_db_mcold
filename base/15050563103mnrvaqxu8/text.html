<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'DejaVu Sans'; font-size:11pt; font-weight:400; font-style:normal;">
<p style=" margin-top:36px; margin-bottom:0px; margin-left:36px; margin-right:36px; -qt-block-indent:0; text-indent:0px; line-height:28px; background-color:#f2f2f2;"><a name="TMpanel"></a><a href="https://tmfeed.ru/?utm_source=tm_habrahabr&amp;utm_medium=tm_top_panel&amp;utm_campaign=tm_promo"><span style=" font-family:'arial,sans-serif'; font-size:8.25pt; text-decoration: underline; color:#077fcc; background-color:transparent;">T</span></a><span style=" font-family:'arial,sans-serif'; font-size:8.25pt; color:#077fcc; background-color:transparent;">M Feed</span><a href="https://habrahabr.ru/?utm_source=tm_habrahabr&amp;utm_medium=tm_top_panel&amp;utm_campaign=tm_promo"><span style=" font-family:'arial,sans-serif'; font-size:8.25pt; text-decoration: underline; color:#000000; background-color:transparent;">Хабрахабр</span></a><a href="https://geektimes.ru/?utm_source=tm_habrahabr&amp;utm_medium=tm_top_panel&amp;utm_campaign=tm_promo"><span style=" font-family:'arial,sans-serif'; font-size:8.25pt; text-decoration: underline; color:#077fcc; background-color:transparent;">Geektimes</span></a><a href="https://toster.ru/?utm_source=tm_habrahabr&amp;utm_medium=tm_top_panel&amp;utm_campaign=tm_promo"><span style=" font-family:'arial,sans-serif'; font-size:8.25pt; text-decoration: underline; color:#077fcc; background-color:transparent;">Тостер</span></a><a href="https://moikrug.ru/?utm_source=tm_habrahabr&amp;utm_medium=tm_top_panel&amp;utm_campaign=tm_promo"><span style=" font-family:'arial,sans-serif'; font-size:8.25pt; text-decoration: underline; color:#077fcc; background-color:transparent;">Мой круг</span></a><a href="https://freelansim.ru/?utm_source=tm_habrahabr&amp;utm_medium=tm_top_panel&amp;utm_campaign=tm_promo"><span style=" font-family:'arial,sans-serif'; font-size:8.25pt; text-decoration: underline; color:#077fcc; background-color:transparent;">Фрилансим</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:126px; margin-right:36px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'arial,sans-serif'; font-size:8.25pt; color:#999999;">Мегапосты:</span><span style=" font-family:'arial,sans-serif'; font-size:8.25pt; color:#333333;"> </span><a href="http://bit.ly/2eZtaO8"><span style=" font-family:'arial,sans-serif'; font-size:8.25pt; text-decoration: underline; color:#3c86ee; background-color:transparent;">Доставляя счастье</span></a><a href="https://habrahabr.ru/article/330390/"><span style=" font-family:'arial,sans-serif'; font-size:8.25pt; text-decoration: underline; color:#c8a2c8; background-color:transparent;">Аренда для интроверта</span></a><a href="https://habrahabr.ru/article/336146/"><span style=" font-family:'arial,sans-serif'; font-size:8.25pt; text-decoration: underline; color:#31b007; background-color:transparent;">IoT и AI в финансах</span></a></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#333333; background-color:#ffffff;" style=" margin-top:0px; margin-bottom:0px; margin-left:36px; margin-right:64px; -qt-block-indent:0; text-indent:0px;"><a href="https://habrahabr.ru/"><span style=" font-family:'Fira Sans,sans-serif'; font-size:14px; font-weight:496; text-decoration: underline; color:#838a92; background-color:transparent;">Публикации</span></a></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#333333;" style=" margin-top:0px; margin-bottom:0px; margin-left:36px; margin-right:64px; -qt-block-indent:0; text-indent:0px;"><a href="https://habrahabr.ru/users/"><span style=" font-family:'Fira Sans,sans-serif'; font-size:14px; font-weight:496; text-decoration: underline; color:#838a92; background-color:transparent;">Пользователи</span></a></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#333333;" style=" margin-top:0px; margin-bottom:0px; margin-left:36px; margin-right:64px; -qt-block-indent:0; text-indent:0px;"><a href="https://habrahabr.ru/hubs/"><span style=" font-family:'Fira Sans,sans-serif'; font-size:14px; font-weight:496; text-decoration: underline; color:#838a92; background-color:transparent;">Хабы</span></a></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#333333;" style=" margin-top:0px; margin-bottom:0px; margin-left:36px; margin-right:64px; -qt-block-indent:0; text-indent:0px;"><a href="https://habrahabr.ru/companies/"><span style=" font-family:'Fira Sans,sans-serif'; font-size:14px; font-weight:496; text-decoration: underline; color:#838a92; background-color:transparent;">Компании</span></a></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#333333;" style=" margin-top:0px; margin-bottom:0px; margin-left:36px; margin-right:36px; -qt-block-indent:0; text-indent:0px;"><a href="https://habrahabr.ru/sandbox/"><span style=" font-family:'Fira Sans,sans-serif'; font-size:14px; font-weight:496; text-decoration: underline; color:#838a92; background-color:transparent;">Песочница</span></a></li></ul>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:36px; margin-right:36px; -qt-block-indent:0; text-indent:0px;"><a name="login"></a><a href="https://habrahabr.ru/auth/login/"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; font-weight:496; text-decoration: underline; color:#000000; background-color:transparent;">В</span></a><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; font-weight:496; color:#000000; background-color:transparent;">ойти</span><a href="https://habrahabr.ru/auth/register/"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; font-weight:496; text-decoration: underline; color:#000000; background-color:#65a3be;">Регистрация</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image28936.png" /><a name="post_186608"></a><a href="https://habrahabr.ru/users/begezavr/"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; font-weight:496; text-decoration: underline; color:#548eaa; background-color:transparent;">b</span></a><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; font-weight:496; color:#548eaa; background-color:transparent;">egezavr</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; font-weight:496; color:#5f5f5f;">15 июля 2013 в 13:00</span><a href="https://habrahabr.ru/flows/develop/"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; font-weight:496; text-decoration: underline; color:#548eaa; background-color:transparent;">Разработка</span></a></p>
<p style=" margin-top:0px; margin-bottom:11px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Fira Sans,sans-serif'; font-size:8.25pt; font-weight:496; color:#343434;">Руководство по магическим методам в Питоне</span></p>
<p style=" margin-top:0px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f5f3f8;"><a href="http://www.rafekettler.com/magicmethods.html"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; text-decoration: underline; color:#6864a3; background-color:transparent;">http://www.rafekettler.com/magicmethods.html</span></a></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#5e6973;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:8px; -qt-block-indent:0; text-indent:0px;"><a href="https://habrahabr.ru/hub/python/"><span style=" font-size:13px; text-decoration: underline; color:#0000ff; background-color:transparent;">Python</span></a></li></ul>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#333333;" style=" margin-top:7px; margin-bottom:0px; margin-left:0px; margin-right:8px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:12px; color:#6667a3;">Перевод</span></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#333333;" style=" margin-top:0px; margin-bottom:4px; margin-left:0px; margin-right:8px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:12px; color:#6667a3;">Tutorial</span></li></ul>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.56%;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;">Это перевод 1.17 версии </span><a href="http://www.rafekettler.com/magicmethods.html"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; text-decoration: underline; color:#487284; background-color:transparent;">руководства</span></a><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;"> от Rafe Kettler.<br /><br /><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:32px;"><span style=" font-family:'Fira Sans,sans-serif'; font-size:8.25pt; font-weight:496; color:#222222;">Содержание</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;"><br /></span></p>
<ol style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><a href="http://habrahabr.ru/post/186608/#intro"><span style=" font-size:16px; text-decoration: underline; color:#487284; background-color:transparent;">Вступление</span></a></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><a href="http://habrahabr.ru/post/186608/#construction"><span style=" font-size:16px; text-decoration: underline; color:#487284; background-color:transparent;">Конструирование и инициализация</span></a></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><a href="http://habrahabr.ru/post/186608/#operators"><span style=" font-size:16px; text-decoration: underline; color:#487284; background-color:transparent;">Переопределение операторов на произвольных классах</span></a></li>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 2;"><li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:9px; margin-bottom:0px; margin-left:60px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><a href="http://habrahabr.ru/post/186608/#comparisons"><span style=" font-size:16px; text-decoration: underline; color:#487284; background-color:transparent;">Магические методы сравнения</span></a></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:60px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><a href="http://habrahabr.ru/post/186608/#numeric"><span style=" font-size:16px; text-decoration: underline; color:#487284; background-color:transparent;">Числовые магический методы</span></a></li></ul>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><a href="http://habrahabr.ru/post/186608/#representations"><span style=" font-size:16px; text-decoration: underline; color:#487284; background-color:transparent;">Представление своих классов</span></a></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><a href="http://habrahabr.ru/post/186608/#access"><span style=" font-size:16px; text-decoration: underline; color:#487284; background-color:transparent;">Контроль доступа к атрибутам</span></a></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><a href="http://habrahabr.ru/post/186608/#sequence"><span style=" font-size:16px; text-decoration: underline; color:#487284; background-color:transparent;">Создание произвольных последовательностей</span></a></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><a href="http://habrahabr.ru/post/186608/#reflection"><span style=" font-size:16px; text-decoration: underline; color:#487284; background-color:transparent;">Отражение</span></a></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><a href="http://habrahabr.ru/post/186608/#callable"><span style=" font-size:16px; text-decoration: underline; color:#487284; background-color:transparent;">Вызываемые объекты</span></a></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><a href="http://habrahabr.ru/post/186608/#context"><span style=" font-size:16px; text-decoration: underline; color:#487284; background-color:transparent;">Менеджеры контекста</span></a></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><a href="http://habrahabr.ru/post/186608/#abcs"><span style=" font-size:16px; text-decoration: underline; color:#487284; background-color:transparent;">Абстрактные базовые классы</span></a></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><a href="http://habrahabr.ru/post/186608/#descriptor"><span style=" font-size:16px; text-decoration: underline; color:#487284; background-color:transparent;">Построение дескрипторов</span></a></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><a href="http://habrahabr.ru/post/186608/#copying"><span style=" font-size:16px; text-decoration: underline; color:#487284; background-color:transparent;">Копирование</span></a></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><a href="http://habrahabr.ru/post/186608/#pickling"><span style=" font-size:16px; text-decoration: underline; color:#487284; background-color:transparent;">Использование модуля pickle на своих объектах</span></a></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><a href="http://habrahabr.ru/post/186608/#conclusion"><span style=" font-size:16px; text-decoration: underline; color:#487284; background-color:transparent;">Заключение</span></a></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><a href="http://habrahabr.ru/post/186608/#appendix1"><span style=" font-size:16px; text-decoration: underline; color:#487284; background-color:transparent;">Приложение 1: Как вызывать магические методы</span></a></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><a href="http://habrahabr.ru/post/186608/#appendix2"><span style=" font-size:16px; text-decoration: underline; color:#487284; background-color:transparent;">Приложение 2: Изменения в Питоне 3</span></a></li></ol>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;"><br /><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:32px;"><a name="intro"></a><span style=" font-family:'Fira Sans,sans-serif'; font-size:8.25pt; font-weight:496; color:#222222;">В</span><span style=" font-family:'Fira Sans,sans-serif'; font-size:8.25pt; font-weight:496; color:#222222;">ступление</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;"><br />Что такое магические методы? Они всё в объектно-ориентированном Питоне. Это специальные методы, с помощью которых вы можете добавить в ваши классы «магию». Они всегда обрамлены двумя нижними подчеркиваниями (например, </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">__init__</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;"> или </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">__lt__</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;">). Ещё, они не так хорошо документированны, как хотелось бы. Все магические методы описаны в документации, но весьма беспорядочно и почти безо всякой организации. Поэтому, чтобы исправить то, что я воспринимаю как недостаток документации Питона, я собираюсь предоставить больше информации о магических методах, написанной на понятном языке и обильно снабжённой примерами. Надеюсь, это руководство вам понравится. Используйте его как обучающий материал, памятку или полное описание. Я просто постарался как можно понятнее описать магические методы.</span><a name="habracut"></a><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;"><br /></span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;"><br /><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:32px;"><a name="construction"></a><span style=" font-family:'Fira Sans,sans-serif'; font-size:8.25pt; font-weight:496; color:#222222;">К</span><span style=" font-family:'Fira Sans,sans-serif'; font-size:8.25pt; font-weight:496; color:#222222;">онструирование и инициализация.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;"><br />Всем известен самый базовый магический метод, </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">__init__</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;">. С его помощью мы можем инициализировать объект. Однако, когда я пишу </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">x = SomeClass()</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;">, </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">__init__</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;"> не самое первое, что вызывается. На самом деле, экземпляр объекта создаёт метод </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">__new__</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;">, а затем аргументы передаются в инициализатор. На другом конце жизненного цикла объекта находится метод </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">__del__</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;">. Давайте подробнее рассмотрим эти три магических метода:<br /><br /></span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__new__(cls, [...)</span><span style=" font-size:16px;"><br />Это первый метод, который будет вызван при инициализации объекта. Он принимает в качестве параметров класс и потом любые другие аргументы, которые будут переданы в </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__init__</span><span style=" font-size:16px;">. </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__new__</span><span style=" font-size:16px;">используется весьма редко, но иногда бывает полезен, в частности, когда класс наследуется от неизменяемого (immutable) типа, такого как кортеж (tuple) или строка. Я не намерен очень детально останавливаться на </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__new__</span><span style=" font-size:16px;">, так как он не то чтобы очень часто нужен, но этот метод очень хорошо и детально описан в </span><a href="http://www.python.org/download/releases/2.2/descrintro/#__new__"><span style=" font-size:16px; text-decoration: underline; color:#487284; background-color:transparent;">документации</span></a><span style=" font-size:16px;">.<br /><br /></span></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__init__(self, [...)</span><span style=" font-size:16px;"><br />Инициализатор класса. Ему передаётся всё, с чем был вызван первоначальный конструктор (так, например, если мы вызываем </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">x = SomeClass(10, 'foo')</span><span style=" font-size:16px;">, </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__init__</span><span style=" font-size:16px;"> получит </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">10</span><span style=" font-size:16px;"> и </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">'foo'</span><span style=" font-size:16px;"> в качестве аргументов. </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__init__</span><span style=" font-size:16px;"> почти повсеместно используется при определении классов.<br /><br /></span></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__del__(self)</span><span style=" font-size:16px;"><br />Если </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__new__</span><span style=" font-size:16px;"> и </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__init__</span><span style=" font-size:16px;"> образуют конструктор объекта, </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__del__</span><span style=" font-size:16px;"> это его деструктор. Он не определяет поведение для выражения </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">del x</span><span style=" font-size:16px;"> (поэтому этот код не эквивалентен </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">x.__del__()</span><span style=" font-size:16px;">). Скорее, он определяет поведение объекта в то время, когда объект попадает в сборщик мусора. Это может быть довольно удобно для объектов, которые могут требовать дополнительных чисток во время удаления, таких как сокеты или файловыве объекты. Однако, нужно быть осторожным, так как нет гарантии, что </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__del__</span><span style=" font-size:16px;"> будет вызван, если объект продолжает жить, когда интерпретатор завершает работу. Поэтому </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__del__</span><span style=" font-size:16px;"> не может служить заменой для хороших программистских практик (всегда завершать соединение, если закончил с ним работать и тому подобное). Фактически, из-за отсутствия гарантии вызова, </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__del__</span><span style=" font-size:16px;"> не должен использоваться почти никогда; используйте его с осторожностью!<br /><br /></span><span style=" font-size:16px; font-weight:600;">Замечание от переводчика:</span><span style=" font-size:16px;"> </span><a href="https://habrahabr.ru/users/svetlov/"><span style=" font-size:16px; text-decoration: underline; color:#487284; background-color:transparent;">svetlov</span></a><span style=" font-size:16px;"> </span><a href="https://habrahabr.ru/post/186608/#comment_6492862"><span style=" font-size:16px; text-decoration: underline; color:#487284; background-color:transparent;">отмечает</span></a><span style=" font-size:16px;">, что здесь автор ошибается, на самом деле </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__del__</span><span style=" font-size:16px;"> всегда вызывается по завершении работы интерпретатора.<br /><br /></span></li></ul>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;"><br />Соединим всё вместе, вот пример </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">__init__</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;"> и </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">__del__</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;"> в действии:<br /><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">from</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> os.path </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">import</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> join</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">class</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#c18401; background-color:#fbfdff;">FileObject</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">    </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#50a14f; background-color:#fbfdff;">'''Обёртка для файлового объекта, чтобы быть уверенным в том, что файл будет закрыт при удалении.'''</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#50a14f;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">    </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">def</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#4078f2; background-color:#fbfdff;">__init__</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">(self, filepath=</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#50a14f; background-color:#fbfdff;">'~'</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">, filename=</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#50a14f; background-color:#fbfdff;">'sample.txt'</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">):</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">        </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; font-style:italic; color:#a0a1a7; background-color:#fbfdff;"># открыть файл filename в filepath в режиме чтения и записи</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">        self.file = open(join(filepath, filename), </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#50a14f; background-color:#fbfdff;">'r+'</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">)</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">    </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">def</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#4078f2; background-color:#fbfdff;">__del__</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">(self):</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">        self.file.close()</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">        </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">del</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> self.file</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;"><br /><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:32px;"><a name="operators"></a><span style=" font-family:'Fira Sans,sans-serif'; font-size:8.25pt; font-weight:496; color:#222222;">П</span><span style=" font-family:'Fira Sans,sans-serif'; font-size:8.25pt; font-weight:496; color:#222222;">ереопределение операторов на произвольных классах</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;"><br />Одно из больших преимуществ использования магических методов в Питоне то, что они предоставляют простой способ заставить объекты вести себя по подобию встроенных типов. Это означает, что вы можете избежать унылого, нелогичного и нестандартного поведения базовых операторов. В некоторых языках обычное явление писать как-нибудь так:<br /><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">if</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> instance.equals(other_instance):</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">    </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; font-style:italic; color:#a0a1a7; background-color:#fbfdff;"># do something</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; font-style:italic; color:#a0a1a7;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;"><br />Вы, конечно, можете поступать так же и в Питоне, но это добавляет путаницы и ненужной многословности. Разные библиотеки могут по разному называть одни и те же операции, заставляя использующего их программиста совершать больше действий, чем необходимо. Используя силу магических методов, мы можем определить нужный метод (</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">__eq__</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;">, в этом случае), и так точно выразить, что мы </span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; font-style:italic; color:#222222;">имели в виду</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;">:<br /><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">if</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> instance == other_instance:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">    </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; font-style:italic; color:#a0a1a7; background-color:#fbfdff;">#do something</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; font-style:italic; color:#a0a1a7;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;"><br />Это одна из сильных сторон магических методов. Подавляющее большинство из них позволяют определить, что будут делать стандартные операторы, так что мы можем использовать операторы на своих классах так, как будто они встроенные типы.<br /><br /><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:28px;"><a name="comparisons"></a><span style=" font-family:'Fira Sans,sans-serif'; font-size:8.25pt; font-weight:496; color:#222222;">М</span><span style=" font-family:'Fira Sans,sans-serif'; font-size:8.25pt; font-weight:496; color:#222222;">агические методы сравнения</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;"><br />В Питоне уйма магических методов, созданных для определения интуитивного сравнения между объектами используя операторы, а не неуклюжие методы. Кроме того, они предоставляют способ переопределить поведение Питона по-умолчанию для сравнения объектов (по ссылке). Вот список этих методов и что они делают:<br /><br /></span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__cmp__(self, other)</span><span style=" font-size:16px;"><br />Самый базовый из методов сравнения. Он, в действительности, определяет поведение для всех операторов сравнения (&gt;, ==, !=, итд.), но не всегда так, как вам это нужно (например, если эквивалентность двух экземпляров определяется по одному критерию, а то что один больше другого по какому-нибудь другому). </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__cmp__</span><span style=" font-size:16px;"> должен вернуть отрицательное число, если </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">self &lt; other</span><span style=" font-size:16px;">, ноль, если </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">self == other</span><span style=" font-size:16px;">, и положительное число в случае </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">self &gt; other</span><span style=" font-size:16px;">. Но, обычно, лучше определить каждое сравнение, которое вам нужно, чем определять их всех в </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__cmp__</span><span style=" font-size:16px;">. Но </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__cmp__</span><span style=" font-size:16px;"> может быть хорошим способом избежать повторений и увеличить ясность, когда все необходимые сравнения оперерируют одним критерием.<br /><br /></span></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__eq__(self, other)</span><span style=" font-size:16px;"><br />Определяет поведение оператора равенства, </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">==</span><span style=" font-size:16px;">.<br /><br /></span></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__ne__(self, other)</span><span style=" font-size:16px;"><br />Определяет поведение оператора неравенства, </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">!=</span><span style=" font-size:16px;">.<br /><br /></span></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__lt__(self, other)</span><span style=" font-size:16px;"><br />Определяет поведение оператора меньше, </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">&lt;</span><span style=" font-size:16px;">.<br /><br /></span></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__gt__(self, other)</span><span style=" font-size:16px;"><br />Определяет поведение оператора больше, </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">&gt;</span><span style=" font-size:16px;">.<br /><br /></span></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__le__(self, other)</span><span style=" font-size:16px;"><br />Определяет поведение оператора меньше или равно, </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">&lt;=</span><span style=" font-size:16px;">.<br /><br /></span></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__ge__(self, other)</span><span style=" font-size:16px;"><br />Определяет поведение оператора больше или равно, </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">&gt;=</span><span style=" font-size:16px;">.<br /><br /></span></li></ul>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;"><br />Для примера расммотрим класс, описывающий слово. Мы можем сравнивать слова лексиграфически (по алфавиту), что является дефолтным поведением при сравнении строк, но можем захотеть использовать при сравнении какой-нибудь другой критерий, такой, как длина или количество слогов. В этом примере мы будем сравнивать по длине. Вот реализация:<br /><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">class</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#c18401; background-color:#fbfdff;">Word</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">(str):</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">    </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#50a14f; background-color:#fbfdff;">'''Класс для слов, определяющий сравнение по длине слов.'''</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#50a14f;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">    </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">def</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#4078f2; background-color:#fbfdff;">__new__</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">(cls, word):</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">        </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; font-style:italic; color:#a0a1a7; background-color:#fbfdff;"># Мы должны использовать __new__, так как тип str неизменяемый</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">        </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; font-style:italic; color:#a0a1a7; background-color:#fbfdff;"># и мы должны инициализировать его раньше (при создании)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">        </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">if</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#50a14f; background-color:#fbfdff;">' '</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">in</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> word:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">            </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">print</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#50a14f; background-color:#fbfdff;">&quot;Value contains spaces. Truncating to first space.&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">            word = word[:word.index(</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#50a14f; background-color:#fbfdff;">' '</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">)] </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; font-style:italic; color:#a0a1a7; background-color:#fbfdff;"># Теперь Word это все символы до первого пробела</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">        </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">return</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> str.__new__(cls, word)</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">    </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">def</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#4078f2; background-color:#fbfdff;">__gt__</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">(self, other):</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">        </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">return</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> len(self) &gt; len(other)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">    </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">def</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#4078f2; background-color:#fbfdff;">__lt__</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">(self, other):</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">        </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">return</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> len(self) &lt; len(other)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">    </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">def</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#4078f2; background-color:#fbfdff;">__ge__</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">(self, other):</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">        </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">return</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> len(self) &gt;= len(other)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">    </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">def</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#4078f2; background-color:#fbfdff;">__le__</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">(self, other):</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">        </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">return</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> len(self) &lt;= len(other)</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;"><br />Теперь мы можем создать два </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">Word</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;"> (при помощи </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">Word('foo')</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;"> и </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">Word('bar')</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;">) и сравнить их по длине. Заметьте, что мы не определяли </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">__eq__</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;"> и </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">__ne__</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;">, так как это приведёт к странному поведению (например, </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">Word('foo') == Word('bar')</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;"> будет расцениваться как истина). В этом нет смысла при тестировании на эквивалентность, основанную на длине, поэтому мы оставляем стандартную проверку на эквивалентность от </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">str</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;">.<br />Сейчас, кажется, удачное время упомянуть, что вы не должны определять каждый из магических методов сравнения, чтобы полностью охватить все сравнения. Стандартная библиотека любезно предоставляет нам класс-декторатор в модуле </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">functools</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;">, который и определит все сравнивающие методы, от вас достаточно определить только </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">__eq__</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;"> и ещё один (</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">__gt__</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;">, </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">__lt__</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;"> и т.п.) Эта возможность доступна начиная с 2.7 версии Питона, но если это вас устраивает, вы сэкономите кучу времени и усилий. Для того, чтобы задействовать её, поместите </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">@total_ordering</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;"> над вашим определением класса.<br /><br /><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:28px;"><a name="numeric"></a><span style=" font-family:'Fira Sans,sans-serif'; font-size:8.25pt; font-weight:496; color:#222222;">Ч</span><span style=" font-family:'Fira Sans,sans-serif'; font-size:8.25pt; font-weight:496; color:#222222;">исловые магические методы</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;"><br />Точно так же, как вы можете определить, каким образом ваши объекты будут сравниваться операторами сравнения, вы можете определить их поведение для числовых операторов. Приготовтесь, друзья, их много. Для лучшей организации, я разбил числовые магические методы на 5 категорий: унарные операторы, обычные арифметические операторы, отражённые арифметические операторы (подробности позже), составные присваивания и преобразования типов.<br /><br /><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:28px;"><span style=" font-family:'Fira Sans,sans-serif'; font-size:8.25pt; font-weight:496; color:#222222;">Унарные операторы и функции</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;"><br />Унарные операторы и функции имеют только один операнд — отрицание, абсолютное значение, и так далее.<br /><br /></span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__pos__(self)</span><span style=" font-size:16px;"><br />Определяет поведение для унарного плюса (</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">+some_object</span><span style=" font-size:16px;">)<br /><br /></span></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__neg__(self)</span><span style=" font-size:16px;"><br />Определяет поведение для отрицания(</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">-some_object</span><span style=" font-size:16px;">)<br /><br /></span></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__abs__(self)</span><span style=" font-size:16px;"><br />Определяет поведение для встроенной функции </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">abs()</span><span style=" font-size:16px;">.<br /><br /></span></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__invert__(self)</span><span style=" font-size:16px;"><br />Определяет поведение для инвертирования оператором </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">~</span><span style=" font-size:16px;">. Для объяснения что он делает смотри </span><a href="http://en.wikipedia.org/wiki/Bitwise_operation#NOT"><span style=" font-size:16px; text-decoration: underline; color:#487284; background-color:transparent;">статью в Википедии о бинарных операторах</span></a><span style=" font-size:16px;">.<br /><br /></span></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__round__(self, n)</span><span style=" font-size:16px;"><br />Определяет поведение для встроенной функции </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">round()</span><span style=" font-size:16px;">. </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">n</span><span style=" font-size:16px;"> это число знаков после запятой, до которого округлить.<br /><br /></span></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__floor__(self)</span><span style=" font-size:16px;"><br />Определяет поведение для </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">math.floor()</span><span style=" font-size:16px;">, то есть, округления до ближайшего меньшего целого.<br /><br /></span></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__ceil__(self)</span><span style=" font-size:16px;"><br />Определяет поведение для </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">math.ceil()</span><span style=" font-size:16px;">, то есть, округления до ближайшего большего целого.<br /><br /></span></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__trunc__(self)</span><span style=" font-size:16px;"><br />Определяет поведение для </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">math.trunc()</span><span style=" font-size:16px;">, то есть, обрезания до целого.<br /><br /></span></li></ul>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;"><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:28px;"><span style=" font-family:'Fira Sans,sans-serif'; font-size:8.25pt; font-weight:496; color:#222222;">Обычные арифметические операторы</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;"><br />Теперь рассмотрим обычные бинарные операторы (и ещё пару функций): +, -, * и похожие. Они, по большей части, отлично сами себя описывают.<br /><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#222222;">__add__(self, other)<br />Сложение.<br /><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#222222;">__sub__(self, other)<br />Вычитание.<br /><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#222222;">__mul__(self, other)<br />Умножение.<br /><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#222222;">__floordiv__(self, other)<br />Целочисленное деление, оператор //.<br /><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#222222;">__div__(self, other)<br />Деление, оператор /.<br /><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#222222;">__truediv__(self, other)<br />Правильное деление. Заметьте, что это работает только когда используется from __future__ import division.<br /><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#222222;">__mod__(self, other)<br />Остаток от деления, оператор %.<br /><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#222222;">__divmod__(self, other)<br />Определяет поведение для встроенной функции divmod().<br /><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#222222;">__pow__<br />Возведение в степень, оператор **.<br /><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#222222;">__lshift__(self, other)<br />Двоичный сдвиг влево, оператор &lt;&lt;.<br /><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#222222;">__rshift__(self, other)<br />Двоичный сдвиг вправо, оператор &gt;&gt;.<br /><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#222222;">__and__(self, other)<br />Двоичное И, оператор &amp;.<br /><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#222222;">__or__(self, other)<br />Двоичное ИЛИ, оператор |.<br /><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#222222;">__xor__(self, other)<br />Двоичный xor, оператор ^.<br /><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#222222;"><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#222222;">Отражённые арифметические операторы</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;"><br />Помните как я сказал, что собираюсь остановиться на отражённой арифметике подробнее? Вы могли подумать, что это какая-то большая, страшная и непонятная концепция. На самом деле всё очень просто. Вот пример:<br /><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">some_object + other</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;"><br />Это «обычное» сложение. Единственное, чем отличается эквивалентное отражённое выражение, это порядок слагаемых:<br /><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">other + some_object</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;"><br />Таким образом, все эти магические методы делают то же самое, что и их обычные версии, за исключением выполнения операции с </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">other</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;"> в качестве первого операнда и </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">self</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;"> в качестве второго. В большинстве случаев, результат отражённой операции такой же, как её обычный эквивалент, поэтому при определении </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">__radd__</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;"> вы можете ограничиться вызовом </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">__add__</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;"> да и всё. Заметьте, что объект слева от оператора (</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">other</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;"> в примере) не должен иметь обычной неотражённой версии этого метода. В нашем примере, </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">some_object.__radd__</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;"> будет вызван только если в </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">other</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;"> не определён </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">__add__</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;">.<br /><br /></span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__radd__(self, other)</span><span style=" font-size:16px;"><br />Отражённое сложение.<br /><br /></span></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__rsub__(self, other)</span><span style=" font-size:16px;"><br />Отражённое вычитание.<br /><br /></span></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__rmul__(self, other)</span><span style=" font-size:16px;"><br />Отражённое умножение.<br /><br /></span></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__rfloordiv__(self, other)</span><span style=" font-size:16px;"><br />Отражённое целочисленное деление, оператор </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">//</span><span style=" font-size:16px;">.<br /><br /></span></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__rdiv__(self, other)</span><span style=" font-size:16px;"><br />Отражённое деление, оператор </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">/</span><span style=" font-size:16px;">.<br /><br /></span></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__rtruediv__(self, other)</span><span style=" font-size:16px;"><br />Отражённое </span><span style=" font-size:16px; font-style:italic;">правильное</span><span style=" font-size:16px;"> деление. Заметьте, что работает только когда используется </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">from __future__ import division</span><span style=" font-size:16px;">.<br /><br /></span></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__rmod__(self, other)</span><span style=" font-size:16px;"><br />Отражённый остаток от деления, оператор </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">%</span><span style=" font-size:16px;">.<br /><br /></span></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__rdivmod__(self, other)</span><span style=" font-size:16px;"><br />Определяет поведение для встроенной функции </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">divmod()</span><span style=" font-size:16px;">, когда вызывается </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">divmod(other, self)</span><span style=" font-size:16px;">.<br /><br /></span></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__rpow__</span><span style=" font-size:16px;"><br />Отражённое возведение в степерь, оператор </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">**</span><span style=" font-size:16px;">.<br /><br /></span></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__rlshift__(self, other)</span><span style=" font-size:16px;"><br />Отражённый двоичный сдвиг влево, оператор </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">&lt;&lt;</span><span style=" font-size:16px;">.<br /><br /></span></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__rrshift__(self, other)</span><span style=" font-size:16px;"><br />Отражённый двоичный сдвиг вправо, оператор </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">&gt;&gt;</span><span style=" font-size:16px;">.<br /><br /></span></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__rand__(self, other)</span><span style=" font-size:16px;"><br />Отражённое двоичное И, оператор </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">&amp;</span><span style=" font-size:16px;">.<br /><br /></span></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__ror__(self, other)</span><span style=" font-size:16px;"><br />Отражённое двоичное ИЛИ, оператор </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">|</span><span style=" font-size:16px;">.<br /><br /></span></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__rxor__(self, other)</span><span style=" font-size:16px;"><br />Отражённый двоичный xor, оператор </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">^</span><span style=" font-size:16px;">.<br /><br /><br /></span></li></ul>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:28px;"><span style=" font-family:'Fira Sans,sans-serif'; font-size:8.25pt; font-weight:496; color:#222222;">Составное присваивание</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;"><br />В Питоне широко представлены и магические методы для составного присваивания. Вы скорее всего уже знакомы с составным присваиванием, это комбинация «обычного» оператора и присваивания. Если всё ещё непонятно, вот пример:<br /><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">x = </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#986801; background-color:#fbfdff;">5</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">x += </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#986801; background-color:#fbfdff;">1</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; font-style:italic; color:#a0a1a7; background-color:#fbfdff;"># другими словами x = x + 1</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; font-style:italic; color:#a0a1a7;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;"><br />Каждый из этих методов должен возвращать значение, которое будет присвоено переменной слева (например, для </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">a += b</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;">, </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">__iadd__</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;"> должен вернуть </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">a + b</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;">, что будет присвоено </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">a</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;">). Вот список:<br /><br /></span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__iadd__(self, other)</span><span style=" font-size:16px;"><br />Сложение с присваиванием.<br /><br /></span></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__isub__(self, other)</span><span style=" font-size:16px;"><br />Вычитание с присваиванием.<br /><br /></span></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__imul__(self, other)</span><span style=" font-size:16px;"><br />Умножение с присваиванием.<br /><br /></span></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__ifloordiv__(self, other)</span><span style=" font-size:16px;"><br />Целочисленное деление с присваиванием, оператор </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">//=</span><span style=" font-size:16px;">.<br /><br /></span></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__idiv__(self, other)</span><span style=" font-size:16px;"><br />Деление с присваиванием, оператор </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">/=</span><span style=" font-size:16px;">.<br /><br /></span></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__itruediv__(self, other)</span><span style=" font-size:16px;"><br /></span><span style=" font-size:16px; font-style:italic;">Правильное</span><span style=" font-size:16px;"> деление с присваиванием. Заметьте, что работает только если используется </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">from __future__ import division</span><span style=" font-size:16px;">.<br /><br /></span></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__imod_(self, other)</span><span style=" font-size:16px;"><br />Остаток от деления с присваиванием, оператор </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">%=</span><span style=" font-size:16px;">.<br /><br /></span></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__ipow__</span><span style=" font-size:16px;"><br />Возведение в степерь с присваиванием, оператор </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">**=</span><span style=" font-size:16px;">.<br /><br /></span></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__ilshift__(self, other)</span><span style=" font-size:16px;"><br />Двоичный сдвиг влево с присваиванием, оператор </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">&lt;&lt;=</span><span style=" font-size:16px;">.<br /><br /></span></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__irshift__(self, other)</span><span style=" font-size:16px;"><br />Двоичный сдвиг вправо с присваиванием, оператор </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">&gt;&gt;=</span><span style=" font-size:16px;">.<br /><br /></span></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__iand__(self, other)</span><span style=" font-size:16px;"><br />Двоичное И с присваиванием, оператор </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">&amp;=</span><span style=" font-size:16px;">.<br /><br /></span></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__ior__(self, other)</span><span style=" font-size:16px;"><br />Двоичное ИЛИ с присваиванием, оператор </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">|=</span><span style=" font-size:16px;">.<br /><br /></span></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__ixor__(self, other)</span><span style=" font-size:16px;"><br />Двоичный xor с присваиванием, оператор </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">^=</span><span style=" font-size:16px;">.<br /><br /><br /></span></li></ul>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:28px;"><span style=" font-family:'Fira Sans,sans-serif'; font-size:8.25pt; font-weight:496; color:#222222;">Магические методы преобразования типов</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;"><br />Кроме того, в Питоне множество магических методов, предназначенных для определния поведения для встроенных функций преобразования типов, таких как </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">float()</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;">. Вот они все:<br /><br /></span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__int__(self)</span><span style=" font-size:16px;"><br />Преобразование типа в int.<br /><br /></span></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__long__(self)</span><span style=" font-size:16px;"><br />Преобразование типа в long.<br /><br /></span></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__float__(self)</span><span style=" font-size:16px;"><br />Преобразование типа в float.<br /><br /></span></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__complex__(self)</span><span style=" font-size:16px;"><br />Преобразование типа в комплексное число.<br /><br /></span></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__oct__(self)</span><span style=" font-size:16px;"><br />Преобразование типа в восьмеричное число.<br /><br /></span></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__hex__(self)</span><span style=" font-size:16px;"><br />Преобразование типа в шестнадцатиричное число.<br /><br /></span></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__index__(self)</span><span style=" font-size:16px;"><br />Преобразование типа к int, когда объект используется в срезах (выражения вида [start:stop:step]). Если вы определяете свой числовый тип, который может использоваться как индекс списка, вы должны определить </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__index__</span><span style=" font-size:16px;">.<br /><br /></span></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__trunc__(self)</span><span style=" font-size:16px;"><br />Вызывается при </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">math.trunc(self)</span><span style=" font-size:16px;">. Должен вернуть своё значение, обрезанное до целочисленного типа (обычно long).<br /><br /></span></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__coerce__(self, other)</span><span style=" font-size:16px;"><br />Метод для реализации арифметики с операндами разных типов. </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__coerce__</span><span style=" font-size:16px;"> должен вернуть </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">None</span><span style=" font-size:16px;">если преобразование типов невозможно. Если преобразование возможно, он должен вернуть пару (кортеж из 2-х элементов) из </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">self</span><span style=" font-size:16px;"> и </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">other</span><span style=" font-size:16px;">, преобразованные к одному типу.<br /><br /></span></li></ul>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;"><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:32px;"><a name="representations"></a><span style=" font-family:'Fira Sans,sans-serif'; font-size:8.25pt; font-weight:496; color:#222222;">П</span><span style=" font-family:'Fira Sans,sans-serif'; font-size:8.25pt; font-weight:496; color:#222222;">редставление своих классов</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;"><br />Часто бывает полезно представление класса в виде строки. В Питоне существует несколько методов, которые вы можете определить для настройки поведения встроенных функций при представлении вашего класса.<br /><br /></span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__str__(self)</span><span style=" font-size:16px;"><br />Определяет поведение функции </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">str()</span><span style=" font-size:16px;">, вызванной для экземпляра вашего класса.<br /><br /></span></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__repr__(self)</span><span style=" font-size:16px;"><br />Определяет поведение функции </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">repr()</span><span style=" font-size:16px;">, вызыванной для экземпляра вашего класса. Главное отличие от </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">str()</span><span style=" font-size:16px;"> в целевой аудитории. </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">repr()</span><span style=" font-size:16px;"> больше предназначен для машинно-ориентированного вывода (более того, это часто должен быть валидный код на Питоне), а </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">str()</span><span style=" font-size:16px;">предназначен для чтения людьми.<br /><br /></span></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__unicode__(self)</span><span style=" font-size:16px;"><br />Определяет поведение функции </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">unicode()</span><span style=" font-size:16px;">, вызыванной для экземпляра вашего класса. </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">unicode()</span><span style=" font-size:16px;">похож на </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">str()</span><span style=" font-size:16px;">, но возвращает строку в юникоде. Будте осторожны: если клиент вызывает </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">str()</span><span style=" font-size:16px;">на экземпляре вашего класса, а вы определили только </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__unicode__()</span><span style=" font-size:16px;">, то это не будет работать. Постарайтесь всегда определять </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__str__()</span><span style=" font-size:16px;"> для случая, когда кто-то не имеет такой роскоши как юникод.<br /><br /></span></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__format__(self, formatstr)</span><span style=" font-size:16px;"><br />Определяет поведение, когда экземпляр вашего класса используется в форматировании строк нового стиля. Например, </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">&quot;Hello, {0:abc}!&quot;.format(a)</span><span style=" font-size:16px;"> приведёт к вызову </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">a.__format__(&quot;abc&quot;)</span><span style=" font-size:16px;">. Это может быть полезно для определения ваших собственных числовых или строковых типов, которым вы можете захотеть предоставить какие-нибудь специальные опции форматирования.<br /><br /></span></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__hash__(self)</span><span style=" font-size:16px;"><br />Определяет поведение функции </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">hash()</span><span style=" font-size:16px;">, вызыванной для экземпляра вашего класса. Метод должен возвращать целочисленное значение, которое будет использоваться для быстрого сравнения ключей в словарях. Заметьте, что в таком случае обычно нужно определять и </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__eq__</span><span style=" font-size:16px;">тоже. Руководствуйтесь следующим правилом: </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">a == b</span><span style=" font-size:16px;"> подразумевает </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">hash(a) == hash(b)</span><span style=" font-size:16px;">.<br /><br /></span></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__nonzero__(self)</span><span style=" font-size:16px;"><br />Определяет поведение функции </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">bool()</span><span style=" font-size:16px;">, вызванной для экземпляра вашего класса. Должна вернуть True или False, в зависимости от того, когда вы считаете экземпляр соответствующим True или False.<br /><br /></span></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__dir__(self)</span><span style=" font-size:16px;"><br />Определяет поведение функции </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">dir()</span><span style=" font-size:16px;">, вызванной на экземпляре вашего класса. Этот метод должен возвращать пользователю список атрибутов. Обычно, определение </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__dir__</span><span style=" font-size:16px;"> не требуется, но может быть жизненно важно для интерактивного использования вашего класса, если вы переопределили </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__getattr__</span><span style=" font-size:16px;"> или </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__getattribute__</span><span style=" font-size:16px;"> (с которыми вы встретитесь в следующей части), или каким-либо другим образом динамически создаёте атрибуты.<br /><br /></span></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__sizeof__(self)</span><span style=" font-size:16px;"><br />Определяет поведение функции </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">sys.getsizeof()</span><span style=" font-size:16px;">, вызыванной на экземпляре вашего класса. Метод должен вернуть размер вашего объекта в байтах. Он главным образом полезен для классов, определённых в расширениях на C, но всё-равно полезно о нём знать.<br /><br /></span></li></ul>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;"><br />Мы почти закончили со скучной (и лишённой примеров) частью руководства по магическим методам. Теперь, когда мы рассмотрели самые базовые магические методы, пришло время перейти к более продвинутому материалу.<br /><br /><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:32px;"><a name="access"></a><span style=" font-family:'Fira Sans,sans-serif'; font-size:8.25pt; font-weight:496; color:#222222;">К</span><span style=" font-family:'Fira Sans,sans-serif'; font-size:8.25pt; font-weight:496; color:#222222;">онтроль доступа к атрибутам</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;"><br />Многие люди, пришедшие в Питон из других языков, жалуются на отсутствие настоящей инкапсуляции для классов (например, нет способа определить приватные атрибуты с публичными методами доступа). Это не совсем правда: просто многие вещи, связанные с инкапсуляцией, Питон реализует через «магию», а не явными модификаторами для методов и полей. Смотрите:<br /><br /></span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__getattr__(self, name)</span><span style=" font-size:16px;"><br />Вы можете определить поведение для случая, когда пользователь пытается обратиться к атрибуту, который не существует (совсем или пока ещё). Это может быть полезным для перехвата и перенаправления частых опечаток, предупреждения об использовании устаревших атрибутов (вы можете всё-равно вычислить и вернуть этот атрибут, если хотите), или хитро возвращать </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">AttributeError</span><span style=" font-size:16px;">, когда это вам нужно. Правда, этот метод вызывается только когда пытаются получить доступ к несуществующему атрибуту, поэтому это не очень хорошее решение для инкапсуляции.<br /><br /></span></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__setattr__(self, name, value)</span><span style=" font-size:16px;"><br />В отличии от </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__getattr__</span><span style=" font-size:16px;">, </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__setattr__</span><span style=" font-size:16px;"> решение для инкапсуляции. Этот метод позволяет вам определить поведение для присвоения значения атрибуту, независимо от того существует атрибут или нет. То есть, вы можете определить любые правила для любых изменений значения атрибутов. Впрочем, вы должны быть осторожны с тем, как использовать </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__setattr__</span><span style=" font-size:16px;">, смотрите пример нехорошего случая в конце этого списка.<br /><br /></span></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__delattr__</span><span style=" font-size:16px;"><br />Это то же, что и </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__setattr__</span><span style=" font-size:16px;">, но для удаления атрибутов, вместо установки значений. Здесь требуются те же меры предосторожности, что и в </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__setattr__</span><span style=" font-size:16px;"> чтобы избежать бесконечной рекурсии (вызов </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">del self.name</span><span style=" font-size:16px;"> в определении </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__delattr__</span><span style=" font-size:16px;"> вызовет бесконечную рекурсию).<br /><br /></span></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__getattribute__(self, name)</span><span style=" font-size:16px;"><br /></span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__getattribute__</span><span style=" font-size:16px;"> выглядит к месту среди своих коллег </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__setattr__</span><span style=" font-size:16px;"> и </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__delattr__</span><span style=" font-size:16px;">, но я бы не рекомендовал вам его использовать. </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__getattribute__</span><span style=" font-size:16px;"> может использоваться только с классами нового типа (в новых версиях Питона все классы нового типа, а в старых версиях вы можете получить такой класс унаследовавшись от </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">object</span><span style=" font-size:16px;">). Этот метод позволяет вам определить поведение для </span><span style=" font-size:16px; font-style:italic;">каждого</span><span style=" font-size:16px;"> случая доступа к атрибутам (а не только к несуществующим, как </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__getattr__(self, name)</span><span style=" font-size:16px;">). Он страдает от таких же проблем с бесконечной рекурсией, как и его коллеги (на этот раз вы можете вызывать </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__getattribute__</span><span style=" font-size:16px;"> у базового класса, чтобы их предотвратить). Он, так же, главным образом устраняет необходимость в </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__getattr__</span><span style=" font-size:16px;">, который в случае реализации </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__getattribute__</span><span style=" font-size:16px;"> может быть вызван только явным образом или в случае генерации исключения </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">AttributeError</span><span style=" font-size:16px;">. Вы конечно можете использовать этот метод (в конце концов, это ваш выбор), но я бы не рекомендовал, потому что случаев, когда он действительно полезен очень мало (намного реже нужно переопределять поведение при получении, а не при установке значения) и реализовать его без возможных ошибок очень сложно.<br /><br /></span></li></ul>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;"><br />Вы можете запросто получить проблему при определении любого метогда, управляющего доступом к атрибутам. Рассмотрим пример:<br /><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">def</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#4078f2; background-color:#fbfdff;">__setattr__</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">(self, name, value):</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">    self.name = value</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">    </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; font-style:italic; color:#a0a1a7; background-color:#fbfdff;"># это рекурсия, так как всякий раз, когда любому атрибуту присваивается значение,</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">    </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; font-style:italic; color:#a0a1a7; background-color:#fbfdff;"># вызывается  __setattr__().</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">    </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; font-style:italic; color:#a0a1a7; background-color:#fbfdff;"># тоесть, на самом деле это равнозначно self.__setattr__('name', value). </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">    </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; font-style:italic; color:#a0a1a7; background-color:#fbfdff;"># Так как метод вызывает сам себя, рекурсия продолжится бесконечно, пока всё не упадёт</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; font-style:italic; color:#a0a1a7;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">def</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#4078f2; background-color:#fbfdff;">__setattr__</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">(self, name, value):</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">    self.__dict__[name] = value </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; font-style:italic; color:#a0a1a7; background-color:#fbfdff;"># присваивание в словарь переменных класса</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">    </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; font-style:italic; color:#a0a1a7; background-color:#fbfdff;"># дальше определение произвольного поведения</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; font-style:italic; color:#a0a1a7;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;"><br />Ещё раз, мощь магических методов в Питоне невероятна, а с большой силой приходит и большая ответственность. Важно знать, как правильно использовать магические методы, ничего не ломая.<br /><br />Итак, что мы узнали об управлении доступом к атрибутам? Их не нужно использовать легкомысленно. На самом деле, они имеют склонность к чрезмерной мощи и нелогичности. Причина, по которой они всё-таки существуют, в удволетворении определённого желания: Питон склонен не запрещать плохие штуки полностью, а только усложнять их использование. Свобода первостепенна, поэтому вы на самом деле можете делать всё, что хотите. Вот пример использования методов контроля доступа (заметьте, что мы используем </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">super</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;">, так как не все классы имеют атрибут </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">__dict__</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;">):<br /><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">class</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#c18401; background-color:#fbfdff;">AccessCounter</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">(object):</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">    </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#50a14f; background-color:#fbfdff;">'''Класс, содержащий атрибут value и реализующий счётчик доступа к нему.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#50a14f; background-color:#fbfdff;">    Счётчик увеличивается каждый раз, когда меняется value.'''</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#50a14f;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">    </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">def</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#4078f2; background-color:#fbfdff;">__init__</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">(self, val):</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">        super(AccessCounter, self).__setattr__(</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#50a14f; background-color:#fbfdff;">'counter'</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">, </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#986801; background-color:#fbfdff;">0</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">        super(AccessCounter, self).__setattr__(</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#50a14f; background-color:#fbfdff;">'value'</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">, val)</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">    </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">def</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#4078f2; background-color:#fbfdff;">__setattr__</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">(self, name, value):</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">        </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">if</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> name == </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#50a14f; background-color:#fbfdff;">'value'</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">            super(AccessCounter, self).__setattr__(</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#50a14f; background-color:#fbfdff;">'counter'</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">, self.counter + </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#986801; background-color:#fbfdff;">1</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">        </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; font-style:italic; color:#a0a1a7; background-color:#fbfdff;"># Не будем делать здесь никаких условий.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">        </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; font-style:italic; color:#a0a1a7; background-color:#fbfdff;"># Если вы хотите предотвратить изменение других атрибутов,</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">        </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; font-style:italic; color:#a0a1a7; background-color:#fbfdff;"># выбросьте исключение AttributeError(name)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">        super(AccessCounter, self).__setattr__(name, value)</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">    </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">def</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#4078f2; background-color:#fbfdff;">__delattr__</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">(self, name):</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">        </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">if</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> name == </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#50a14f; background-color:#fbfdff;">'value'</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">            super(AccessCounter, self).__setattr__(</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#50a14f; background-color:#fbfdff;">'counter'</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">, self.counter + </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#986801; background-color:#fbfdff;">1</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">        super(AccessCounter, self).__delattr__(name)]</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;"><br /><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:32px;"><a name="sequence"></a><span style=" font-family:'Fira Sans,sans-serif'; font-size:8.25pt; font-weight:496; color:#222222;">С</span><span style=" font-family:'Fira Sans,sans-serif'; font-size:8.25pt; font-weight:496; color:#222222;">оздание произвольных последовательностей</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;"><br />В Питоне существует множество способов заставить ваши классы вести себя как встроенные последовательности (словари, кортежи, списки, строки и так далее). Это, безусловно, мои любимые магические методы, из-за до абсурда высокой степени контроля, которую они дают и той магии, от которой с экземплярами ваших классов вдруг начинает прекрасно работать целое множество глобальных функций. Но, до того как мы перейдём ко всяким хорошим вещам, мы должны знать о протоколах.<br /><br /><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:28px;"><span style=" font-family:'Fira Sans,sans-serif'; font-size:8.25pt; font-weight:496; color:#222222;">Протоколы</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;"><br />Теперь, когда речь зашла о создании собственных последовательностей в Питоне, пришло время поговорить о </span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; font-style:italic; color:#222222;">протоколах</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;">. Протоколы немного похожи на интерфейсы в других языках тем, что они предоставляют набор методов, которые вы должны реализовать. Однако, в Питоне протоколы абсолютно ни к чему не обязывают и не требуют обязательно реализовать какое-либо объявление. Наверное, они больше похожи на руководящие указания.<br /><br />Почему мы заговорили о протоколах? Потому, что реализация произвольных контейнерных типов в Питоне влечёт за собой использование некоторых из них. Во-первых, протокол для определения неизменяемых контейнеров: чтобы создать неизменяемый контейнер, вы должны только определить </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">__len__</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;"> и </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">__getitem__</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;"> (продробнее о них дальше). Протокол изменяемого контейнера требует того же, что и неизменяемого контейнера, плюс </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">__setitem__</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;"> и </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">__delitem__</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;">. И, наконец, если вы хотите, чтобы ваши объекты можно было перебирать итерацией, вы должны определить </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">__iter__</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;">, который возвращает итератор. Этот итератор должен соответствовать протоколу итератора, который требует методов </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">__iter__</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;">(возвращает самого себя) и </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">next</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;">.<br /><br /><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:28px;"><span style=" font-family:'Fira Sans,sans-serif'; font-size:8.25pt; font-weight:496; color:#222222;">Магия контейнеров</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;"><br />Без дальнейшего промедления, вот магические методы, используемые контейнерами:<br /><br /></span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__len__(self)</span><span style=" font-size:16px;"><br />Возвращает количество элементов в контейнере. Часть протоколов для изменяемого и неизменяемого контейнеров.<br /><br /></span></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__getitem__(self, key)</span><span style=" font-size:16px;"><br />Определяет поведение при доступе к элементу, используя синтаксис </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">self[key]</span><span style=" font-size:16px;">. Тоже относится и к протоколу изменяемых и к протоколу неизменяемых контейнеров. Должен выбрасывать соответствующие исключения: </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">TypeError</span><span style=" font-size:16px;"> если неправильный тип ключа и </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">KeyError</span><span style=" font-size:16px;"> если ключу не соответствует никакого значения.<br /><br /></span></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__setitem__(self, key, value)</span><span style=" font-size:16px;"><br />Определяет поведение при присваивании значения элементу, используя синтаксис </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">self[nkey] = value</span><span style=" font-size:16px;">. Часть протокола изменяемого контейнера. Опять же, вы должны выбрасывать </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">KeyError</span><span style=" font-size:16px;"> и </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">TypeError</span><span style=" font-size:16px;"> в соответсвующих случаях.<br /><br /></span></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__delitem__(self, key)</span><span style=" font-size:16px;"><br />Определяет поведение при удалении элемента (то есть </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">del self[key]</span><span style=" font-size:16px;">). Это часть только протокола для изменяемого контейнера. Вы должны выбрасывать соответствующее исключение, если ключ некорректен.<br /><br /></span></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__iter__(self)</span><span style=" font-size:16px;"><br />Должен вернуть итератор для контейнера. Итераторы возвращаются в множестве ситуаций, главным образом для встроенной функции </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">iter()</span><span style=" font-size:16px;"> и в случае перебора элементов контейнера выражением </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">for x in container:</span><span style=" font-size:16px;">. Итераторы сами по себе объекты и они тоже должны определять метод </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__iter__</span><span style=" font-size:16px;">, который возвращает </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">self</span><span style=" font-size:16px;">.<br /><br /></span></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__reversed__(self)</span><span style=" font-size:16px;"><br />Вызывается чтобы определить поведения для встроенной функции </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">reversed()</span><span style=" font-size:16px;">. Должен вернуть обратную версию последовательности. Реализуйте метод только если класс упорядоченный, как список или кортеж.<br /><br /></span></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__contains__(self, item)</span><span style=" font-size:16px;"><br /></span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__contains__</span><span style=" font-size:16px;"> предназначен для проверки принадлежности элемента с помощью </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">in</span><span style=" font-size:16px;"> и </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">not in</span><span style=" font-size:16px;">. Вы спросите, почему же это не часть протокола последовательности? Потому что когда </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__contains__</span><span style=" font-size:16px;">не определён, Питон просто перебирает всю последовательность элемент за элементом и возвращает </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">True</span><span style=" font-size:16px;"> если находит нужный.<br /><br /></span></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__missing__(self, key)</span><span style=" font-size:16px;"><br /></span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__missing__</span><span style=" font-size:16px;"> используется при наследовании от </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">dict</span><span style=" font-size:16px;">. Определяет поведение для для каждого случая, когда пытаются получить элемент по несуществующему ключу (так, например, если у меня есть словарь </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">d</span><span style=" font-size:16px;"> и я пишу </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">d[&quot;george&quot;]</span><span style=" font-size:16px;"> когда </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">&quot;george&quot;</span><span style=" font-size:16px;"> не является ключом в словаре, вызывается </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">d.__missing__(&quot;george&quot;)</span><span style=" font-size:16px;">).<br /><br /></span></li></ul>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;"><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:28px;"><span style=" font-family:'Fira Sans,sans-serif'; font-size:8.25pt; font-weight:496; color:#222222;">Пример</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;"><br />Для примера, давайте посмотрим на список, который реализует некоторые функциональные конструкции, которые вы могли встретить в других языках (Хаскеле, например).<br /><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">class</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#c18401; background-color:#fbfdff;">FunctionalList</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">    </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#50a14f; background-color:#fbfdff;">'''Класс-обёртка над списком с добавлением некоторой функциональной магии: head,</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#50a14f; background-color:#fbfdff;">    tail, init, last, drop, take.'''</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#50a14f;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">    </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">def</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#4078f2; background-color:#fbfdff;">__init__</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">(self, values=None):</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">        </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">if</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> values </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">is</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">None</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">            self.values = []</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">        </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">else</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">            self.values = values</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">    </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">def</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#4078f2; background-color:#fbfdff;">__len__</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">(self):</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">        </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">return</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> len(self.values)</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">    </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">def</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#4078f2; background-color:#fbfdff;">__getitem__</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">(self, key):</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">        </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; font-style:italic; color:#a0a1a7; background-color:#fbfdff;"># если значение или тип ключа некорректны, list выбросит исключение</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">        </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">return</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> self.values[key]</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">    </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">def</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#4078f2; background-color:#fbfdff;">__setitem__</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">(self, key, value):</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">        self.values[key] = value</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">    </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">def</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#4078f2; background-color:#fbfdff;">__delitem__</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">(self, key):</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">        </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">del</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> self.values[key]</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">    </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">def</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#4078f2; background-color:#fbfdff;">__iter__</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">(self):</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">        </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">return</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> iter(self.values)</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">    </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">def</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#4078f2; background-color:#fbfdff;">__reversed__</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">(self):</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">        </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">return</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> FunctionalList(reversed(self.values))</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">    </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">def</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#4078f2; background-color:#fbfdff;">append</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">(self, value):</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">        self.values.append(value)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">    </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">def</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#4078f2; background-color:#fbfdff;">head</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">(self):</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">        </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; font-style:italic; color:#a0a1a7; background-color:#fbfdff;"># получить первый элемент</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">        </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">return</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> self.values[</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#986801; background-color:#fbfdff;">0</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">]</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">    </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">def</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#4078f2; background-color:#fbfdff;">tail</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">(self):</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">        </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; font-style:italic; color:#a0a1a7; background-color:#fbfdff;"># получить все элементы после первого</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">        </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">return</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> self.values[</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#986801; background-color:#fbfdff;">1</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">:]</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">    </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">def</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#4078f2; background-color:#fbfdff;">init</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">(self):</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">        </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; font-style:italic; color:#a0a1a7; background-color:#fbfdff;"># получить все элементы кроме последнего</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">        </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">return</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> self.values[:</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#986801; background-color:#fbfdff;">-1</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">]</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">    </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">def</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#4078f2; background-color:#fbfdff;">last</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">(self):</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">        </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; font-style:italic; color:#a0a1a7; background-color:#fbfdff;"># получить последний элемент</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">        </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">return</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> self.values[</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#986801; background-color:#fbfdff;">-1</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">]</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">    </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">def</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#4078f2; background-color:#fbfdff;">drop</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">(self, n):</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">        </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; font-style:italic; color:#a0a1a7; background-color:#fbfdff;"># все элементы кроме первых n</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">        </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">return</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> self.values[n:]</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">    </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">def</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#4078f2; background-color:#fbfdff;">take</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">(self, n):</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">        </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; font-style:italic; color:#a0a1a7; background-color:#fbfdff;"># первые n элементов</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">        </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">return</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> self.values[:n]</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;"><br />Теперь у вас есть полезный (относительно) пример реализации своей собственной последовательности. Существуют, конечно, и куда более практичные реализации произвольных последовательностей, но большое их число уже реализовано в стандартной библиотеке (с батарейками в комплекте, да?), такие как </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">Counter</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;">, </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">OrderedDict</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;">, </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">NamedTuple</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;">.<br /><br /><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:32px;"><a name="reflection"></a><span style=" font-family:'Fira Sans,sans-serif'; font-size:8.25pt; font-weight:496; color:#222222;">О</span><span style=" font-family:'Fira Sans,sans-serif'; font-size:8.25pt; font-weight:496; color:#222222;">тражение</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;"><br />Вы можете контролировать и отражение, использующее встроенные функции </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">isinstance()</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;"> и </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">issubclass()</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;">, определив некоторые магические методы. Вот они:<br /><br /></span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__instancecheck__(self, instance)</span><span style=" font-size:16px;"><br />Проверяет, является ли экземлпяр членом вашего класса (</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">isinstance(instance, class)</span><span style=" font-size:16px;">, например.<br /><br /></span></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__subclasscheck__(self, subclass)</span><span style=" font-size:16px;"><br />Проверяет, является наследуется ли класс от вашего класса (</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">issubclass(subclass, class)</span><span style=" font-size:16px;">).<br /><br /></span></li></ul>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;"><br />Может показаться, что вариантов полезного использования этих магических методов немного и, возможно, это на самом деле так. Я не хочу тратить слишком много времени на магические методы отражения, не особо они и важные, но они отражают кое-что важное об объектно-ориентированном программировании в Питоне и о Питоне вообще: почти всегда существует простой способ что-либо сделать, даже если надобность в этом «что-либо» возникает очень редко. Эти магические методы могут не выглядеть полезными, но если они вам когда-нибудь понадобятся, вы будете рады вспомнить, что они есть (и для этого вы читаете настоящее руководство!).<br /><br /><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:32px;"><a name="callable"></a><span style=" font-family:'Fira Sans,sans-serif'; font-size:8.25pt; font-weight:496; color:#222222;">В</span><span style=" font-family:'Fira Sans,sans-serif'; font-size:8.25pt; font-weight:496; color:#222222;">ызываемые объекты</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;"><br />Как вы наверное уже знаете, в Питоне функции являются объектами первого класса. Это означает, что они могут быть переданы в функции или методы так же, как любые другие объекты. Это невероятно мощная особенность.<br /><br />Специальный магический метод позволяет экземплярам вашего класса вести себя так, как будто они функции, тоесть вы сможете «вызывать» их, передавать их в функции, которые принимают функции в качестве аргументов и так далее. Это другая удобная особенность, которая делает программирование на Питоне таким приятным.<br /><br /></span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__call__(self, [args...])</span><span style=" font-size:16px;"><br />Позволяет любому экземпляру вашего класса быть вызванным как-будто он функция. Главным образом это означает, что </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">x()</span><span style=" font-size:16px;"> означает то же, что и </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">x.__call__()</span><span style=" font-size:16px;">. Заметьте, </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__call__</span><span style=" font-size:16px;"> принимает произвольное число аргументов; то есть, вы можете определить </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__call__</span><span style=" font-size:16px;"> так же как любую другую функцию, принимающую столько аргументов, сколько вам нужно.<br /><br /></span></li></ul>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;"><br /></span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">__call__</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;">, в частности, может быть полезен в классах, чьи экземпляры часто изменяют своё состояние. «Вызвать» экземпляр может быть интуитивно понятным и элегантным способом изменить состояние объекта. Примером может быть класс, представляющий положение некоторого объекта на плоскости:<br /><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">class</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#c18401; background-color:#fbfdff;">Entity</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">    </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#50a14f; background-color:#fbfdff;">'''Класс, описывающий объект на плоскости. &quot;Вызываемый&quot;, чтобы обновить позицию объекта.'''</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#50a14f;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">    </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">def</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#4078f2; background-color:#fbfdff;">__init__</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">(self, size, x, y):</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">        self.x, self.y = x, y</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">        self.size = size</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">    </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">def</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#4078f2; background-color:#fbfdff;">__call__</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">(self, x, y):</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">        </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#50a14f; background-color:#fbfdff;">'''Изменить положение объекта.'''</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">        self.x, self.y = x, y</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">    </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; font-style:italic; color:#a0a1a7; background-color:#fbfdff;"># чик...</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; font-style:italic; color:#a0a1a7;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;"><br /><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:32px;"><a name="context"></a><span style=" font-family:'Fira Sans,sans-serif'; font-size:8.25pt; font-weight:496; color:#222222;">М</span><span style=" font-family:'Fira Sans,sans-serif'; font-size:8.25pt; font-weight:496; color:#222222;">енеджеры контекста</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;"><br />В Питоне 2.5 было представлено новое ключевое слово вместе с новым способом повторно использовать код, ключевое слово </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">with</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;">. Концепция менеджеров контекста не являлась новой для Питона (она была реализована раньше как часть библиотеки), но в </span><a href="http://www.python.org/dev/peps/pep-0343/"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; text-decoration: underline; color:#487284; background-color:transparent;">PEP 343</span></a><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;"> достигла статуса языковой конструкции. Вы могли уже видеть выражения с </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">with</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;">:<br /><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">with</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> open(</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#50a14f; background-color:#fbfdff;">'foo.txt'</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">) </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">as</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> bar:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">    </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; font-style:italic; color:#a0a1a7; background-color:#fbfdff;"># выполнение каких-нибудь действий с bar</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; font-style:italic; color:#a0a1a7;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;"><br />Менеджеры контекста позволяют выполнить какие-то действия для настройки или очистки, когда создание объекта обёрнуто в оператор </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">with</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;">. Поведение менеджера контекста определяется двумя магическими методами:<br /><br /></span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__enter__(self)</span><span style=" font-size:16px;"><br />Определяет, что должен сделать менеджер контекста в начале блока, созданного оператором </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">with</span><span style=" font-size:16px;">. Заметьте, что возвращаемое </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__enter__</span><span style=" font-size:16px;"> значение и есть то значение, с которым производится работа внутри </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">with</span><span style=" font-size:16px;">.<br /><br /></span></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__exit__(self, exception_type, exception_value, traceback)</span><span style=" font-size:16px;"><br />Определяет действия менеджера контекста после того, как блок будет выполнен (или прерван во время работы). Может использоваться для контроллирования исключений, чистки, любых действий которые должны быть выполнены незамедлительно после блока внутри with. Если блок выполнен успешно, </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">exception_type</span><span style=" font-size:16px;">, </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">exception_value</span><span style=" font-size:16px;">, и </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">traceback</span><span style=" font-size:16px;"> будут установлены в </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">None</span><span style=" font-size:16px;">. В другом случае вы сами выбираете, перехватывать ли исключение или предоставить это пользователю; если вы решили перехватить исключение, убедитесь, что </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__exit__</span><span style=" font-size:16px;"> возвращает </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">True</span><span style=" font-size:16px;"> после того как всё сказано и сделано. Если вы не хотите, чтобы исключение было перехвачено менеджером контекста, просто позвольте ему случиться.<br /><br /></span></li></ul>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;"><br /></span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">__enter__</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;"> и </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">__exit__</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;"> могут быть полезны для специфичных классов с хорошо описанным и распространённым поведением для их настройки и очистки ресурсов. Вы можете использовать эти методы и для создания общих менеджеров контекста для разных объектов. Вот пример:<br /><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">class</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#c18401; background-color:#fbfdff;">Closer</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">    </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#50a14f; background-color:#fbfdff;">'''Менеджер контекста для автоматического закрытия объекта вызовом метода close </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#50a14f; background-color:#fbfdff;">    в with-выражении.'''</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#50a14f;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">    </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">def</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#4078f2; background-color:#fbfdff;">__init__</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">(self, obj):</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">        self.obj = obj</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">    </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">def</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#4078f2; background-color:#fbfdff;">__enter__</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">(self):</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">        </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">return</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> self.obj </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; font-style:italic; color:#a0a1a7; background-color:#fbfdff;"># привязка к активному объекту with-блока</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; font-style:italic; color:#a0a1a7;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">    </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">def</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#4078f2; background-color:#fbfdff;">__exit__</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">(self, exception_type, exception_val, trace):</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">        </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">try</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">           self.obj.close()</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">        </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">except</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> AttributeError: </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; font-style:italic; color:#a0a1a7; background-color:#fbfdff;"># у объекта нет метода close</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">           </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">print</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#50a14f; background-color:#fbfdff;">'Not closable.'</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">           </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">return</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">True</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; font-style:italic; color:#a0a1a7; background-color:#fbfdff;"># исключение перехвачено</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; font-style:italic; color:#a0a1a7;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;"><br />Пример использования </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">Closer</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;"> с FTP-соединением (сокет, имеющий метод close):<br /><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#4078f2; background-color:#fbfdff;">&gt;&gt;&gt; </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">from</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> magicmethods </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">import</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> Closer</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#4078f2; background-color:#fbfdff;">&gt;&gt;&gt; </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">from</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> ftplib </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">import</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> FTP</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#4078f2; background-color:#fbfdff;">&gt;&gt;&gt; </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">with</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> Closer(FTP(</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#50a14f; background-color:#fbfdff;">'ftp.somesite.com'</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">)) </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">as</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> conn:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#4078f2; background-color:#fbfdff;">... </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">    conn.dir()</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">...</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; font-style:italic; color:#a0a1a7; background-color:#fbfdff;"># output omitted for brevity</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#4078f2; background-color:#fbfdff;">&gt;&gt;&gt; </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">conn.dir()</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; font-style:italic; color:#a0a1a7; background-color:#fbfdff;"># long AttributeError message, can't use a connection that's closed</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#4078f2; background-color:#fbfdff;">&gt;&gt;&gt; </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">with</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> Closer(int(</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#986801; background-color:#fbfdff;">5</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">)) </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">as</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> i:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#4078f2; background-color:#fbfdff;">... </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">    i += </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#986801; background-color:#fbfdff;">1</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">...</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">Not closable.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#4078f2; background-color:#fbfdff;">&gt;&gt;&gt; </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">i</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#986801; background-color:#fbfdff;">6</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#986801;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;"><br />Видите, как наша обёртка изящно управляется и с правильными и с неподходящими объектами. В этом сила менеджеров контекста и магических методов. Заметьте, что стандартная библиотека Питона включает модуль </span><a href="http://docs.python.org/library/contextlib.html"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; text-decoration: underline; color:#487284; background-color:transparent;">contextlib</span></a><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;">, который включает в себя </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">contextlib.closing()</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;"> — менеджер контекста, который делает приблизительно то же (без какой-либо обработки случая, когда объект не имеет метода </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">close()</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;">).<br /><br /><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:32px;"><a name="abcs"></a><span style=" font-family:'Fira Sans,sans-serif'; font-size:8.25pt; font-weight:496; color:#222222;">А</span><span style=" font-family:'Fira Sans,sans-serif'; font-size:8.25pt; font-weight:496; color:#222222;">бстрактные базовые классы</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;"><br />Смотри </span><a href="http://docs.python.org/2/library/abc.html"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; text-decoration: underline; color:#487284; background-color:transparent;">http://docs.python.org/2/library/abc.html</span></a><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;">.<br /><br /><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:32px;"><a name="descriptor"></a><span style=" font-family:'Fira Sans,sans-serif'; font-size:8.25pt; font-weight:496; color:#222222;">П</span><span style=" font-family:'Fira Sans,sans-serif'; font-size:8.25pt; font-weight:496; color:#222222;">остроение дескрипторов</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;"><br />Дескрипторы это такие классы, с помощью которых можно добавить свою логику к событиям доступа (получение, изменение, удаление) к атрибутам других объектов. Дескрипторы не подразумевается использовать сами по себе; скорее, предполагается, что ими будут владеть какие-нибудь связанные с ними классы. Дескрипторы могут быть полезны для построения объектно-ориентированных баз данных или классов, чьи атрибуты зависят друг от друга. В частности, дескрипторы полезны при представлении атрибутов в нескольких системах исчисления или каких-либо вычисляемых атрибутов (как расстояние от начальной точки до представленной атрибутом точки на сетке).<br /><br />Чтобы класс стал дескриптором, он должен реализовать по крайней мере один метод из </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">__get__</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;">, </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">__set__</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;"> или </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">__delete__</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;">. Давайте рассмотрим эти магические методы:<br /><br /></span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__get__(self, instance, instance_class)</span><span style=" font-size:16px;"><br />Определяет поведение при возвращении значения из дескриптора. </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">instance</span><span style=" font-size:16px;"> это объект, для чьего атрибута-дескриптора вызывается метод. </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">owner</span><span style=" font-size:16px;"> это тип (класс) объекта.<br /><br /></span></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__set__(self, instance, value)</span><span style=" font-size:16px;"><br />Определяет поведение при изменении значения из дескриптора. </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">instance</span><span style=" font-size:16px;"> это объект, для чьего атрибута-дескриптора вызывается метод. </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">value</span><span style=" font-size:16px;"> это значение для установки в дескриптор.<br /><br /></span></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__delete__(self, instance)</span><span style=" font-size:16px;"><br />Определяет поведение для удаления значения из дескриптора. </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">instance</span><span style=" font-size:16px;"> это объект, владеющий дескриптором.<br /><br /></span></li></ul>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;"><br />Теперь пример полезного использования дескрипторов: преобразование единиц измерения.<br /><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">class</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#c18401; background-color:#fbfdff;">Meter</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">(object):</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">    </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#50a14f; background-color:#fbfdff;">'''Дескриптор для метра.'''</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#50a14f;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">    </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">def</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#4078f2; background-color:#fbfdff;">__init__</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">(self, value=</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#986801; background-color:#fbfdff;">0.0</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">):</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">        self.value = float(value)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">    </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">def</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#4078f2; background-color:#fbfdff;">__get__</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">(self, instance, owner):</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">        </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">return</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> self.value</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">    </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">def</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#4078f2; background-color:#fbfdff;">__set__</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">(self, instance, value):</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">        self.value = float(value)</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">class</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#c18401; background-color:#fbfdff;">Foot</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">(object):</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">    </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#50a14f; background-color:#fbfdff;">'''Дескриптор для фута.'''</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#50a14f;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">    </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">def</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#4078f2; background-color:#fbfdff;">__get__</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">(self, instance, owner):</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">        </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">return</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> instance.meter * </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#986801; background-color:#fbfdff;">3.2808</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">    </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">def</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#4078f2; background-color:#fbfdff;">__set__</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">(self, instance, value):</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">        instance.meter = float(value) / </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#986801; background-color:#fbfdff;">3.2808</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#986801;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">class</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#c18401; background-color:#fbfdff;">Distance</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">(object):</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">    </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#50a14f; background-color:#fbfdff;">'''Класс, описывающий расстояние, содержит два дескриптора для футов и</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#50a14f; background-color:#fbfdff;">    метров.'''</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">    meter = Meter()</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">    foot = Foot()</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;"><br /><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:32px;"><a name="copying"></a><span style=" font-family:'Fira Sans,sans-serif'; font-size:8.25pt; font-weight:496; color:#222222;">К</span><span style=" font-family:'Fira Sans,sans-serif'; font-size:8.25pt; font-weight:496; color:#222222;">опирование</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;"><br />В Питоне оператор присваивания не копирует объекты, а только добавляет ещё одну ссылку. Но для коллекций, содержащих изменяемые элементы, иногда необходимо полноценное копирование, чтобы можно было менять элементы одной последовательности, не затрагивая другую. Здесь в игру и вступает </span><a href="http://docs.python.org/library/copy.html"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; text-decoration: underline; color:#487284; background-color:transparent;">copy</span></a><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;">. К счастью, модули в Питоне не обладают разумом, поэтому мы можем не беспокоиться что они вдруг начнут бесконтрольно копировать сами себя и вскоре линуксовые роботы заполонят всю планету, но мы должны сказать Питону как правильно копировать.<br /><br /></span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__copy__(self)</span><span style=" font-size:16px;"><br />Определяет поведение </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">copy.copy()</span><span style=" font-size:16px;"> для экземпляра вашего класса. </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">copy.copy()</span><span style=" font-size:16px;"> возвращает </span><span style=" font-size:16px; font-style:italic;">поверхностную копию</span><span style=" font-size:16px;"> вашего объекта — это означает, что хоть сам объект и создан заново, все его данные ссылаются на данные оригинального объекта. И при изменении данных нового объекта, изменения будут происходить и в оригинальном.<br /><br /></span></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__deepcopy__(self, memodict={})</span><span style=" font-size:16px;"><br />Определяет поведение </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">copy.deepcopy()</span><span style=" font-size:16px;"> для экземпляров вашего класса. </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">copy.deepcopy()</span><span style=" font-size:16px;">возвращает </span><span style=" font-size:16px; font-style:italic;">глубокую копию</span><span style=" font-size:16px;"> вашего объекта — копируются и объект </span><span style=" font-size:16px; font-style:italic;">и</span><span style=" font-size:16px;"> его данные. </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">memodict</span><span style=" font-size:16px;"> это кэш предыдущих скопированных объектов, он предназначен для оптимизации копирования и предотвращения бесконечной рекурсии, когда копируются рекурсивные структуры данных. Когда вы хотите полностью скопировать какой-нибудь конкретный атрибут, вызовите на нём </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">copy.deepcopy()</span><span style=" font-size:16px;"> с первым параметром </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">memodict</span><span style=" font-size:16px;">.<br /><br /></span></li></ul>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;"><br />Когда использовать эти магические методы? Как обычно — в любом случае, когда вам необходимо больше, чем стандартное поведение. Например, если вы пытаетесь скопировать объект, который содержит кэш как словарь (возможно, очень большой словарь), то может быть вам и не нужно копировать весь кэш, а обойтись всего одним в общей памяти объектов.<br /><br /><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:32px;"><a name="pickling"></a><span style=" font-family:'Fira Sans,sans-serif'; font-size:8.25pt; font-weight:496; color:#222222;">И</span><span style=" font-family:'Fira Sans,sans-serif'; font-size:8.25pt; font-weight:496; color:#222222;">спользование модуля pickle на своих объектах</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;"><br />Pickle это модуль для сериализации структур данных Питона и он может быть невероятно полезен, когда вам нужно сохранить состояние какого-либо объекта и восстановить его позже (обычно, в целях кэширования). Кроме того, это ещё и отличный источник переживаний и путаницы.<br /><br />Сериализация настолько важна, что кроме своего модуля (</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">pickle</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;">) имеет и свой собственный </span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; font-style:italic; color:#222222;">протокол</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;"> и свои магические методы. Но для начала о том, как сериализовать с помощью pickle уже существующие типы данных (спокойно пропускайте, если вы уже знаете).<br /><br /><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:28px;"><span style=" font-family:'Fira Sans,sans-serif'; font-size:8.25pt; font-weight:496; color:#222222;">Вкратце про сериализацию</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;"><br />Давайте погрузимся в сериализацию. Допустим, у вас есть словарь, который вы хотите сохранить и восстановить позже. Вы должны записать его содержимое в файл, тщательно убедившись, что пишете с правильным синтаксисом, потом восстановить его, или выполнив </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">exec()</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;">, или прочитав файл. Но это в лучшем случае рискованно: если вы храните важные данные в тексте, он может быть повреждён или изменён множеством способов, с целью обрушить вашу программу или, вообще, запустить какой-нибудь опасный код на вашем компьютере. Лучше использовать pickle:<br /><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">import</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> pickle</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">data = {</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#50a14f; background-color:#fbfdff;">'foo'</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">: [</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#986801; background-color:#fbfdff;">1</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">, </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#986801; background-color:#fbfdff;">2</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">, </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#986801; background-color:#fbfdff;">3</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">],</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">        </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#50a14f; background-color:#fbfdff;">'bar'</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">: (</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#50a14f; background-color:#fbfdff;">'Hello'</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">, </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#50a14f; background-color:#fbfdff;">'world!'</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">),</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">        </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#50a14f; background-color:#fbfdff;">'baz'</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">: </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">True</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">}</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">jar = open(</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#50a14f; background-color:#fbfdff;">'data.pkl'</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">, </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#50a14f; background-color:#fbfdff;">'wb'</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">pickle.dump(data, jar) </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; font-style:italic; color:#a0a1a7; background-color:#fbfdff;"># записать сериализованные данные в jar</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">jar.close()</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;"><br />И вот, спустя несколько часов, нам снова нужен наш словарь:<br /><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">import</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> pickle</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">pkl_file = open(</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#50a14f; background-color:#fbfdff;">'data.pkl'</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">, </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#50a14f; background-color:#fbfdff;">'rb'</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">) </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; font-style:italic; color:#a0a1a7; background-color:#fbfdff;"># открываем</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">data = pickle.load(pkl_file) </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; font-style:italic; color:#a0a1a7; background-color:#fbfdff;"># сохраняем в переменную</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">print</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> data</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">pkl_file.close()</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;"><br />Что произошло? Точно то, что и ожидалось. </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">data</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;"> как-будто всегда тут и была.<br /><br />Теперь, немного об осторожности: pickle не идеален. Его файлы легко испортить случайно или преднамеренно. Pickle, может быть, безопаснее чем текстовые файлы, но он всё ещё может использоваться для запуска вредоносного кода. Кроме того, он несовместим между разными версиями Питона, поэтому если вы будете распространять свои объекты с помощью pickle, не ожидайте что все люди смогут их использовать. Тем не менее, модуль может быть мощным инструментом для кэширования и других распространённых задач с сериализацией.<br /><br /><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:28px;"><span style=" font-family:'Fira Sans,sans-serif'; font-size:8.25pt; font-weight:496; color:#222222;">Сериализация собственных объектов.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;"><br />Модуль pickle не только для встроенных типов. Он может использоваться с каждым классом, реализующим его протокол. Этот протокол содержит четыре необязательных метода, позволяющих настроить то, как pickle будет с ними обращаться (есть некоторые различия для расширений на C, но это за рамками нашего руководства):<br /><br /></span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__getinitargs__(self)</span><span style=" font-size:16px;"><br />Если вы хотите, чтобы после десериализации вашего класса был вызыван </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__init__</span><span style=" font-size:16px;">, вы можете определить </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__getinitargs__</span><span style=" font-size:16px;">, который должен вернуть кортеж аргументов, который будет отправлен в </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__init__</span><span style=" font-size:16px;">. Заметьте, что этот метод работает только с классами старого стиля.<br /><br /></span></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__getnewargs__(self)</span><span style=" font-size:16px;"><br />Для классов нового стиля вы можете определить, какие параметры будут переданы в </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__new__</span><span style=" font-size:16px;"> во время десериализации. Этот метод так же должен вернуть кортеж аргументов, которые будут отправлены в </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__new__</span><span style=" font-size:16px;">.<br /><br /></span></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__getstate__(self)</span><span style=" font-size:16px;"><br />Вместо стандартного атрибута </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__dict__</span><span style=" font-size:16px;">, где хранятся атрибуты класса, вы можете вернуть произвольные данные для сериализации. Эти данные будут переданы в </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__setstate__</span><span style=" font-size:16px;"> во время десериализации.<br /><br /></span></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__setstate__(self, state)</span><span style=" font-size:16px;"><br />Если во время десериализации определён </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__setstate__</span><span style=" font-size:16px;">, то данные объекта будут переданы сюда, вместо того чтобы просто записать всё в </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__dict__</span><span style=" font-size:16px;">. Это парный метод для </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__getstate__</span><span style=" font-size:16px;">: когда оба определены, вы можете представлять состояние вашего объекта так, как вы только захотите.<br /><br /></span></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__reduce__(self)</span><span style=" font-size:16px;"><br />Если вы определили свой тип (с помощью Python's C API), вы должны сообщить Питону как его сериализовать, если вы хотите, чтобы он его сериализовал. </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__reduce__()</span><span style=" font-size:16px;"> вызывается когда сериализуется объект, в котором этот метод был определён. Он должен вернуть или строку, содержащую имя глобальной переменной, содержимое которой сериализуется как обычно, или кортеж. Кортеж может содержать от 2 до 5 элементов: вызываемый объект, который будет вызван, чтобы создать десериализованный объект, кортеж аргументов для этого вызываемого объекта, данные, которые будут переданы в </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__setstate__</span><span style=" font-size:16px;"> (опционально), итератор списка элементов для сериализации (опционально) и итератор словаря элементов для сериализации (опционально).<br /><br /></span></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__reduce_ex__(self, protocol)</span><span style=" font-size:16px;"><br />Иногда полезно знать версию протокола, реализуя </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__reduce__</span><span style=" font-size:16px;">. И этого можно добиться, реализовав вместо него </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__reduce_ex__</span><span style=" font-size:16px;">. Если </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__reduce_ex__</span><span style=" font-size:16px;"> реализован, то предпочтение при вызове отдаётся ему (вы всё-равно должны реализовать </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__reduce__</span><span style=" font-size:16px;"> для обратной совместимости).<br /><br /></span></li></ul>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;"><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:28px;"><span style=" font-family:'Fira Sans,sans-serif'; font-size:8.25pt; font-weight:496; color:#222222;">Пример</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;"><br />Для примера опишем грифельную доску (</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">Slate</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;">), которая запоминает что и когда было на ней записано. Впрочем, конкретно эта доска становится чистой каждый раз, когда она сериализуется: текущее значение не сохраняется.<br /><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">import</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> time</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">class</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#c18401; background-color:#fbfdff;">Slate</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">    </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#50a14f; background-color:#fbfdff;">'''Класс, хранящий строку и лог изменений. И забывающий своё значение после </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#50a14f; background-color:#fbfdff;">    сериализации.'''</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#50a14f;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">    </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">def</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#4078f2; background-color:#fbfdff;">__init__</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">(self, value):</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">        self.value = value</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">        self.last_change = time.asctime()</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">        self.history = {}</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">    </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">def</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#4078f2; background-color:#fbfdff;">change</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">(self, new_value):</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">        </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; font-style:italic; color:#a0a1a7; background-color:#fbfdff;"># Изменить значение. Зафиксировать последнее значение в истории. </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">        self.history[self.last_change] = self.value</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">        self.value = new_value</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">        self.last_change = time.asctime()</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">    </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">def</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#4078f2; background-color:#fbfdff;">print_changes</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">(self):</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">        </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">print</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#50a14f; background-color:#fbfdff;">'Changelog for Slate object:'</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">        </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">for</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> k, v </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">in</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> self.history.items():</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">            </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">print</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#50a14f; background-color:#fbfdff;">'%s\t %s'</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> % (k, v)</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">    </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">def</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#4078f2; background-color:#fbfdff;">__getstate__</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">(self):</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">        </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; font-style:italic; color:#a0a1a7; background-color:#fbfdff;"># Намеренно не возвращаем self.value or self.last_change.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">        </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; font-style:italic; color:#a0a1a7; background-color:#fbfdff;"># Мы хотим &quot;чистую доску&quot; после десериализации.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">        </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">return</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> self.history</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">    </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">def</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;"> </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#4078f2; background-color:#fbfdff;">__setstate__</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">(self, state):</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">        self.history = state</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">        self.value, self.last_change = </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">None</span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#383a42; background-color:#fbfdff;">, </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4; background-color:#fbfdff;">None</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#a626a4;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;"><br /><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:32px;"><a name="conclusion"></a><span style=" font-family:'Fira Sans,sans-serif'; font-size:8.25pt; font-weight:496; color:#222222;">З</span><span style=" font-family:'Fira Sans,sans-serif'; font-size:8.25pt; font-weight:496; color:#222222;">аключение</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;"><br />Цель этого руководства донести что-нибудь до каждого, кто его читает, независимо от его опыта в Питоне или объектно-ориентированном программировании. Если вы новичок в Питоне, вы получили ценные знания об основах написания функциональных, элегантных и простых для использования классов. Если вы программист среднего уровня, то вы, возможно, нашли несколько новых приятных идей и стратегий, несколько хороших способов уменьшить количество кода, написанного вами и вашими клиентами. Если же вы Питонист-эксперт, то вы обновили некоторые свои, возможно, подзабытые знания, а может и нашли парочку новых трюков. Независимо от вашего уровня, я надеюсь, что это путешествие через специальные питоновские методы было поистине магическим (не смог удержаться).<br /><br /><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:32px;"><a name="appendix1"></a><span style=" font-family:'Fira Sans,sans-serif'; font-size:8.25pt; font-weight:496; color:#222222;">Д</span><span style=" font-family:'Fira Sans,sans-serif'; font-size:8.25pt; font-weight:496; color:#222222;">ополнение 1: Как вызывать магические методы</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;"><br />Некоторые из магических методов напрямую связаны со встроенными функциями; в этом случае совершенно очевидно как их вызывать. Однако, так бывает не всегда. Это дополнение посвящено тому, чтобы раскрыть неочевидный синтаксис, приводящий к вызову магических методов.<br /></span></p>
<table border="0" style=" margin-top:20px; margin-bottom:20px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0"><thead>
<tr>
<td style=" vertical-align:top; padding-left:12; padding-right:12; padding-top:6; padding-bottom:9;">
<p align="center" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.5%;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; font-weight:600; color:#222222;">Магический метод</span></p></td>
<td style=" vertical-align:top; padding-left:12; padding-right:12; padding-top:6; padding-bottom:9;">
<p align="center" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.5%;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; font-weight:600; color:#222222;">Когда он вызывается (пример)</span></p></td>
<td style=" vertical-align:top; padding-left:12; padding-right:12; padding-top:6; padding-bottom:9;">
<p align="center" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.5%;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; font-weight:600; color:#222222;">Объяснение</span></p></td></tr></thead>
<tr>
<td style=" vertical-align:top; padding-left:12; padding-right:12; padding-top:6; padding-bottom:9;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.5%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">__new__(cls [,...])</span></p></td>
<td style=" vertical-align:top; padding-left:12; padding-right:12; padding-top:6; padding-bottom:9;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.5%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">instance = MyClass(arg1, arg2)</span></p></td>
<td style=" vertical-align:top; padding-left:12; padding-right:12; padding-top:6; padding-bottom:9;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.5%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">__new__</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;"> вызывается при создании экземпляра</span></p></td></tr>
<tr>
<td style=" vertical-align:top; padding-left:12; padding-right:12; padding-top:6; padding-bottom:9;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.5%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">__init__(self [,...])</span></p></td>
<td style=" vertical-align:top; padding-left:12; padding-right:12; padding-top:6; padding-bottom:9;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.5%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">instance = MyClass(arg1, arg2)</span></p></td>
<td style=" vertical-align:top; padding-left:12; padding-right:12; padding-top:6; padding-bottom:9;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.5%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">__init__</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;"> вызывается при создании экземпляра</span></p></td></tr>
<tr>
<td style=" vertical-align:top; padding-left:12; padding-right:12; padding-top:6; padding-bottom:9;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.5%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">__cmp__(self, other)</span></p></td>
<td style=" vertical-align:top; padding-left:12; padding-right:12; padding-top:6; padding-bottom:9;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.5%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">self == other</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;">, </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">self &gt; other</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;">, etc.</span></p></td>
<td style=" vertical-align:top; padding-left:12; padding-right:12; padding-top:6; padding-bottom:9;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.5%;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;">Вызывается для любого сравнения</span></p></td></tr>
<tr>
<td style=" vertical-align:top; padding-left:12; padding-right:12; padding-top:6; padding-bottom:9;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.5%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">__pos__(self)</span></p></td>
<td style=" vertical-align:top; padding-left:12; padding-right:12; padding-top:6; padding-bottom:9;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.5%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">+self</span></p></td>
<td style=" vertical-align:top; padding-left:12; padding-right:12; padding-top:6; padding-bottom:9;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.5%;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;">Унарный знак плюса</span></p></td></tr>
<tr>
<td style=" vertical-align:top; padding-left:12; padding-right:12; padding-top:6; padding-bottom:9;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.5%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">__neg__(self)</span></p></td>
<td style=" vertical-align:top; padding-left:12; padding-right:12; padding-top:6; padding-bottom:9;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.5%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">-self</span></p></td>
<td style=" vertical-align:top; padding-left:12; padding-right:12; padding-top:6; padding-bottom:9;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.5%;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;">Унарный знак минуса</span></p></td></tr>
<tr>
<td style=" vertical-align:top; padding-left:12; padding-right:12; padding-top:6; padding-bottom:9;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.5%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">__invert__(self)</span></p></td>
<td style=" vertical-align:top; padding-left:12; padding-right:12; padding-top:6; padding-bottom:9;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.5%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">~self</span></p></td>
<td style=" vertical-align:top; padding-left:12; padding-right:12; padding-top:6; padding-bottom:9;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.5%;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;">Побитовая инверсия</span></p></td></tr>
<tr>
<td style=" vertical-align:top; padding-left:12; padding-right:12; padding-top:6; padding-bottom:9;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.5%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">__index__(self)</span></p></td>
<td style=" vertical-align:top; padding-left:12; padding-right:12; padding-top:6; padding-bottom:9;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.5%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">x[self]</span></p></td>
<td style=" vertical-align:top; padding-left:12; padding-right:12; padding-top:6; padding-bottom:9;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.5%;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;">Преобразование, когда объект используется как индекс</span></p></td></tr>
<tr>
<td style=" vertical-align:top; padding-left:12; padding-right:12; padding-top:6; padding-bottom:9;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.5%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">__nonzero__(self)</span></p></td>
<td style=" vertical-align:top; padding-left:12; padding-right:12; padding-top:6; padding-bottom:9;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.5%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">bool(self)</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;">, </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">if self:</span></p></td>
<td style=" vertical-align:top; padding-left:12; padding-right:12; padding-top:6; padding-bottom:9;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.5%;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;">Булевое значение объекта</span></p></td></tr>
<tr>
<td style=" vertical-align:top; padding-left:12; padding-right:12; padding-top:6; padding-bottom:9;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.5%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">__getattr__(self, name)</span></p></td>
<td style=" vertical-align:top; padding-left:12; padding-right:12; padding-top:6; padding-bottom:9;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.5%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">self.name # name не определено</span></p></td>
<td style=" vertical-align:top; padding-left:12; padding-right:12; padding-top:6; padding-bottom:9;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.5%;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;">Пытаются получить несуществующий атрибут</span></p></td></tr>
<tr>
<td style=" vertical-align:top; padding-left:12; padding-right:12; padding-top:6; padding-bottom:9;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.5%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">__setattr__(self, name, val)</span></p></td>
<td style=" vertical-align:top; padding-left:12; padding-right:12; padding-top:6; padding-bottom:9;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.5%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">self.name = val</span></p></td>
<td style=" vertical-align:top; padding-left:12; padding-right:12; padding-top:6; padding-bottom:9;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.5%;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;">Присвоение любому атрибуту</span></p></td></tr>
<tr>
<td style=" vertical-align:top; padding-left:12; padding-right:12; padding-top:6; padding-bottom:9;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.5%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">__delattr__(self, name)</span></p></td>
<td style=" vertical-align:top; padding-left:12; padding-right:12; padding-top:6; padding-bottom:9;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.5%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">del self.name</span></p></td>
<td style=" vertical-align:top; padding-left:12; padding-right:12; padding-top:6; padding-bottom:9;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.5%;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;">Удаление атрибута</span></p></td></tr>
<tr>
<td style=" vertical-align:top; padding-left:12; padding-right:12; padding-top:6; padding-bottom:9;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.5%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">__getattribute__(self, name)</span></p></td>
<td style=" vertical-align:top; padding-left:12; padding-right:12; padding-top:6; padding-bottom:9;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.5%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">self.name</span></p></td>
<td style=" vertical-align:top; padding-left:12; padding-right:12; padding-top:6; padding-bottom:9;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.5%;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;">Получить любой атрибут</span></p></td></tr>
<tr>
<td style=" vertical-align:top; padding-left:12; padding-right:12; padding-top:6; padding-bottom:9;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.5%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">__getitem__(self, key)</span></p></td>
<td style=" vertical-align:top; padding-left:12; padding-right:12; padding-top:6; padding-bottom:9;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.5%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">self[key]</span></p></td>
<td style=" vertical-align:top; padding-left:12; padding-right:12; padding-top:6; padding-bottom:9;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.5%;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;">Получение элемента через индекс</span></p></td></tr>
<tr>
<td style=" vertical-align:top; padding-left:12; padding-right:12; padding-top:6; padding-bottom:9;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.5%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">__setitem__(self, key, val)</span></p></td>
<td style=" vertical-align:top; padding-left:12; padding-right:12; padding-top:6; padding-bottom:9;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.5%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">self[key] = val</span></p></td>
<td style=" vertical-align:top; padding-left:12; padding-right:12; padding-top:6; padding-bottom:9;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.5%;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;">Присвоение элементу через индекс</span></p></td></tr>
<tr>
<td style=" vertical-align:top; padding-left:12; padding-right:12; padding-top:6; padding-bottom:9;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.5%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">__delitem__(self, key)</span></p></td>
<td style=" vertical-align:top; padding-left:12; padding-right:12; padding-top:6; padding-bottom:9;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.5%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">del self[key]</span></p></td>
<td style=" vertical-align:top; padding-left:12; padding-right:12; padding-top:6; padding-bottom:9;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.5%;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;">Удаление элемента через индекс</span></p></td></tr>
<tr>
<td style=" vertical-align:top; padding-left:12; padding-right:12; padding-top:6; padding-bottom:9;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.5%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">__iter__(self)</span></p></td>
<td style=" vertical-align:top; padding-left:12; padding-right:12; padding-top:6; padding-bottom:9;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.5%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">for x in self</span></p></td>
<td style=" vertical-align:top; padding-left:12; padding-right:12; padding-top:6; padding-bottom:9;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.5%;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;">Итерация</span></p></td></tr>
<tr>
<td style=" vertical-align:top; padding-left:12; padding-right:12; padding-top:6; padding-bottom:9;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.5%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">__contains__(self, value)</span></p></td>
<td style=" vertical-align:top; padding-left:12; padding-right:12; padding-top:6; padding-bottom:9;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.5%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">value in self</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;">, </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">value not in self</span></p></td>
<td style=" vertical-align:top; padding-left:12; padding-right:12; padding-top:6; padding-bottom:9;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.5%;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;">Проверка принадлежности с помощью </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">in</span></p></td></tr>
<tr>
<td style=" vertical-align:top; padding-left:12; padding-right:12; padding-top:6; padding-bottom:9;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.5%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">__call__(self [,...])</span></p></td>
<td style=" vertical-align:top; padding-left:12; padding-right:12; padding-top:6; padding-bottom:9;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.5%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">self(args)</span></p></td>
<td style=" vertical-align:top; padding-left:12; padding-right:12; padding-top:6; padding-bottom:9;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.5%;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;">«Вызов» экземпляра</span></p></td></tr>
<tr>
<td style=" vertical-align:top; padding-left:12; padding-right:12; padding-top:6; padding-bottom:9;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.5%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">__enter__(self)</span></p></td>
<td style=" vertical-align:top; padding-left:12; padding-right:12; padding-top:6; padding-bottom:9;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.5%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">with self as x:</span></p></td>
<td style=" vertical-align:top; padding-left:12; padding-right:12; padding-top:6; padding-bottom:9;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.5%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">with</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;"> оператор менеджеров контекста</span></p></td></tr>
<tr>
<td style=" vertical-align:top; padding-left:12; padding-right:12; padding-top:6; padding-bottom:9;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.5%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">__exit__(self, exc, val, trace)</span></p></td>
<td style=" vertical-align:top; padding-left:12; padding-right:12; padding-top:6; padding-bottom:9;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.5%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">with self as x:</span></p></td>
<td style=" vertical-align:top; padding-left:12; padding-right:12; padding-top:6; padding-bottom:9;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.5%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">with</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;"> оператор менеджеров контекста</span></p></td></tr>
<tr>
<td style=" vertical-align:top; padding-left:12; padding-right:12; padding-top:6; padding-bottom:9;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.5%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">__getstate__(self)</span></p></td>
<td style=" vertical-align:top; padding-left:12; padding-right:12; padding-top:6; padding-bottom:9;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.5%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">pickle.dump(pkl_file, self)</span></p></td>
<td style=" vertical-align:top; padding-left:12; padding-right:12; padding-top:6; padding-bottom:9;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.5%;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;">Сериализация</span></p></td></tr>
<tr>
<td style=" vertical-align:top; padding-left:12; padding-right:12; padding-top:6; padding-bottom:9;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.5%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">__setstate__(self)</span></p></td>
<td style=" vertical-align:top; padding-left:12; padding-right:12; padding-top:6; padding-bottom:9;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.5%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:8.25pt; color:#222222;">data = pickle.load(pkl_file)</span></p></td>
<td style=" vertical-align:top; padding-left:12; padding-right:12; padding-top:6; padding-bottom:9;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.5%;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;">Сериализация</span></p></td></tr></table>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;"><br /><br />Надеюсь, эта таблица избавит вас от любых вопросов о том, что за синтаксис вызова магических методов.<br /><br /><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:32px;"><a name="appendix2"></a><span style=" font-family:'Fira Sans,sans-serif'; font-size:8.25pt; font-weight:496; color:#222222;">Д</span><span style=" font-family:'Fira Sans,sans-serif'; font-size:8.25pt; font-weight:496; color:#222222;">ополнение 2: Изменения в Питоне 3</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;"><br />Опишем несколько главных случаев, когда Питон 3 отличается от 2.x в терминах его объектной модели:<br /><br /></span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><span style=" font-size:16px;">Так как в Питоне 3 различий между строкой и юникодом больше нет, </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__unicode__</span><span style=" font-size:16px;"> исчез, а появился </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__bytes__</span><span style=" font-size:16px;"> (который ведёт себя так же как </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__str__</span><span style=" font-size:16px;"> и </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__unicode__</span><span style=" font-size:16px;"> в 2.7) для новых встроенных функций построения байтовых массивов.</span></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><span style=" font-size:16px;">Так как деление в Питоне 3 теперь по-умолчанию «правильное деление», </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__div__</span><span style=" font-size:16px;"> больше нет.</span></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__coerce__</span><span style=" font-size:16px;"> больше нет, из-за избыточности и странного поведения.</span></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__cmp__</span><span style=" font-size:16px;"> больше нет, из-за избыточности.</span></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__nonzero__</span><span style=" font-size:16px;"> было переименовано в </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__bool__</span><span style=" font-size:16px;">.</span></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:8.25pt; color:#222222;" style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">next</span><span style=" font-size:16px;"> у итераторов был </span><a href="http://www.python.org/dev/peps/pep-3114/"><span style=" font-size:16px; text-decoration: underline; color:#487284; background-color:transparent;">переименован</span></a><span style=" font-size:16px;"> в </span><span style=" font-family:'Menlo,Monaco,Courier New,monospace'; font-size:14px;">__next__</span></li></ul></body></html>