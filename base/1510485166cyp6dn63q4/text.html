<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'DejaVu Sans'; font-size:11pt; font-weight:400; font-style:normal;">
<p style=" margin-top:18px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="insertedID0"></a><span style=" font-family:'Times New Roman'; font-size:xx-large; font-weight:600; color:#000000;">U</span><span style=" font-family:'Times New Roman'; font-size:xx-large; font-weight:600; color:#000000;">sing PL/SQL With Object Types</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;">This chapter describes how to use object types with PL/SQL</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;">This chapter contains these topics:</span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Times New Roman'; font-size:medium; color:#000000;" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://oracle.su/docs/11g/appdev.112/e11822/adobjplsql.htm#i7530"><span style=" font-size:medium; text-decoration: underline; color:#0000ff;">Declaring and Initializing Objects in PL/SQL</span></a></li>
<li style=" font-family:'Times New Roman'; font-size:medium; color:#000000;" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://oracle.su/docs/11g/appdev.112/e11822/adobjplsql.htm#i11073"><span style=" font-size:medium; text-decoration: underline; color:#0000ff;">Manipulating Objects in PL/SQL</span></a></li>
<li style=" font-family:'Times New Roman'; font-size:medium; color:#000000;" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://oracle.su/docs/11g/appdev.112/e11822/adobjplsql.htm#i21148"><span style=" font-size:medium; text-decoration: underline; color:#0000ff;">Using Overloading in PL/SQL with Inheritance</span></a></li>
<li style=" font-family:'Times New Roman'; font-size:medium; color:#000000;" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://oracle.su/docs/11g/appdev.112/e11822/adobjplsql.htm#CIHJFFCI"><span style=" font-size:medium; text-decoration: underline; color:#0000ff;">Using Dynamic SQL With Objects</span></a></li></ul>
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="insertedID1"></a><span style=" font-family:'Times New Roman'; font-size:x-large; font-weight:600; color:#000000;">D</span><span style=" font-family:'Times New Roman'; font-size:x-large; font-weight:600; color:#000000;">eclaring and Initializing Objects in PL/SQL</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;">Using object types in a PL/SQL block, subprogram, or package is a two-step process.</span></p>
<ol style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Times New Roman'; font-size:medium; color:#000000;" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:medium;">You must define object types using the SQL statement </span><span style=" font-family:'Courier New,courier'; font-size:medium;">CREATE TYPE</span><span style=" font-size:medium;">, in SQL*Plus or other similar programs.</span></li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;">See Also:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><a href="http://oracle.su/docs/11g/appdev.112/e11822/adobjint.htm#i458117"><span style=" font-family:'Times New Roman'; font-size:medium; text-decoration: underline; color:#0000ff;">&quot;About Object Types&quot;</span></a></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;">After an object type is defined and installed in the schema, you can use it in any PL/SQL block, subprogram, or package.</span></p>
<li style=" font-family:'Times New Roman'; font-size:medium; color:#000000;" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:medium;">In PL/SQL, you then declare a variable whose data type is the user-defined type or ADT that you just defined.</span></li></ol>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;">Objects or ADTs follow the usual scope and instantiation rules.</span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="sthref296"></a><span style=" font-family:'Times New Roman'; font-size:large; font-weight:600; color:#000000;">D</span><span style=" font-family:'Times New Roman'; font-size:large; font-weight:600; color:#000000;">efining Object Types</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://oracle.su/docs/11g/appdev.112/e11822/adobjplsql.htm#CIHGJHHA"><span style=" font-family:'Times New Roman'; font-size:medium; text-decoration: underline; color:#0000ff;">Example 3-1</span></a><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;"> provides two object types, and a table of object types. Subsequent examples show how to declare variables of those object types in PL/SQL and perform other operations with these objects.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="CIHGJHHA"></a><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;">E</span><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;">xample 3-1 Working With Object Types</span></p>
<pre style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">CREATE TYPE address_typ AS OBJECT ( </span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">   street          VARCHAR2(30),</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">   city            VARCHAR2(20),</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">   state           CHAR(2),</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">   postal_code     VARCHAR2(6) );</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">/</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">CREATE TYPE employee_typ AS OBJECT (</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">  employee_id       NUMBER(6),</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">  first_name        VARCHAR2(20),</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">  last_name         VARCHAR2(25),</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">  email             VARCHAR2(25),</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">  phone_number      VARCHAR2(20),</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">  hire_date         DATE,</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">  job_id            VARCHAR2(10),</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">  salary            NUMBER(8,2),</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">  commission_pct    NUMBER(2,2),</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">  manager_id        NUMBER(6),</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">  department_id     NUMBER(4),</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">  address           address_typ,</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">  MAP MEMBER FUNCTION get_idno RETURN NUMBER,</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">  MEMBER PROCEDURE display_address ( SELF IN OUT NOCOPY employee_typ ) );</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">/</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">CREATE TYPE BODY employee_typ AS</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">  MAP MEMBER FUNCTION get_idno RETURN NUMBER IS</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">  BEGIN</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">    RETURN employee_id;</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">  END;</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">  MEMBER PROCEDURE display_address ( SELF IN OUT NOCOPY employee_typ ) IS</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">  BEGIN</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">    DBMS_OUTPUT.PUT_LINE(first_name || ' '  || last_name);</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">    DBMS_OUTPUT.PUT_LINE(address.street);</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">    DBMS_OUTPUT.PUT_LINE(address.city || ', '  || address.state || ' ' ||</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">                         address.postal_code);   </span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">  END;</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">END;</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">/</span></pre>
<pre style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">CREATE TABLE employee_tab OF employee_typ;</span></pre>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="sthref297"></a><span style=" font-family:'Times New Roman'; font-size:large; font-weight:600; color:#000000;">D</span><span style=" font-family:'Times New Roman'; font-size:large; font-weight:600; color:#000000;">eclaring Objects in a PL/SQL Block</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;">You can use objects or ADTs wherever built-in types such as </span><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">CHAR</span><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;"> or </span><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">NUMBER</span><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;"> can be used.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://oracle.su/docs/11g/appdev.112/e11822/adobjplsql.htm#BABIHHCG"><span style=" font-family:'Times New Roman'; font-size:medium; text-decoration: underline; color:#0000ff;">Example 3-2</span></a><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;"> declares object </span><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">emp</span><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;"> of type </span><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">employee_typ</span><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;">. Then, the constructor for object type </span><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">employee_typ</span><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;"> initializes the object.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="BABIHHCG"></a><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;">E</span><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;">xample 3-2 Declaring Objects in a PL/SQL Block</span></p>
<pre style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">-- Requires Ex. 3-1</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">DECLARE</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">  emp employee_typ; -- emp is atomically null</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">BEGIN</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">-- call the constructor for employee_typ</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">  emp := employee_typ(315, 'Francis', 'Logan', 'FLOGAN',</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">        '415.555.0100', '01-MAY-04', 'SA_MAN', 11000, .15, 101, 110, </span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">         address_typ('376 Mission', 'San Francisco', 'CA', '94222'));</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">  DBMS_OUTPUT.PUT_LINE(emp.first_name || ' ' || emp.last_name); -- display details</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">  emp.display_address();  -- call object method to display details</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">END;</span></pre>
<pre style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">/</span></pre>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;">The formal parameter of a PL/SQL subprogram can have data types of user-defined types. Therefore, you can pass objects to stored subprograms and from one subprogram to another. In the next example, the object type </span><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">employee_typ</span><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;"> specifies the data type of a formal parameter:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">PROCEDURE open_acct (new_acct IN OUT employee_typ) IS ...</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;">In the following example, object type </span><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">employee_typ</span><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;"> specifies the return type of a function:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">FUNCTION get_acct (acct_id IN NUMBER) RETURN employee_typ IS ...</span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Times New Roman'; font-size:large; font-weight:600; color:#000000;">How PL/SQL Treats Uninitialized Objects</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;">User-defined types, just like collections, are atomically null, until you initialize the object by calling the constructor for its object type. That is, the object itself is null, not just its attributes.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;">Comparing a null object with any other object always yields </span><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">NULL</span><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;">. Also, if you assign an atomically null object to another object, the other object becomes atomically null (and must be reinitialized). Likewise, if you assign the non-value </span><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">NULL</span><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;"> to an object, the object becomes atomically null.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;">In an expression, attributes of an uninitialized object evaluate to </span><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">NULL</span><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;">. When applied to an uninitialized object or its attributes, the </span><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">IS</span><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">NULL</span><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;"> comparison operator yields </span><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">TRUE</span><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;">.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;">See </span><a href="http://oracle.su/docs/11g/appdev.112/e11822/adobjbas.htm#CIHGJFGD"><span style=" font-family:'Times New Roman'; font-size:medium; text-decoration: underline; color:#0000ff;">Example 2-1</span></a><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;"> for an illustration of null objects and objects with null attributes.</span></p>
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="insertedID2"></a><span style=" font-family:'Times New Roman'; font-size:x-large; font-weight:600; color:#000000;">M</span><span style=" font-family:'Times New Roman'; font-size:x-large; font-weight:600; color:#000000;">anipulating Objects in PL/SQL</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;">This section describes how to manipulate object attributes and methods in PL/SQL.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;">This section includes the following topics:</span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Times New Roman'; font-size:medium; color:#000000;" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://oracle.su/docs/11g/appdev.112/e11822/adobjplsql.htm#BJEEJJDC"><span style=" font-size:medium; text-decoration: underline; color:#0000ff;">Accessing Object Attributes With Dot Notation</span></a></li>
<li style=" font-family:'Times New Roman'; font-size:medium; color:#000000;" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://oracle.su/docs/11g/appdev.112/e11822/adobjplsql.htm#BABECDGC"><span style=" font-size:medium; text-decoration: underline; color:#0000ff;">Calling Object Constructors and Methods</span></a></li>
<li style=" font-family:'Times New Roman'; font-size:medium; color:#000000;" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://oracle.su/docs/11g/appdev.112/e11822/adobjplsql.htm#BJEJDIIH"><span style=" font-size:medium; text-decoration: underline; color:#0000ff;">Updating and Deleting Objects</span></a></li>
<li style=" font-family:'Times New Roman'; font-size:medium; color:#000000;" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://oracle.su/docs/11g/appdev.112/e11822/adobjplsql.htm#i7534"><span style=" font-size:medium; text-decoration: underline; color:#0000ff;">Manipulating Objects Through Ref Modifiers</span></a></li></ul>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Times New Roman'; font-size:large; font-weight:600; color:#000000;">Accessing Object Attributes With Dot Notation</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;">You refer to an attribute by name. To access or change the value of an attribute, you use dot notation. Attribute names can be chained, which lets you access the attributes of a nested object type.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://oracle.su/docs/11g/appdev.112/e11822/adobjplsql.htm#CIHBCFEI"><span style=" font-family:'Times New Roman'; font-size:medium; text-decoration: underline; color:#0000ff;">Example 3-3</span></a><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;"> uses dot notation and generates the same output as </span><a href="http://oracle.su/docs/11g/appdev.112/e11822/adobjplsql.htm#BABIHHCG"><span style=" font-family:'Times New Roman'; font-size:medium; text-decoration: underline; color:#0000ff;">Example 3-2</span></a><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;">.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="CIHBCFEI"></a><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;">E</span><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;">xample 3-3 Accessing Object Attributes</span></p>
<pre style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">-- Requires Ex. 3-1</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">DECLARE</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">  emp employee_typ;</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">BEGIN</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">  emp := employee_typ(315, 'Francis', 'Logan', 'FLOGAN',</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">        '415.555.0100', '01-MAY-04', 'SA_MAN', 11000, .15, 101, 110, </span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">         address_typ('376 Mission', 'San Francisco', 'CA', '94222'));</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">  DBMS_OUTPUT.PUT_LINE(emp.first_name || ' '  || emp.last_name);</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">  DBMS_OUTPUT.PUT_LINE(emp.address.street);</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">  DBMS_OUTPUT.PUT_LINE(emp.address.city || ', '  ||emp. address.state || ' ' ||</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">                       emp.address.postal_code);   </span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">END;</span></pre>
<pre style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">/</span></pre>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Times New Roman'; font-size:large; font-weight:600; color:#000000;">Calling Object Constructors and Methods</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;">Calls to a constructor are allowed wherever function calls are allowed. Like all functions, a constructor is called as part of an expression, as shown in </span><a href="http://oracle.su/docs/11g/appdev.112/e11822/adobjplsql.htm#CIHBCFEI"><span style=" font-family:'Times New Roman'; font-size:medium; text-decoration: underline; color:#0000ff;">Example 3-3</span></a><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;"> and </span><a href="http://oracle.su/docs/11g/appdev.112/e11822/adobjplsql.htm#CIHDFEDI"><span style=" font-family:'Times New Roman'; font-size:medium; text-decoration: underline; color:#0000ff;">Example 3-4</span></a><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;">.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="CIHDFEDI"></a><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;">E</span><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;">xample 3-4 Inserting Rows in an Object Table</span></p>
<pre style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">-- Requires Ex. 3-1</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">DECLARE</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">  emp employee_typ;</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">BEGIN</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">  INSERT INTO employee_tab VALUES (employee_typ(310, 'Evers', 'Boston', 'EBOSTON',</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">   '617.555.0100', '01-AUG-04', 'SA_REP', 9000, .15, 101, 110, </span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">    address_typ('123 Main', 'San Francisco', 'CA', '94111')) );</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">  INSERT INTO employee_tab VALUES (employee_typ(320, 'Martha', 'Dunn', 'MDUNN',</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">    '650.555.0150', '30-SEP-04', 'AC_MGR', 12500, 0, 101, 110,</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">    address_typ('123 Broadway', 'Redwood City', 'CA', '94065')) );</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">END;</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">/</span></pre>
<pre style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">SELECT VALUE(e) from employee_tab e;</span></pre>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;">When you pass parameters to a constructor, the call assigns initial values to the attributes of the object being instantiated. When you call the default constructor to fill in all attribute values, you must supply a parameter for every attribute; unlike constants and variables, attributes cannot have default values. You can call a constructor using named notation instead of positional notation.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;">Like packaged subprograms, methods are called using dot notation. In </span><a href="http://oracle.su/docs/11g/appdev.112/e11822/adobjplsql.htm#CIHIBDFI"><span style=" font-family:'Times New Roman'; font-size:medium; text-decoration: underline; color:#0000ff;">Example 3-5</span></a><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;">, the </span><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">display_address</span><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;"> method is called to display attributes of an object. Note the use of the </span><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">VALUE</span><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;"> function which returns the value of an object. </span><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">VALUE</span><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;"> takes as its argument a correlation variable. In this context, a correlation variable is a row variable or table alias associated with a row in an object table.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="CIHIBDFI"></a><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;">E</span><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;">xample 3-5 Accessing Object Methods</span></p>
<pre style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">-- Requires Ex. 3-1 and Ex. 3-4</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">DECLARE</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">  emp employee_typ;</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">BEGIN</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">  SELECT VALUE(e) INTO emp FROM employee_tab e WHERE e.employee_id = 310;</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">  emp.display_address();</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">END;</span></pre>
<pre style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">/</span></pre>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;">In SQL statements, calls to a parameterless method require an empty parameter list. In procedural statements, an empty parameter list is optional unless you chain calls, in which case it is required for all but the last call. Also, if you chain two function calls, the first function must return an object that can be passed to the second function.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;">If a PL/SQL function is used in place of an ADT constructor during a DML operation, the function may execute multiple times as part of the DML execution. For the function to execute only once per occurrence, it must be a deterministic function.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;">For static methods, calls use the notation </span><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">type_name.method_name</span><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;"> rather than specifying an instance of the type.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;">When you call a method using an instance of a subtype, the actual method that is executed depends on declarations in the type hierarchy. If the subtype overrides the method that it inherits from its supertype, the call uses the subtype implementation. Otherwise, the call uses the supertype implementation. This capability is known as dynamic method dispatch.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;">See Also:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://oracle.su/docs/11g/appdev.112/e11822/adobjbas.htm#i468270"><span style=" font-family:'Times New Roman'; font-size:medium; text-decoration: underline; color:#0000ff;">&quot;Dynamic Method Dispatch&quot;</span></a></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Times New Roman'; font-size:large; font-weight:600; color:#000000;">Updating and Deleting Objects</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;">From inside a PL/SQL block you can modify and delete rows in an object table.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="ADOBJ7182"></a><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;">E</span><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;">xample 3-6 Updating and Deleting Rows in an Object Table</span></p>
<pre style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">-- Requires Ex. 3-1 and 3-4</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">DECLARE</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">  emp employee_typ;</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">BEGIN</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">  INSERT INTO employee_tab VALUES (employee_typ(370, 'Robert', 'Myers', 'RMYERS',</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">   '415.555.0150', '07-NOV-04', 'SA_REP', 8800, .12, 101, 110, </span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">    address_typ('540 Fillmore', 'San Francisco', 'CA', '94011')) );</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">  UPDATE employee_tab e SET e.address.street = '1040 California' </span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">     WHERE e.employee_id = 370;</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">  DELETE FROM employee_tab e WHERE e.employee_id = 310;</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">END;</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">/</span></pre>
<pre style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">SELECT VALUE(e) from employee_tab e;</span></pre>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Times New Roman'; font-size:large; font-weight:600; color:#000000;">Manipulating Objects Through Ref Modifiers</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;">You can retrieve </span><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">REF</span><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;">s using the function </span><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">REF</span><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;">, which takes as its argument a correlation variable or alias.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="ADOBJ7184"></a><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;">E</span><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;">xample 3-7 Updating Rows in an Object Table With a REF Modifier</span></p>
<pre style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">-- Requires Ex. 3-1, 3-4, and 3-6</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">DECLARE</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">  emp         employee_typ;</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">  emp_ref REF employee_typ;</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">BEGIN</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">  SELECT REF(e) INTO emp_ref FROM employee_tab e WHERE e.employee_id = 370;</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">  UPDATE employee_tab e </span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">    SET e.address = address_typ('8701 College', 'Oakland', 'CA', '94321')</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">    WHERE REF(e) = emp_ref;</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">END;</span></pre>
<pre style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">/</span></pre>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;">You can declare </span><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">REF</span><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;">s as variables, parameters, fields, or attributes. You can use </span><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">REF</span><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;">s as input or output variables in SQL data manipulation statements.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;">You cannot navigate through </span><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">REF</span><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;">s in PL/SQL. For example, the assignment in </span><a href="http://oracle.su/docs/11g/appdev.112/e11822/adobjplsql.htm#BABDDCJB"><span style=" font-family:'Times New Roman'; font-size:medium; text-decoration: underline; color:#0000ff;">Example 3-8</span></a><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;"> using a </span><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">REF</span><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;"> is not allowed. Instead, use the function </span><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">DEREF</span><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;"> or make calls to the package </span><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">UTL_REF</span><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;"> to access the object. For information on the </span><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">REF</span><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;"> function, see </span><a href="http://oracle.su/docs/11g/server.112/e10592/functions143.htm#SQLRF00694"><span style=" font-family:'Times New Roman'; font-size:medium; text-decoration: underline; color:#0000ff;">Oracle Database SQL Language Reference</span></a><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;">.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="BABDDCJB"></a><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;">E</span><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;">xample 3-8 Trying to Use DEREF in a SELECT INTO Statement, Incorrect</span></p>
<pre style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">-- Requires Ex. 3-1, 3-4, and 3-6</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">DECLARE </span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">  emp           employee_typ;</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">  emp_ref   REF employee_typ;</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">  emp_name      VARCHAR2(50);</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">BEGIN</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">  SELECT REF(e) INTO emp_ref FROM employee_tab e WHERE e.employee_id = 370;</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">  -- the following assignment raises an error, not allowed in PL/SQL  emp := DEREF(emp_ref);  --  cannot use DEREF in procedural statements</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">  emp_name := emp.first_name || ' ' || emp.last_name;</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">  DBMS_OUTPUT.PUT_LINE(emp_name);</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">END;</span></pre>
<pre style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">/</span></pre>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;">This assignment raises an error as described below:</span></p>
<pre style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">not allowed in PL/SQL</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">-- emp_name := emp_ref.first_name || ' ' || emp_ref.last_name;</span></pre>
<pre style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">-- emp := DEREF(emp_ref); not allowed, cannot use DEREF in procedural statements</span></pre>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;">For detailed information on the </span><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">DEREF</span><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;"> function, see </span><a href="http://oracle.su/docs/11g/server.112/e10592/functions052.htm#SQLRF00634"><span style=" font-family:'Times New Roman'; font-size:medium; text-decoration: underline; color:#0000ff;">Oracle Database SQL Language Reference</span></a><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;">.</span></p>
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="insertedID3"></a><span style=" font-family:'Times New Roman'; font-size:x-large; font-weight:600; color:#000000;">U</span><span style=" font-family:'Times New Roman'; font-size:x-large; font-weight:600; color:#000000;">sing Overloading in PL/SQL with Inheritance</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;">Overloading allows you to substitute a subtype value for a formal parameter that is a supertype. This capability is known as substitutability. This section is about this aspect of overloading.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;">Rules of Substitution</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;">If more than one instance of an overloaded procedure matches the procedure call, the following substitution rules determine which procedure, if any, is called:</span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Times New Roman'; font-size:medium; color:#000000;" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:medium;">If the signatures of the overloaded procedures only differ in that some parameters are object types from the same supertype-subtype hierarchy, the closest match is used. The closest match is one where all the parameters are at least as close as any other overloaded instance, as determined by the depth of inheritance between the subtype and supertype, and at least one parameter is closer.</span></li>
<li style=" font-family:'Times New Roman'; font-size:medium; color:#000000;" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:medium;">If instances of two overloaded methods match, and some argument types are closer in one overloaded procedure while others are closer in the second procedure, a semantic error occurs.</span></li>
<li style=" font-family:'Times New Roman'; font-size:medium; color:#000000;" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:medium;">If some parameters differ in their position within the object type hierarchy, and other parameters are of different data types so that an implicit conversion would be necessary, then a semantic error occurs.</span></li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://oracle.su/docs/11g/appdev.112/e11822/adobjplsql.htm#CHDCJCFD"><span style=" font-family:'Times New Roman'; font-size:medium; text-decoration: underline; color:#0000ff;">Example 3-9</span></a><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;"> creates a type hierarchy that has three levels starting with </span><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">super_t</span><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;">. There is a package with two overloaded instances of a function that are the same except for the position of the argument type in the type hierarchy. The invocation declares a variable of type </span><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">final_t</span><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;">, and then calls the overloaded function.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;">The instance of the function that executes is the one that accepts a </span><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">sub_t</span><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;"> parameter, because </span><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">sub_t</span><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;"> is closer to </span><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">final_t</span><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;"> than </span><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">super_t</span><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;"> in the hierarchy. This follows the rules of substitution.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;">Note that because determining which instance to call happens at compile time, the fact that the argument passed in was also a </span><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">final_t</span><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;"> is ignored. If the declaration was </span><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">v</span><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">super_t</span><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">:=final_t(1,2,3)</span><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;">, the overloaded function with the argument </span><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">super_t</span><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;"> would be called.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="CHDCJCFD"></a><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;">E</span><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;">xample 3-9 Resolving PL/SQL Functions With Inheritance</span></p>
<pre style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">CREATE OR REPLACE TYPE super_t AS OBJECT</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">  (n NUMBER) NOT final;</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">/</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">CREATE OR REPLACE TYPE sub_t UNDER super_t</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">  (n2 NUMBER) NOT final;</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">/</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">CREATE OR REPLACE TYPE final_t UNDER sub_t</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">  (n3 NUMBER);</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">/</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">CREATE OR REPLACE PACKAGE p IS</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">   FUNCTION func (arg super_t) RETURN NUMBER;</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">   FUNCTION func (arg sub_t) RETURN NUMBER;</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">END;</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">/</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">CREATE OR REPLACE PACKAGE BODY p IS</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">   FUNCTION func (arg super_t) RETURN NUMBER IS BEGIN RETURN 1; END;</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">   FUNCTION func (arg sub_t) RETURN NUMBER IS BEGIN RETURN 2; END;</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">END;</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">/</span></pre>
<pre style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier'; font-size:medium; color:#000000;"><br /></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">DECLARE</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">  v final_t := final_t(1,2,3);</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">BEGIN</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">  DBMS_OUTPUT.PUT_LINE(p.func(v));  -- prints 2</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">END;</span></pre>
<pre style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">/</span></pre>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;">In </span><a href="http://oracle.su/docs/11g/appdev.112/e11822/adobjplsql.htm#CHDFGAII"><span style=" font-family:'Times New Roman'; font-size:medium; text-decoration: underline; color:#0000ff;">Example 3-10</span></a><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;">, determining which instance to call happens at run time because the functions are overriding member functions of the type hierarchy. This is dynamic method dispatch, described in </span><a href="http://oracle.su/docs/11g/appdev.112/e11822/adobjbas.htm#i468270"><span style=" font-family:'Times New Roman'; font-size:medium; text-decoration: underline; color:#0000ff;">&quot;Dynamic Method Dispatch&quot;</span></a><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;">.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;">Though </span><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">v</span><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;"> is an instance of </span><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">super_t</span><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;">, because the value of </span><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">final_t</span><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;"> is assigned to </span><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">v</span><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;">, the </span><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">sub_t</span><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;"> instance of the function is called, following the rules of substitution.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="CHDFGAII"></a><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;">E</span><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;">xample 3-10 Resolving PL/SQL Functions With Inheritance Dynamically</span></p>
<pre style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">-- Perform the following drop commands if you created these objects in Ex. 3-9</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">-- DROP PACKAGE p;</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">-- DROP TYPE final_t;</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">-- DROP TYPE _sub_t;</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">-- DROP TYPE super_t FORCE;</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">CREATE OR REPLACE TYPE super_t AS OBJECT</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">  (n NUMBER, MEMBER FUNCTION func RETURN NUMBER) NOT final;</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">/</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">CREATE OR REPLACE TYPE BODY super_t AS</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;"> MEMBER FUNCTION func RETURN NUMBER IS BEGIN RETURN 1; END; END;</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">/</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">CREATE TYPE sub_t UNDER super_t</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">  (n2 NUMBER,</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">   OVERRIDING MEMBER FUNCTION func RETURN NUMBER) NOT final;</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">/</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">CREATE OR REPLACE TYPE BODY sub_t AS</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;"> OVERRIDING MEMBER FUNCTION func RETURN NUMBER IS BEGIN RETURN 2; END; END;</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">/</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">CREATE OR REPLACE TYPE final_t UNDER sub_t</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">  (n3 NUMBER);</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">/</span></pre>
<pre style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier'; font-size:medium; color:#000000;"><br /></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">DECLARE</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">  v super_t := final_t(1,2,3);</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">BEGIN</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">  DBMS_OUTPUT.PUT_LINE('answer:'|| v.func); -- prints 2</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">END;</span></pre>
<pre style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">/</span></pre>
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="insertedID4"></a><span style=" font-family:'Times New Roman'; font-size:x-large; font-weight:600; color:#000000;">U</span><span style=" font-family:'Times New Roman'; font-size:x-large; font-weight:600; color:#000000;">sing Dynamic SQL With Objects</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;">Dynamic SQL is a feature of PL/SQL that enables you to enter SQL information at run time, such as: a table name, the full text of a SQL statement, or variable information.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;">See Also:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://oracle.su/docs/11g/appdev.112/e10472/dynamic.htm#LNPLS011"><span style=" font-family:'Times New Roman'; font-size:medium; text-decoration: underline; color:#0000ff;">Oracle Database PL/SQL Language Reference</span></a></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://oracle.su/docs/11g/appdev.112/e11822/adobjplsql.htm#CHDHCFAB"><span style=" font-family:'Times New Roman'; font-size:medium; text-decoration: underline; color:#0000ff;">Example 3-11</span></a><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;"> illustrates the use of objects and collections with dynamic SQL. First, the example defines the object type </span><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">person_typ</span><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;"> and the </span><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">VARRAY</span><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;"> type </span><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">hobbies_var</span><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;">, then it defines the package, </span><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">teams</span><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;">, that uses these types. You need </span><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">AUTHID</span><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;"> </span><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">CURRENT_USER</span><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;"> to execute dynamic package methods; otherwise, these methods raise an insufficient privileges error when you run </span><a href="http://oracle.su/docs/11g/appdev.112/e11822/adobjplsql.htm#CHDBHEII"><span style=" font-family:'Times New Roman'; font-size:medium; text-decoration: underline; color:#0000ff;">Example 3-12</span></a><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;">.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="CHDHCFAB"></a><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;">E</span><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;">xample 3-11 A Package that Uses Dynamic SQL for Object Types and Collections</span></p>
<pre style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">CREATE OR REPLACE TYPE person_typ AS OBJECT (name VARCHAR2(25), age NUMBER);</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">/</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">CREATE TYPE hobbies_var AS VARRAY(10) OF VARCHAR2(25);</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">/</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">CREATE OR REPLACE PACKAGE teams </span></pre>
<pre style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier'; font-size:medium; color:#000000;"><br /></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">   AUTHID CURRENT_USER AS</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">   PROCEDURE create_table (tab_name VARCHAR2);</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">   PROCEDURE insert_row (tab_name VARCHAR2, p person_typ, h hobbies_var);</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">   PROCEDURE print_table (tab_name VARCHAR2);</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">END;</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">/</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">CREATE OR REPLACE PACKAGE BODY teams AS</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">   PROCEDURE create_table (tab_name VARCHAR2) IS</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">   BEGIN</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">      EXECUTE IMMEDIATE 'CREATE TABLE ' || tab_name ||</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">                        ' (pers person_typ, hobbs hobbies_var)';</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">   END;</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">   PROCEDURE insert_row (</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">      tab_name VARCHAR2,</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">      p person_typ,</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">      h hobbies_var) IS</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">   BEGIN</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">      EXECUTE IMMEDIATE 'INSERT INTO ' || tab_name ||</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">         ' VALUES (:1, :2)' USING p, h;</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">   END;</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">   PROCEDURE print_table (tab_name VARCHAR2) IS</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">      TYPE  refcurtyp IS REF CURSOR;</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">      v_cur refcurtyp;</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">      p     person_typ;</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">      h     hobbies_var;</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">   BEGIN</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">      OPEN v_cur FOR 'SELECT pers, hobbs FROM ' || tab_name;</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">      LOOP</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">         FETCH v_cur INTO p, h;</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">         EXIT WHEN v_cur%NOTFOUND;</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">         -- print attributes of 'p' and elements of 'h'</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">         DBMS_OUTPUT.PUT_LINE('Name: ' || p.name || ' - Age: ' || p.age);</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">         FOR i IN h.FIRST..h.LAST </span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">         LOOP</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">           DBMS_OUTPUT.PUT_LINE('Hobby(' || i || '): ' || h(i));</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">         END LOOP;</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">      END LOOP;</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">      CLOSE v_cur;</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">   END;</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">END;</span></pre>
<pre style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">/</span></pre>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;">From an anonymous block, you might call the procedures in package </span><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">TEAMS</span><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;">:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="CHDBHEII"></a><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;">E</span><span style=" font-family:'Times New Roman'; font-size:medium; color:#000000;">xample 3-12 Calling Procedures from the TEAMS Package</span></p>
<pre style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">DECLARE</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">   team_name VARCHAR2(15);</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">BEGIN</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">   team_name := 'Notables';</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">   TEAMS.create_table(team_name);</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">   TEAMS.insert_row(team_name, person_typ('John', 31),</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">      hobbies_var('skiing', 'coin collecting', 'tennis'));</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">   TEAMS.insert_row(team_name, person_typ('Mary', 28),</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">      hobbies_var('golf', 'quilting', 'rock climbing', 'fencing'));</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">   TEAMS.print_table(team_name);</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">END;</span></pre>
<pre style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:medium; color:#000000;">/</span></pre></body></html>