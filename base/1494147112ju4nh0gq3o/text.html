<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'DejaVu Sans'; font-size:11pt; font-weight:400; font-style:normal;">
<pre style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#2b2b2b;"><span style=" font-family:'Courier New'; color:#808080;">#!/usr/bin/env python<br /># --*-- coding:utf-8 --*--<br /># example packbox.py<br /><br /></span><span style=" font-family:'Courier New'; font-weight:600; color:#cc7832;">import </span><span style=" font-family:'Courier New'; color:#a9b7c6;">gi<br />gi.require_version(</span><span style=" font-family:'Courier New'; color:#008080;">'Gtk'</span><span style=" font-family:'Courier New'; color:#cc7832;">, </span><span style=" font-family:'Courier New'; color:#008080;">'3.0'</span><span style=" font-family:'Courier New'; color:#a9b7c6;">)<br /></span><span style=" font-family:'Courier New'; color:#808080;">#from gi.repository.Gtk import *<br /><br /></span><span style=" font-family:'Courier New'; font-weight:600; color:#cc7832;">import </span><span style=" font-family:'Courier New'; color:#a9b7c6;">gi.repository.Gtk </span><span style=" font-family:'Courier New'; font-weight:600; color:#cc7832;">as </span><span style=" font-family:'Courier New'; color:#a9b7c6;">gtk<br /><br /><br /></span><span style=" font-family:'Courier New'; font-weight:600; color:#cc7832;">class </span><span style=" font-family:'Courier New'; font-weight:600; color:#a9b7c6;">Table</span><span style=" font-family:'Courier New'; color:#a9b7c6;">:<br />    </span><span style=" font-family:'Courier New'; color:#808080;"># Наш callback.<br />    # Данные передаваемые этому методу выводятся в stdout<br />    </span><span style=" font-family:'Courier New'; font-weight:600; color:#cc7832;">def </span><span style=" font-family:'Courier New'; font-weight:600; color:#a9b7c6;">callback</span><span style=" font-family:'Courier New'; color:#a9b7c6;">(</span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#cc7832;">, </span><span style=" font-family:'Courier New'; color:#808080;">widget</span><span style=" font-family:'Courier New'; color:#cc7832;">, </span><span style=" font-family:'Courier New'; color:#a9b7c6;">data=</span><span style=" font-family:'Courier New'; font-weight:600; color:#cc7832;">None</span><span style=" font-family:'Courier New'; color:#a9b7c6;">):<br />        </span><span style=" font-family:'Courier New'; color:#8888c6;">print</span><span style=" font-family:'Courier New'; color:#a9b7c6;">(</span><span style=" font-family:'Courier New'; color:#008080;">&quot;Привет снова - %s была нажата&quot; </span><span style=" font-family:'Courier New'; color:#a9b7c6;">% data)<br /><br />    </span><span style=" font-family:'Courier New'; color:#808080;"># Этот callback завершает программу<br />    </span><span style=" font-family:'Courier New'; font-weight:600; color:#cc7832;">def </span><span style=" font-family:'Courier New'; font-weight:600; color:#a9b7c6;">delete_event</span><span style=" font-family:'Courier New'; color:#a9b7c6;">(</span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#cc7832;">, </span><span style=" font-family:'Courier New'; color:#808080;">widget</span><span style=" font-family:'Courier New'; color:#cc7832;">, </span><span style=" font-family:'Courier New'; color:#808080;">event</span><span style=" font-family:'Courier New'; color:#cc7832;">, </span><span style=" font-family:'Courier New'; color:#808080;">data=</span><span style=" font-family:'Courier New'; font-weight:600; color:#808080;">None</span><span style=" font-family:'Courier New'; color:#a9b7c6;">):<br />        gtk.main_quit()<br />        </span><span style=" font-family:'Courier New'; font-weight:600; color:#cc7832;">return False<br /><br />    def </span><span style=" font-family:'Courier New'; color:#b200b2;">__init__</span><span style=" font-family:'Courier New'; color:#a9b7c6;">(</span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">):<br />        </span><span style=" font-family:'Courier New'; color:#808080;"># Создаём новое окно<br />        </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.window = gtk.Window()<br /><br />        </span><span style=" font-family:'Courier New'; color:#808080;"># Устанавливаем заголовок окна<br />        </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.window.set_title(</span><span style=" font-family:'Courier New'; color:#008080;">&quot;Table&quot;</span><span style=" font-family:'Courier New'; color:#a9b7c6;">)<br /><br />        </span><span style=" font-family:'Courier New'; color:#808080;"># Устанавливаем обработчик для delete_event, который немедленно<br />        # Завершает работу GTK.<br />        </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.window.connect(</span><span style=" font-family:'Courier New'; color:#008080;">&quot;delete_event&quot;</span><span style=" font-family:'Courier New'; color:#cc7832;">, </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.delete_event)<br /><br />        </span><span style=" font-family:'Courier New'; color:#808080;"># Устанавливаем границу для окна<br />        </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.window.set_border_width(</span><span style=" font-family:'Courier New'; color:#6897bb;">20</span><span style=" font-family:'Courier New'; color:#a9b7c6;">)<br /><br />        </span><span style=" font-family:'Courier New'; color:#808080;"># Создаём таблицу 2х2<br />        </span><span style=" font-family:'Courier New'; color:#a9b7c6;">table = gtk.Table(</span><span style=" font-family:'Courier New'; color:#6897bb;">2</span><span style=" font-family:'Courier New'; color:#cc7832;">, </span><span style=" font-family:'Courier New'; color:#6897bb;">2</span><span style=" font-family:'Courier New'; color:#cc7832;">, </span><span style=" font-family:'Courier New'; font-weight:600; color:#cc7832;">True</span><span style=" font-family:'Courier New'; color:#a9b7c6;">)<br /><br />        </span><span style=" font-family:'Courier New'; color:#808080;"># Размещаем таблицу в главном окне<br />        </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.window.add(table)<br /><br />        </span><span style=" font-family:'Courier New'; color:#808080;"># Создаём первую кнопку<br />        </span><span style=" font-family:'Courier New'; color:#a9b7c6;">button = gtk.Button(</span><span style=" font-family:'Courier New'; color:#008080;">&quot;кнопка 1&quot;</span><span style=" font-family:'Courier New'; color:#a9b7c6;">)<br /><br />        </span><span style=" font-family:'Courier New'; color:#808080;"># По нажатии кнопки мы вызываем метод &quot;callback&quot;<br />        # с указателем на &quot;кнопка 1&quot; в виде аргумента<br />        </span><span style=" font-family:'Courier New'; color:#a9b7c6;">button.connect(</span><span style=" font-family:'Courier New'; color:#008080;">&quot;clicked&quot;</span><span style=" font-family:'Courier New'; color:#cc7832;">, </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.callback</span><span style=" font-family:'Courier New'; color:#cc7832;">, </span><span style=" font-family:'Courier New'; color:#008080;">&quot;кнопка 1&quot;</span><span style=" font-family:'Courier New'; color:#a9b7c6;">)<br /><br />        </span><span style=" font-family:'Courier New'; color:#808080;"># Вставляем кнопку 1 в верхнюю левую ячейку таблицы<br />        </span><span style=" font-family:'Courier New'; color:#a9b7c6;">table.attach(button</span><span style=" font-family:'Courier New'; color:#cc7832;">, </span><span style=" font-family:'Courier New'; color:#6897bb;">0</span><span style=" font-family:'Courier New'; color:#cc7832;">, </span><span style=" font-family:'Courier New'; color:#6897bb;">1</span><span style=" font-family:'Courier New'; color:#cc7832;">, </span><span style=" font-family:'Courier New'; color:#6897bb;">0</span><span style=" font-family:'Courier New'; color:#cc7832;">, </span><span style=" font-family:'Courier New'; color:#6897bb;">1</span><span style=" font-family:'Courier New'; color:#a9b7c6;">)<br /><br />        button.show()<br /><br />        </span><span style=" font-family:'Courier New'; color:#808080;"># Создаём вторую кнопку<br /><br />        </span><span style=" font-family:'Courier New'; color:#a9b7c6;">button = gtk.Button(</span><span style=" font-family:'Courier New'; color:#008080;">&quot;кнопка 2&quot;</span><span style=" font-family:'Courier New'; color:#a9b7c6;">)<br /><br />        </span><span style=" font-family:'Courier New'; color:#808080;"># По нажатию кнопки мы вызываем метод &quot;callback&quot;<br />        # с указателем на &quot;кнопка 2&quot; как аргумент<br />        </span><span style=" font-family:'Courier New'; color:#a9b7c6;">button.connect(</span><span style=" font-family:'Courier New'; color:#008080;">&quot;clicked&quot;</span><span style=" font-family:'Courier New'; color:#cc7832;">, </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.callback</span><span style=" font-family:'Courier New'; color:#cc7832;">, </span><span style=" font-family:'Courier New'; color:#008080;">&quot;кнопка 2&quot;</span><span style=" font-family:'Courier New'; color:#a9b7c6;">)<br />        </span><span style=" font-family:'Courier New'; color:#808080;"># Вставляем кнопку 2 в верхнюю правую ячейку таблицы.<br />        </span><span style=" font-family:'Courier New'; color:#a9b7c6;">table.attach(button</span><span style=" font-family:'Courier New'; color:#cc7832;">, </span><span style=" font-family:'Courier New'; color:#6897bb;">1</span><span style=" font-family:'Courier New'; color:#cc7832;">, </span><span style=" font-family:'Courier New'; color:#6897bb;">2</span><span style=" font-family:'Courier New'; color:#cc7832;">, </span><span style=" font-family:'Courier New'; color:#6897bb;">0</span><span style=" font-family:'Courier New'; color:#cc7832;">, </span><span style=" font-family:'Courier New'; color:#6897bb;">1</span><span style=" font-family:'Courier New'; color:#a9b7c6;">)<br /><br />        button.show()<br /><br />        </span><span style=" font-family:'Courier New'; color:#808080;"># Создаём кнопку &quot;Выход&quot;<br />        </span><span style=" font-family:'Courier New'; color:#a9b7c6;">button = gtk.Button(</span><span style=" font-family:'Courier New'; color:#008080;">&quot;Выход&quot;</span><span style=" font-family:'Courier New'; color:#a9b7c6;">)<br /><br />        </span><span style=" font-family:'Courier New'; color:#808080;"># Когда кнопка нажата, мы вызываем функцию main_quit<br />        # и программа завершает свою работу<br />        </span><span style=" font-family:'Courier New'; color:#a9b7c6;">button.connect(</span><span style=" font-family:'Courier New'; color:#008080;">&quot;clicked&quot;</span><span style=" font-family:'Courier New'; color:#cc7832;">, </span><span style=" font-family:'Courier New'; font-weight:600; color:#cc7832;">lambda </span><span style=" font-family:'Courier New'; color:#a9b7c6;">w: gtk.main_quit())<br /><br />        </span><span style=" font-family:'Courier New'; color:#808080;"># Вставляем кнопку выхода в 2 нижние ячейки.<br />        </span><span style=" font-family:'Courier New'; color:#a9b7c6;">table.attach(button</span><span style=" font-family:'Courier New'; color:#cc7832;">, </span><span style=" font-family:'Courier New'; color:#6897bb;">0</span><span style=" font-family:'Courier New'; color:#cc7832;">, </span><span style=" font-family:'Courier New'; color:#6897bb;">2</span><span style=" font-family:'Courier New'; color:#cc7832;">, </span><span style=" font-family:'Courier New'; color:#6897bb;">1</span><span style=" font-family:'Courier New'; color:#cc7832;">, </span><span style=" font-family:'Courier New'; color:#6897bb;">2</span><span style=" font-family:'Courier New'; color:#a9b7c6;">)<br /><br />        button.show()<br /><br />        table.show()<br />        </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.window.show()<br /><br /><br /></span><span style=" font-family:'Courier New'; font-weight:600; color:#cc7832;">def </span><span style=" font-family:'Courier New'; font-weight:600; color:#a9b7c6;">main</span><span style=" font-family:'Courier New'; color:#a9b7c6;">():<br />    gtk.main()<br />    </span><span style=" font-family:'Courier New'; font-weight:600; color:#cc7832;">return </span><span style=" font-family:'Courier New'; color:#6897bb;">0<br /><br /><br /></span><span style=" font-family:'Courier New'; font-weight:600; color:#cc7832;">if </span><span style=" font-family:'Courier New'; color:#a9b7c6;">__name__ == </span><span style=" font-family:'Courier New'; color:#008080;">&quot;__main__&quot;</span><span style=" font-family:'Courier New'; color:#a9b7c6;">:<br />    Table()<br />    main()</span></pre></body></html>