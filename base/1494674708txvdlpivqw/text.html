<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'DejaVu Sans'; font-size:11pt; font-weight:400; font-style:normal;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" background-color:#2b2b2b;">Программа берет текст из entry и декодирует его в utf-8</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#2b2b2b;"><span style=" font-family:'Courier New'; color:#a9b7c6; background-color:#2b2b2b;">text_to_find = </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.find_entry.get_text().decode(</span><span style=" font-family:'Courier New'; color:#a5c261;">&quot;utf-8&quot;</span><span style=" font-family:'Courier New'; color:#a9b7c6;">)  </span><span style=" font-family:'Courier New'; color:#808080;"># take text from textview<br /><br /></span><span style=" font-family:'Courier New'; color:#a9b7c6;">d_all = </span><span style=" font-family:'Courier New'; color:#8888c6;">dict</span><span style=" font-family:'Courier New'; color:#a9b7c6;">()<br /><br />l_name = </span><span style=" font-family:'Courier New'; color:#8888c6;">list</span><span style=" font-family:'Courier New'; color:#a9b7c6;">()                     </span><span style=" font-family:'Courier New'; color:#808080;"># list to find objects<br /></span><span style=" font-family:'Courier New'; color:#a9b7c6;">l_name.append(text_to_find)<br />l_d = </span><span style=" font-family:'Courier New'; color:#8888c6;">list</span><span style=" font-family:'Courier New'; color:#a9b7c6;">()<br /><br /><br /></span><span style=" font-family:'Courier New'; color:#808080;"># if root is not None -&gt; use in select<br /></span><span style=" font-family:'Courier New'; color:#a9b7c6;">entry = </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.name_combo.get_child()<br />paramount_item = entry.get_text()<br /></span><span style=" font-family:'Courier New'; font-weight:600; color:#cc7832;">if not </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.id_paramount==</span><span style=" font-family:'Courier New'; color:#6897bb;">0 </span><span style=" font-family:'Courier New'; font-weight:600; color:#cc7832;">and not </span><span style=" font-family:'Courier New'; color:#a9b7c6;">paramount_item == </span><span style=" font-family:'Courier New'; color:#a5c261;">&quot;&quot;</span><span style=" font-family:'Courier New'; color:#a9b7c6;">:<br />    </span><span style=" font-family:'Courier New'; font-weight:600; color:#cc7832;">for </span><span style=" font-family:'Courier New'; color:#a9b7c6;">c </span><span style=" font-family:'Courier New'; font-weight:600; color:#cc7832;">in </span><span style=" font-family:'Courier New'; color:#a9b7c6;">Chain.select().where(Chain.id_root == </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.id_paramount):<br />        </span><span style=" font-family:'Courier New'; font-weight:600; color:#cc7832;">if not </span><span style=" font-family:'Courier New'; color:#a9b7c6;">c.b_root == </span><span style=" font-family:'Courier New'; color:#6897bb;">1</span><span style=" font-family:'Courier New'; color:#a9b7c6;">:                </span><span style=" font-family:'Courier New'; color:#808080;"># not use root items<br />            </span><span style=" font-family:'Courier New'; color:#a9b7c6;">d_all[c.id] = c.c_item  </span><span style=" font-family:'Courier New'; color:#808080;"># take all data in database<br /></span><span style=" font-family:'Courier New'; font-weight:600; color:#cc7832;">else</span><span style=" font-family:'Courier New'; color:#a9b7c6;">:<br />    </span><span style=" font-family:'Courier New'; font-weight:600; color:#cc7832;">for </span><span style=" font-family:'Courier New'; color:#a9b7c6;">c </span><span style=" font-family:'Courier New'; font-weight:600; color:#cc7832;">in </span><span style=" font-family:'Courier New'; color:#a9b7c6;">Chain.select():<br />        </span><span style=" font-family:'Courier New'; font-weight:600; color:#cc7832;">if not </span><span style=" font-family:'Courier New'; color:#a9b7c6;">c.b_root == </span><span style=" font-family:'Courier New'; color:#8888c6;">True</span><span style=" font-family:'Courier New'; color:#a9b7c6;">:                </span><span style=" font-family:'Courier New'; color:#808080;"># not use root items<br />            </span><span style=" font-family:'Courier New'; color:#a9b7c6;">d_all[c.id] = c.c_item  </span><span style=" font-family:'Courier New'; color:#808080;"># take all data in database<br />        </span><span style=" font-family:'Courier New'; color:#a9b7c6;">d_all[c.id] = c.c_item          </span><span style=" font-family:'Courier New'; color:#808080;"># take all data in database<br /><br /><br /></span><span style=" font-family:'Courier New'; font-weight:600; color:#cc7832;">for </span><span style=" font-family:'Courier New'; color:#a9b7c6;">k</span><span style=" font-family:'Courier New'; color:#cc7832;">, </span><span style=" font-family:'Courier New'; color:#a9b7c6;">v </span><span style=" font-family:'Courier New'; font-weight:600; color:#cc7832;">in </span><span style=" font-family:'Courier New'; color:#a9b7c6;">d_all.items():              </span><span style=" font-family:'Courier New'; color:#808080;"># combine list of values from dictionary<br />    </span><span style=" font-family:'Courier New'; color:#a9b7c6;">l_d.append(v)<br /></span><span style=" font-family:'Courier New'; font-weight:600; color:#cc7832;">for </span><span style=" font-family:'Courier New'; color:#a9b7c6;">i </span><span style=" font-family:'Courier New'; font-weight:600; color:#cc7832;">in </span><span style=" font-family:'Courier New'; color:#8888c6;">range</span><span style=" font-family:'Courier New'; color:#a9b7c6;">(</span><span style=" font-family:'Courier New'; color:#8888c6;">len</span><span style=" font-family:'Courier New'; color:#a9b7c6;">(l_d)):<br />    set_d = </span><span style=" font-family:'Courier New'; color:#8888c6;">set</span><span style=" font-family:'Courier New'; color:#a9b7c6;">(l_d[i])  </span><span style=" font-family:'Courier New'; color:#808080;"># set of each element of dictionary<br />    </span><span style=" font-family:'Courier New'; font-weight:600; color:#cc7832;">for </span><span style=" font-family:'Courier New'; color:#a9b7c6;">j </span><span style=" font-family:'Courier New'; font-weight:600; color:#cc7832;">in </span><span style=" font-family:'Courier New'; color:#8888c6;">range</span><span style=" font-family:'Courier New'; color:#a9b7c6;">(</span><span style=" font-family:'Courier New'; color:#8888c6;">len</span><span style=" font-family:'Courier New'; color:#a9b7c6;">(l_name)):<br />        set_l = </span><span style=" font-family:'Courier New'; color:#8888c6;">set</span><span style=" font-family:'Courier New'; color:#a9b7c6;">(l_name[j])<br />        inter = set_d.intersection(set_l)<br />        </span><span style=" font-family:'Courier New'; color:#808080;">l_i </span><span style=" font-family:'Courier New'; color:#a9b7c6;">= </span><span style=" font-family:'Courier New'; color:#8888c6;">len</span><span style=" font-family:'Courier New'; color:#a9b7c6;">(inter)<br />        </span><span style=" font-family:'Courier New'; font-weight:600; color:#cc7832;">if </span><span style=" font-family:'Courier New'; color:#8888c6;">len</span><span style=" font-family:'Courier New'; color:#a9b7c6;">(inter) == </span><span style=" font-family:'Courier New'; color:#8888c6;">len</span><span style=" font-family:'Courier New'; color:#a9b7c6;">(</span><span style=" font-family:'Courier New'; color:#8888c6;">set</span><span style=" font-family:'Courier New'; color:#a9b7c6;">(l_name[j])):<br />            </span><span style=" font-family:'Courier New'; font-weight:600; color:#cc7832;">for </span><span style=" font-family:'Courier New'; color:#a9b7c6;">k</span><span style=" font-family:'Courier New'; color:#cc7832;">, </span><span style=" font-family:'Courier New'; color:#a9b7c6;">v </span><span style=" font-family:'Courier New'; font-weight:600; color:#cc7832;">in </span><span style=" font-family:'Courier New'; color:#a9b7c6;">d_all.items():<br />                </span><span style=" font-family:'Courier New'; font-weight:600; color:#cc7832;">if </span><span style=" font-family:'Courier New'; color:#a9b7c6;">v == l_d[i]:<br />                    res = k  </span><span style=" font-family:'Courier New'; color:#808080;"># take key<br />                    </span><span style=" font-family:'Courier New'; font-weight:600; color:#cc7832;">if not </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.is_root(</span><span style=" font-family:'Courier New'; color:#8888c6;">int</span><span style=" font-family:'Courier New'; color:#a9b7c6;">(res)):<br />                        </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.rewrite_class_data(</span><span style=" font-family:'Courier New'; color:#8888c6;">int</span><span style=" font-family:'Courier New'; color:#a9b7c6;">(res))<br />                        </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.write_cont()<br />                    </span><span style=" font-family:'Courier New'; font-weight:600; color:#cc7832;">if </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.have_previous(</span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.id_previous):<br />                        </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.b_up.set_visible(</span><span style=" font-family:'Courier New'; color:#8888c6;">True</span><span style=" font-family:'Courier New'; color:#a9b7c6;">)<br />                    </span><span style=" font-family:'Courier New'; font-weight:600; color:#cc7832;">else</span><span style=" font-family:'Courier New'; color:#a9b7c6;">:<br />                        </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.b_up.hide()<br />                    </span><span style=" font-family:'Courier New'; font-weight:600; color:#cc7832;">if </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.id_previous == </span><span style=" font-family:'Courier New'; color:#6897bb;">0</span><span style=" font-family:'Courier New'; color:#a9b7c6;">:<br />                        </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#a9b7c6;">.b_up.hide()<br />                    </span><span style=" font-family:'Courier New'; font-weight:600; color:#cc7832; background-color:#344134;">return</span></p></body></html>