<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'DejaVu Sans'; font-size:11pt; font-weight:400; font-style:normal;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#000000;">.connect(</span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#000000;">.mythread, QtCore.SIGNAL(</span><span style=" font-family:'Courier New'; font-weight:600; color:#008080;">&quot;mysignal(QString)&quot;</span><span style=" font-family:'Courier New'; color:#000000;">), </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#000000;">.on_change, QtCore.Qt.QueuedConnection)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; color:#000000;">3-ий параметр - ссылка на метод</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; color:#000000;">4-ый параметр - сигнал помещается в очередь событий и обработчик должен выполняться в потоке приемника сигнала, т.е. в GUI-потоке</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Courier New'; font-style:italic; color:#808080;">-----------</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Courier New'; font-style:italic; color:#808080;"># -*- coding: utf-8 -*-<br /><br /></span><span style=" font-family:'Courier New'; font-weight:600; color:#000080;">from </span><span style=" font-family:'Courier New'; color:#000000;">PyQt4 </span><span style=" font-family:'Courier New'; font-weight:600; color:#000080;">import </span><span style=" font-family:'Courier New'; color:#000000;">QtCore, QtGui<br /></span><span style=" font-family:'Courier New'; font-weight:600; color:#000080;">import </span><span style=" font-family:'Courier New'; color:#000000;">sys<br /><br /></span><span style=" font-family:'Courier New'; font-weight:600; color:#000080;">class </span><span style=" font-family:'Courier New'; color:#000000;">MyThread(QtCore.QThread):<br />    </span><span style=" font-family:'Courier New'; font-weight:600; color:#000080;">def </span><span style=" font-family:'Courier New'; color:#b200b2;">__init__</span><span style=" font-family:'Courier New'; color:#000000;">(</span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#000000;">, parent=</span><span style=" font-family:'Courier New'; font-weight:600; color:#000080;">None</span><span style=" font-family:'Courier New'; color:#000000;">):<br />        QtCore.QThread.</span><span style=" font-family:'Courier New'; color:#b200b2;">__init__</span><span style=" font-family:'Courier New'; color:#000000;">(</span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#000000;">, parent)<br />    </span><span style=" font-family:'Courier New'; font-weight:600; color:#000080;">def </span><span style=" font-family:'Courier New'; color:#000000;">run(</span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#000000;">):<br />        </span><span style=" font-family:'Courier New'; font-weight:600; color:#000080;">for </span><span style=" font-family:'Courier New'; color:#000000;">i </span><span style=" font-family:'Courier New'; font-weight:600; color:#000080;">in </span><span style=" font-family:'Courier New'; color:#000080;">range</span><span style=" font-family:'Courier New'; color:#000000;">(</span><span style=" font-family:'Courier New'; color:#0000ff;">1</span><span style=" font-family:'Courier New'; color:#000000;">, </span><span style=" font-family:'Courier New'; color:#0000ff;">21</span><span style=" font-family:'Courier New'; color:#000000;">):<br />            </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#000000;">.sleep(</span><span style=" font-family:'Courier New'; color:#0000ff;">3</span><span style=" font-family:'Courier New'; color:#000000;">)<br />            </span><span style=" font-family:'Courier New'; font-style:italic; color:#808080;"># give data from thread through signal<br />            </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#000000;">.emit(QtCore.SIGNAL(</span><span style=" font-family:'Courier New'; font-weight:600; color:#008080;">&quot;mysignal(QString)&quot;</span><span style=" font-family:'Courier New'; color:#000000;">), </span><span style=" font-family:'Courier New'; font-weight:600; color:#008080;">&quot;i = %s&quot; </span><span style=" font-family:'Courier New'; color:#000000;">%i)<br /><br /></span><span style=" font-family:'Courier New'; font-weight:600; color:#000080;">class </span><span style=" font-family:'Courier New'; color:#000000;">MyWindow(QtGui.QWidget):<br />    </span><span style=" font-family:'Courier New'; font-weight:600; color:#000080;">def </span><span style=" font-family:'Courier New'; color:#b200b2;">__init__</span><span style=" font-family:'Courier New'; color:#000000;">(</span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#000000;">, parent=</span><span style=" font-family:'Courier New'; font-weight:600; color:#000080;">None</span><span style=" font-family:'Courier New'; color:#000000;">):<br />        QtGui.QWidget.</span><span style=" font-family:'Courier New'; color:#b200b2;">__init__</span><span style=" font-family:'Courier New'; color:#000000;">(</span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#000000;">, parent)<br />        </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#000000;">.label = QtGui.QLabel(</span><span style=" font-family:'Courier New'; font-weight:600; color:#008080;">&quot;Press button for execute thread&quot;</span><span style=" font-family:'Courier New'; color:#000000;">)<br />        </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#000000;">.label.setAlignment(QtCore.Qt.AlignCenter)<br />        </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#000000;">.button = QtGui.QPushButton(</span><span style=" font-family:'Courier New'; font-weight:600; color:#008080;">&quot;Execute process&quot;</span><span style=" font-family:'Courier New'; color:#000000;">)<br />        </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#000000;">.vbox = QtGui.QVBoxLayout()<br />        </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#000000;">.vbox.addWidget(</span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#000000;">.label)<br />        </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#000000;">.vbox.addWidget(</span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#000000;">.button)<br />        </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#000000;">.setLayout(</span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#000000;">.vbox)<br />        </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#000000;">.mythread = MyThread()              </span><span style=" font-family:'Courier New'; font-style:italic; color:#808080;"># create instance of thread<br />        </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#000000;">.connect(</span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#000000;">.button, QtCore.SIGNAL(</span><span style=" font-family:'Courier New'; font-weight:600; color:#008080;">&quot;clicked()&quot;</span><span style=" font-family:'Courier New'; color:#000000;">), </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#000000;">.on_clicked)<br />        </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#000000;">.connect(</span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#000000;">.mythread, QtCore.SIGNAL(</span><span style=" font-family:'Courier New'; font-weight:600; color:#008080;">&quot;started()&quot;</span><span style=" font-family:'Courier New'; color:#000000;">), </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#000000;">.on_started)<br />        </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#000000;">.connect(</span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#000000;">.mythread, QtCore.SIGNAL(</span><span style=" font-family:'Courier New'; font-weight:600; color:#008080;">&quot;finished()&quot;</span><span style=" font-family:'Courier New'; color:#000000;">), </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#000000;">.on_finished)<br />        </span><span style=" font-family:'FreeMono'; font-weight:600; color:#6a1009;">self.connect(self.mythread, QtCore.SIGNAL(&quot;mysignal(QString)&quot;), self.on_change,</span><span style=" font-family:'Courier New'; color:#000000;"> </span><span style=" font-family:'FreeMono'; font-weight:600; color:#6a1009;">QtCore.Qt.QueuedConnection</span><span style=" font-family:'Courier New'; color:#000000;">)<br /><br />    </span><span style=" font-family:'Courier New'; font-weight:600; color:#000080;">def </span><span style=" font-family:'Courier New'; color:#000000;">on_clicked(</span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#000000;">):<br />        </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#000000;">.button.setDisabled(</span><span style=" font-family:'Courier New'; font-weight:600; color:#000080;">True</span><span style=" font-family:'Courier New'; color:#000000;">)<br />        </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#000000;">.mythread.start()<br /><br />    </span><span style=" font-family:'Courier New'; font-weight:600; color:#000080;">def </span><span style=" font-family:'Courier New'; color:#000000;">on_started(</span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#000000;">):<br />        </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#000000;">.label.setText(</span><span style=" font-family:'Courier New'; font-weight:600; color:#008080;">&quot;Call method on_started()&quot;</span><span style=" font-family:'Courier New'; color:#000000;">)<br /><br />    </span><span style=" font-family:'Courier New'; font-weight:600; color:#000080;">def </span><span style=" font-family:'Courier New'; color:#000000;">on_finished(</span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#000000;">):<br />        </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#000000;">.label.setText(</span><span style=" font-family:'Courier New'; font-weight:600; color:#008080;">&quot;Called method on_finished()&quot;</span><span style=" font-family:'Courier New'; color:#000000;">)<br />        </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#000000;">.button.setDisabled(</span><span style=" font-family:'Courier New'; font-weight:600; color:#000080;">False</span><span style=" font-family:'Courier New'; color:#000000;">)<br /><br />    </span><span style=" font-family:'Courier New'; font-weight:600; color:#000080;">def </span><span style=" font-family:'Courier New'; color:#000000;">on_change(</span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#000000;">, s):<br />        </span><span style=" font-family:'Courier New'; color:#94558d;">self</span><span style=" font-family:'Courier New'; color:#000000;">.label.setText(s)<br /><br /><br /></span><span style=" font-family:'Courier New'; font-weight:600; color:#000080;">if </span><span style=" font-family:'Courier New'; color:#000000;">__name__ == </span><span style=" font-family:'Courier New'; font-weight:600; color:#008080;">'__main__'</span><span style=" font-family:'Courier New'; color:#000000;">:<br />    app = QtGui.QApplication(sys.argv)<br />    window = MyWindow()<br />    window.setWindowTitle(</span><span style=" font-family:'Courier New'; font-weight:600; color:#008080;">&quot;Using class QThread&quot;</span><span style=" font-family:'Courier New'; color:#000000;">)<br />    window.resize(</span><span style=" font-family:'Courier New'; color:#0000ff;">300</span><span style=" font-family:'Courier New'; color:#000000;">, </span><span style=" font-family:'Courier New'; color:#0000ff;">70</span><span style=" font-family:'Courier New'; color:#000000;">)<br />    window.show()<br />    sys.exit(app.exec_())</span></p></body></html>