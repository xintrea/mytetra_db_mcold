<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'DejaVu Sans'; font-size:11pt; font-weight:400; font-style:normal;">
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Arial,Helvetica,sans-serif'; font-size:8.25pt; font-weight:600; color:#333333;">Using Byte Streams</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Arial,Helvetica,sans-serif'; font-size:8.25pt; color:#000000;">We'll explore </span><span style=" font-family:'Monaco,Courier,Courier New'; font-size:8.25pt; color:#000000;">FileInputStream</span><span style=" font-family:'Arial,Helvetica,sans-serif'; font-size:8.25pt; color:#000000;"> and </span><span style=" font-family:'Monaco,Courier,Courier New'; font-size:8.25pt; color:#000000;">FileOutputStream</span><span style=" font-family:'Arial,Helvetica,sans-serif'; font-size:8.25pt; color:#000000;"> by examining an example program named </span><a href="https://docs.oracle.com/javase/tutorial/essential/io/examples/CopyBytes.java"><span style=" font-family:'Monaco,Courier,Courier New'; font-size:8.25pt; text-decoration: underline; color:#3a87cf;">CopyBytes</span></a><span style=" font-family:'Arial,Helvetica,sans-serif'; font-size:8.25pt; color:#000000;">, which uses byte streams to copy </span><span style=" font-family:'Monaco,Courier,Courier New'; font-size:8.25pt; color:#000000;">xanadu.txt</span><span style=" font-family:'Arial,Helvetica,sans-serif'; font-size:8.25pt; color:#000000;">, one byte at a time.</span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:30px; margin-right:30px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:8.25pt; color:#000000;">import java.io.FileInputStream;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:30px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:8.25pt; color:#000000;">import java.io.FileOutputStream;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:30px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:8.25pt; color:#000000;">import java.io.IOException;</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:30px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier'; font-size:8.25pt; color:#000000;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:30px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:8.25pt; color:#000000;">public class CopyBytes {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:30px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:8.25pt; color:#000000;">    public static void main(String[] args) throws IOException {</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:30px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier'; font-size:8.25pt; color:#000000;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:30px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:8.25pt; color:#000000;">        FileInputStream in = null;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:30px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:8.25pt; color:#000000;">        FileOutputStream out = null;</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:30px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier'; font-size:8.25pt; color:#000000;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:30px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:8.25pt; color:#000000;">        try {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:30px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:8.25pt; color:#000000;">            in = new FileInputStream(&quot;xanadu.txt&quot;);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:30px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:8.25pt; color:#000000;">            out = new FileOutputStream(&quot;outagain.txt&quot;);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:30px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:8.25pt; color:#000000;">            int c;</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:30px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier'; font-size:8.25pt; color:#000000;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:30px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:8.25pt; color:#000000;">            while ((c = in.read()) != -1) {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:30px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:8.25pt; color:#000000;">                out.write(c);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:30px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:8.25pt; color:#000000;">            }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:30px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:8.25pt; color:#000000;">        } finally {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:30px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:8.25pt; color:#000000;">            if (in != null) {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:30px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:8.25pt; color:#000000;">                in.close();</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:30px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:8.25pt; color:#000000;">            }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:30px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:8.25pt; color:#000000;">            if (out != null) {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:30px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:8.25pt; color:#000000;">                out.close();</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:30px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:8.25pt; color:#000000;">            }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:30px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:8.25pt; color:#000000;">        }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:30px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:8.25pt; color:#000000;">    }</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:30px; margin-right:30px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-size:8.25pt; color:#000000;">}</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Monaco,Courier,Courier New'; font-size:8.25pt; color:#000000;">CopyBytes</span><span style=" font-family:'Arial,Helvetica,sans-serif'; font-size:8.25pt; color:#000000;"> spends most of its time in a simple loop that reads the input stream and writes the output stream, one byte at a time, as shown in </span><a name="figure:byteStream.gif"></a><span style=" font-family:'Arial,Helvetica,sans-serif'; font-size:8.25pt; color:#000000;">t</span><span style=" font-family:'Arial,Helvetica,sans-serif'; font-size:8.25pt; color:#000000;">he following figure.</span></p>
<p align="center" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image16901.png" /></p>
<p align="center" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'sans-serif'; font-size:8.25pt; color:#000000;">Simple byte stream input and output.</span></p>
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Arial,Helvetica,sans-serif'; font-size:8.25pt; font-weight:600; color:#333333;">Always Close Streams</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Arial,Helvetica,sans-serif'; font-size:8.25pt; color:#000000;">Closing a stream when it's no longer needed is very important — so important that </span><span style=" font-family:'Monaco,Courier,Courier New'; font-size:8.25pt; color:#000000;">CopyBytes</span><span style=" font-family:'Arial,Helvetica,sans-serif'; font-size:8.25pt; color:#000000;"> uses a </span><span style=" font-family:'Monaco,Courier,Courier New'; font-size:8.25pt; color:#000000;">finally</span><span style=" font-family:'Arial,Helvetica,sans-serif'; font-size:8.25pt; color:#000000;"> block to guarantee that both streams will be closed even if an error occurs. This practice helps avoid serious resource leaks.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Arial,Helvetica,sans-serif'; font-size:8.25pt; color:#000000;">One possible error is that </span><span style=" font-family:'Monaco,Courier,Courier New'; font-size:8.25pt; color:#000000;">CopyBytes</span><span style=" font-family:'Arial,Helvetica,sans-serif'; font-size:8.25pt; color:#000000;"> was unable to open one or both files. When that happens, the stream variable corresponding to the file never changes from its initial </span><span style=" font-family:'Monaco,Courier,Courier New'; font-size:8.25pt; color:#000000;">null</span><span style=" font-family:'Arial,Helvetica,sans-serif'; font-size:8.25pt; color:#000000;">value. That's why </span><span style=" font-family:'Monaco,Courier,Courier New'; font-size:8.25pt; color:#000000;">CopyBytes</span><span style=" font-family:'Arial,Helvetica,sans-serif'; font-size:8.25pt; color:#000000;"> makes sure that each stream variable contains an object reference before invoking </span><span style=" font-family:'Monaco,Courier,Courier New'; font-size:8.25pt; color:#000000;">close</span><span style=" font-family:'Arial,Helvetica,sans-serif'; font-size:8.25pt; color:#000000;">.</span></p>
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Arial,Helvetica,sans-serif'; font-size:8.25pt; font-weight:600; color:#333333;">When Not to Use Byte Streams</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Monaco,Courier,Courier New'; font-size:8.25pt; color:#000000;">CopyBytes</span><span style=" font-family:'Arial,Helvetica,sans-serif'; font-size:8.25pt; color:#000000;"> seems like a normal program, but it actually represents a kind of low-level I/O that you should avoid. Since </span><span style=" font-family:'Monaco,Courier,Courier New'; font-size:8.25pt; color:#000000;">xanadu.txt</span><span style=" font-family:'Arial,Helvetica,sans-serif'; font-size:8.25pt; color:#000000;"> contains character data, the best approach is to use </span><a href="https://docs.oracle.com/javase/tutorial/essential/io/charstreams.html"><span style=" font-family:'Arial,Helvetica,sans-serif'; font-size:8.25pt; text-decoration: underline; color:#3a87cf;">character streams</span></a><span style=" font-family:'Arial,Helvetica,sans-serif'; font-size:8.25pt; color:#000000;">, as discussed in the next section. There are also streams for more complicated data types. Byte streams should only be used for the most primitive I/O.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Arial,Helvetica,sans-serif'; font-size:8.25pt; color:#000000;">So why talk about byte streams? Because all other stream types are built on byte streams.</span></p></body></html>