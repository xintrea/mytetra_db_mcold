<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'DejaVu Sans'; font-size:11pt; font-weight:400; font-style:normal;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:x-large; color:#282828; background-color:#ffffff;">Что такое монтирование?</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Open Sans,sans-serif'; font-size:16px; color:#282828; background-color:#ffffff;">Как я уже сказал Linux имеет единую корневую файловую систему, куда подключаются все запоминающие устройства и другие ресурсы. На самом деле, в Windows происходит что-то подобное, только все это скрыто от пользователя.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:20px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'FreeMono'; font-size:16px; font-weight:600; color:#6a1009; background-color:#ffffff;">Фактически смонтированный раздел становиться частью корневой файловой системы и система старается сделать работу со всеми разделами, независимо от их файловых систем, прозрачной. Это значит, что если вы примонтируете участок оперативной памяти или удаленную сетевую папку, то сможете работать с ней в файловом менеджере точно так же, как и с локальным диском.</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Open Sans,sans-serif'; font-size:16px; color:#282828; background-color:#ffffff;">Дополнительные носители монтируются из файлов устройств /dev</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Open Sans,sans-serif'; font-size:16px; color:#282828; background-color:#ffffff;">Например, вы хотите примонтировать флешку. Вы даете системе команду подключить ее в папку /run/media/имя_пользователя/UUID_флешки/. Система определяет файловую систему устройства, а затем, используя драйвера ядра подключает ее к указанной папке. Дальше вам остается работать с той папкой, как с любой другой. Больше ни о чем думать не нужно. Когда надумаете извлечь флешку, ее нужно отмонтировать</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Open Sans,sans-serif'; font-size:16px; color:#282828; background-color:#ffffff;">Обычно, монтированием занимаются специальные сервисы оболочки, но не всегда они доступны. А иногда нужно сделать все вручную, чтобы задать дополнительные опции монтирования или другие параметры. Для монтирования в Linux используется команда mount. Рассмотрим ее параметры:</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Open Sans,sans-serif'; font-size:16px; font-weight:600; color:#ff9900;">$ mount </span><span style=" font-family:'Open Sans,sans-serif'; font-size:16px; font-weight:600; color:#99cc00;">файл_устройства</span><span style=" font-family:'Open Sans,sans-serif'; font-size:16px; font-weight:600; color:#ff9900;"> </span><span style=" font-family:'Open Sans,sans-serif'; font-size:16px; font-weight:600; color:#339966;">папка_назначения</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Open Sans,sans-serif'; font-size:16px; color:#282828; background-color:#ffffff;">Или расширенный вариант:</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Open Sans,sans-serif'; font-size:16px; font-weight:600; color:#ff9900;">$ mount</span><span style=" font-family:'Open Sans,sans-serif'; font-size:16px; font-weight:600; color:#282828;"> </span><span style=" font-family:'Open Sans,sans-serif'; font-size:16px; font-weight:600; color:#99cc00;">опции</span><span style=" font-family:'Open Sans,sans-serif'; font-size:16px; font-weight:600; color:#282828;"> </span><span style=" font-family:'Open Sans,sans-serif'; font-size:16px; font-weight:600; color:#339966;">-t файловая_система</span><span style=" font-family:'Open Sans,sans-serif'; font-size:16px; font-weight:600; color:#282828;"> </span><span style=" font-family:'Open Sans,sans-serif'; font-size:16px; font-weight:600; color:#3366ff;">-o опции_монтирования</span><span style=" font-family:'Open Sans,sans-serif'; font-size:16px; font-weight:600; color:#282828;"> </span><span style=" font-family:'Open Sans,sans-serif'; font-size:16px; font-weight:600; color:#993366;">файл_устройства</span><span style=" font-family:'Open Sans,sans-serif'; font-size:16px; font-weight:600; color:#ff0000;">папка_назначения</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Open Sans,sans-serif'; font-size:16px; color:#282828; background-color:#ffffff;">Опции задают различные дополнительные особенности работы утилиты. Опция -t необязательна, но она позволяет задать файловую систему, которая будет использована и иногда это очень полезно. С помощью опции -o вы можете задать различные параметры монтирования, например, монтировать только для чтения и т д. Последних два параметра - это файл устройства, например, /dev/sda1 и папка назначения, например, /mnt.</span><a name="aswift_1_expand"></a><span style=" font-family:'Open Sans,sans-serif'; font-size:8.25pt; color:#282828; background-color:transparent;"><br /></span></p>
<p style=" margin-top:10px; margin-bottom:0px; margin-left:10px; margin-right:10px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><a name="stb-container-3573"></a><span style=" font-family:'Open Sans,sans-serif'; font-size:8.25pt; color:#000000;">$</span><span style=" font-family:'Open Sans,sans-serif'; font-size:8.25pt; color:#000000;"> sudo mount ~/file.iso /mnt</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Open Sans,sans-serif'; font-size:8.25pt; color:#282828; background-color:#ffffff;">Посмотреть список всех примонтированных устройств можно просто выполнив mount без параметров:</span></p>
<p style=" margin-top:10px; margin-bottom:0px; margin-left:10px; margin-right:10px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><a name="stb-container-4973"></a><span style=" font-family:'Open Sans,sans-serif'; font-size:8.25pt; color:#000000;">$</span><span style=" font-family:'Open Sans,sans-serif'; font-size:8.25pt; color:#000000;"> mount</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><img src="image18362.png" /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" background-color:#ffffff;">Размонтирование устройств в Linux</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Open Sans,sans-serif'; font-size:8.25pt; color:#282828; background-color:#ffffff;">Когда вы хотите завершить работу с устройством, особенно с флешкой, его нужно размонтировать. Для этого существует утилита umount. В качестве параметров она принимает точку монтирования или устройство. Например:</span></p>
<p style=" margin-top:10px; margin-bottom:0px; margin-left:10px; margin-right:10px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><a name="stb-container-4497"></a><span style=" font-family:'Open Sans,sans-serif'; font-size:8.25pt; color:#000000;">$</span><span style=" font-family:'Open Sans,sans-serif'; font-size:8.25pt; color:#000000;"> sudo umount /mnt</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Open Sans,sans-serif'; font-size:8.25pt; color:#282828; background-color:#ffffff;">Теперь ваше устройство не смонтировано. Но иногда может возникнуть ошибка размонтирования. Система сообщит, что устройство занято: </span><span style=" font-family:'Open Sans,sans-serif'; font-size:8.25pt; font-weight:600; color:#282828;">umount: /mnt: target is busy.</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><img src="image19926.png" /></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Open Sans,sans-serif'; font-size:8.25pt; color:#282828; background-color:#ffffff;">Проблему можно решить закрыв все программы, которые могут использовать любой файл в этой папке. Какие именно это программы вы можете узнать с помощью команды lsof:</span></p>
<p style=" margin-top:10px; margin-bottom:0px; margin-left:10px; margin-right:10px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><a name="stb-container-1537"></a><span style=" font-family:'Open Sans,sans-serif'; font-size:8.25pt; color:#000000;">$</span><span style=" font-family:'Open Sans,sans-serif'; font-size:8.25pt; color:#000000;"> lsof -w /mnt<br />$ lsof -w /dev/sdb6</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><img src="image8008.png" /></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Open Sans,sans-serif'; font-size:8.25pt; color:#282828; background-color:#ffffff;">Здесь вы видите всю необходимую информацию, чтобы понять что происходит и что с этим делать. Утилита вывела название программы, ее PID, и даже файл, с которым она работает. Вы можете завершить все программы, а потом снова повторить попытку или используйте опцию -l, файловая система будет отключена немедленно, несмотря на то, что она занята:</span></p>
<p style=" margin-top:10px; margin-bottom:0px; margin-left:10px; margin-right:10px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><a name="stb-container-8200"></a><span style=" font-family:'Open Sans,sans-serif'; font-size:8.25pt; color:#000000;">$</span><span style=" font-family:'Open Sans,sans-serif'; font-size:8.25pt; color:#000000;"> sudo umount -l /mnt</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><img src="image18068.png" /></p></body></html>